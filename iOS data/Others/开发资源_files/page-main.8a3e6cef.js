(function(z){
var dM=function(a){if(a.Cq){var b=(0,window.$)(a.Cq);b.stop().text("草稿已经保存").fadeTo(600,.5).delay(3E3).fadeOut(600,function(){b.text("")})}};var eM=function(a){a.ready(function(){var a=this.Ra;this.Qd?z.ys(a,a.value.length):a.Ja.lastChild?z.dv(a.Ja.lastChild):a.hg();this.Hl&&(this.Hl.scrollTop=this.Hl.scrollHeight)})};var fM=function(a){return a.Qd?a.Ra:a.Ra.m()};var gM=function(a,b){a.params=b};var hM=function(a){a.Kz=!0;a.dF=z.ho(a.m()).height;z.vG+=a.dF;z.A(z.qv,function(a){a&&!a.Kz&&a.Pl&&a.Tp()})};
var iM=function(a){var b={};z.A(a.data.wd(),function(a){b[a]=this.data.get(a)},a);return b};var jM=function(){this.gC="";this.bN=kM};var lM=function(){this.Fk="";this.RM=mM};var nM=function(a){return a instanceof jM&&a.constructor===jM&&a.bN===kM?a.gC:"type_error:Const"};var oM=function(){this.RJ="";this.eN=pM};
var qM=function(a){function b(a){if(z.ma(a))z.A(a,b);else{if(!(a instanceof z.Cd)){var g=null;a.mz&&(g=a.Tl());a=z.Fd(z.Ma(a.ak?a.hh():String(a)),g)}d+=z.Ed(a);a=a.Tl();0==c?c=a:0!=a&&c!=a&&(c=null)}}var c=0,d="";z.A(arguments,b);return z.Fd(d,c)};var rM=function(a,b){b.all=!0;return z.Or(a,b)};var sM=function(a){return{link:{url:a},module:[{card:{content:[z.Fw(a)]}}]}};var tM=function(a){a=void 0===a?{}:a;z.zt.call(this,a.data,0);this.vN=a.gl;this.mP=a.lP;this.Ko=""};
var uM=function(a){a=void 0===a?{}:a;z.zt.call(this);this.Ef=a.Ef||this.Ef;this.Lf=a.Lf||this.Lf};var vM=function(){z.zt.call(this,null,null,"搜索话题");this.Se="";this.data=[z.oh[0]]};var wM=function(a,b){return window.$.post("/question/askpeople",{qid:a,uid:b,op:"remove"})};var xM=function(a,b){return z.ma(a)?['\x3ca data-hovercard\x3d"p$t$',a[1],'" href\x3d"/people/',a[1],'"',b?' class\x3d"'+b+'"':"",' title\x3d"',a[0],'"\x3e',a[0],"\x3c/a\x3e"].join(""):"匿名用户"};
var yM=function(a){if(0===a||1===a)return"匿名用户";var b=z.O("a",{href:"/people/"+a[1],title:a[0]},a[0]);b.setAttribute("data-hovercard","p$t$"+a[1]);return b};var zM=function(a){if(0===a||1===a)return z.O("span");if(z.ma(a)){var b=z.O("a",{href:"/people/"+a[1],title:a[0],"class":"zm-item-link-avatar"},z.O("img",{src:a[2],"class":"zm-list-avatar"}));b.setAttribute("data-hovercard","p$t$"+a[1]);return b}};var AM=function(a){return 1===a?!0:z.ma(a)?a[3]===z.T[3]:!1};
var BM=function(a){if(!CM.test("input"))throw Error("Invalid tag name \x3cinput\x3e.");if("INPUT"in DM)throw Error("Tag name \x3cinput\x3e is not allowed for SafeHtml.");var b=null,c="\x3cinput";if(a)for(var d in a){if(!CM.test(d))throw Error('Invalid attribute name "'+d+'".');var f=a[d];if(null!=f){var g;g=d;if(f instanceof jM)f=nM(f);else if("style"==g.toLowerCase()){if(!z.sa(f))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof f+" given: "+f);
if(!(f instanceof z.Ad)){var h="",k=void 0;for(k in f){if(!/^[-_a-zA-Z0-9]+$/.test(k))throw Error("Name allows only [-_a-zA-Z0-9], got: "+k);var l=f[k];if(null!=l){if(l instanceof jM)l=nM(l);else if(EM.test(l)){for(var p=!0,r=!0,w=0;w<l.length;w++){var H=l.charAt(w);"'"==H&&r?p=!p:'"'==H&&p&&(r=!r)}p&&r||(l="zClosurez")}else l="zClosurez";h+=k+":"+l+";"}}f=h?(new z.Ad).Po(h):z.Ql}f=f instanceof z.Ad&&f.constructor===z.Ad&&f.QM===z.Bd?f.fB:"type_error:SafeStyle"}else{if(/^on/i.test(g))throw Error('Attribute "'+
g+'" requires goog.string.Const value, "'+f+'" given.');if(g.toLowerCase()in FM)if(f instanceof oM)f=f instanceof oM&&f.constructor===oM&&f.eN===pM?f.RJ:"type_error:TrustedResourceUrl";else if(f instanceof lM)f=f instanceof lM&&f.constructor===lM&&f.RM===mM?f.Fk:"type_error:SafeUrl";else if(z.oa(f))f instanceof lM||(f=f.ak?f.hh():String(f),GM.test(f)||(f="about:invalid#zClosurez"),h=new lM,h.Fk=f,f=h),f=f.hh();else throw Error('Attribute "'+g+'" on tag "input" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+
f+'" given.');}f.ak&&(f=f.hh());g=g+'\x3d"'+z.Ma(String(f))+'"';c+=" "+g}}d=void 0;null!=d?z.ma(d)||(d=[d]):d=[];!0===HM.input?c+="\x3e":(b=qM(d),c+="\x3e"+z.Ed(b)+"\x3c/input\x3e",b=b.Tl());(a=a&&a.dir)&&(b=/^(ltr|rtl|auto)$/i.test(a)?0:null);return z.Fd(c,b)};var IM=function(a,b){var c=z.qb(a,b,void 0);return 0<=c?(Array.prototype.splice.call(a,c,1),!0):!1};var JM=function(a){20<a.length&&(a=a.substring(0,17)+"...");return a};var KM=function(){z.R.call(this);this.Cf="zm-pm-item"};
var LM=function(a){if(a.lb().length){var b=new z.Dl;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a.Mt)}};var MM=function(a,b){z.X.confirm("删除私信","你确定要删除这封私信吗？",function(a){a&&NM(this,b)},a)};var NM=function(a,b){var c=new z.Z(!0);a.o().Aa(c,"success",function(){var a=z.Tn(c);a.r?z.X.message(a.msg):window.location.reload()});c.ajax("/inbox/delete","type\x3dsingle\x26token\x3d"+b)};var OM=function(){z.R.call(this);this.Cf="zm-pm-item"};
var PM=function(a){var b=new z.Z(!0);b.on("success",function(){var a=z.Tn(b);a.r?z.X.message(a.msg):window.location.reload()});b.ajax("/inbox/delete","type\x3dthread\x26token\x3d"+a)};var QM=function(a,b,c,d,f){z.LD.call(this,a,b,f);this.jy=c||"people";this.VP=d||["zg-follow","zg-unfollow"]};var RM=function(a,b,c,d){z.I.call(this);this.h=a;this.jy=b||"people";this.UP=c||["zg-btn-follow","zg-btn-unfollow"];this.text=d||["关注","取消关注"]};var SM=function(a){z.I.call(this);this.url=a||"/topic"};
var TM=function(a,b,c){var d=c[0],f="";"topic"!==d[0]&&d[3]&&(f='data-parent\x3d"'+d[3]+'"');b.html('\x3ca href\x3d"'+("topic"===d[0]?"/topic/"+d[2]+"/organize/entire":"javascript:;")+'" data-token\x3d"'+d[2]+'" '+f+' name\x3d"'+d[0]+'"\x3e'+d[1]+"\x3c/a\x3e\x3cul class\x3d'zm-topic-organize-list'\x3e\x3c/ul\x3e");"topic"!==c[0][0]&&b.addClass("zm-topic-organize-loadmore");b=(0,window.$)("ul",(0,window.$)(b));if(1<c.length)for(c=c[1],d=0;d<c.length;d++){var f=c[d],g=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");
b.append(g);TM(a,g,f)}};var UM=function(a,b,c){z.Rv.call(this,a,b,c)};var VM=function(a,b){z.R.call(this);a?(this.oa={title:a.title,id:a.id,indexItem:a.iS,subTopic:a.oX},this.M={isEdit:!1}):(this.oa={title:"",id:void 0,indexItem:[],subTopic:[]},this.M={isEdit:!0});WM(this,b)};
var WM=function(a,b){function c(){a.wh=!1}function d(a){if("string"===typeof a)try{return JSON.parse(a)}catch(b){return{}}else return a}a.service={qN:function(f){a.wh=!0;return window.$.ajax({method:"post",url:"/topic_index_modules",data:{topicId:b,title:f.title}}).then(function(a,b,f){c();b=d(a);return 201===f.status?b.topicIndexModuleId:window.$.Deferred().reject(d(a).msg)},c)},cY:function(f,g){a.wh=!0;return window.$.ajax({method:"patch",url:"/topic_index_modules/"+f,data:{title:g,topicId:b}}).then(function(a,
b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg)},c)},iP:function(f){a.wh=!0;return window.$.ajax({method:"delete",url:"/topic_index_items/"+f,data:{topicId:b,topicIndexModuleId:a.oa.id}}).then(function(a,b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg)},c)},JD:function(f){a.wh=!0;return window.$.ajax({method:"post",data:{objectType:f.WI,topicIndexModuleId:a.oa.id,objectId:f.jd,topicId:b},url:"/topic_index_items"}).then(function(a,b,f){c();a=d(a);return 201===
f.status?a:window.$.Deferred().reject(a.msg)},c)},tN:function(f){a.wh=!0;return window.$.ajax({method:"post",data:{topicIndexModuleId:f.Eq,subTopicId:f.OX,topicId:b},url:"/topic_index_subtopics"}).then(function(a,b,f){c();a=d(a);return 201===f.status?a.topicIndexSubtopicId:window.$.Deferred().reject(a.msg)},c)},kP:function(f){a.wh=!0;return window.$.ajax({method:"delete",url:"/topic_index_subtopics/"+f,data:{topicId:b,topicIndexModuleId:a.oa.id}}).then(function(a,b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg)},
c)},jP:function(f){a.wh=!0;return window.$.ajax({method:"delete",url:"/topic_index_modules/"+f,data:{topicId:b}}).then(function(a,b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg)},c)},bY:function(f,g){a.wh=!0;return window.$.ajax({method:"PATCH",url:"/topic_index_items/"+f,data:{previousItemId:g.QJ,nextItemId:g.RI,topicIndexModuleId:g.Eq,topicId:b}}).then(function(a,b,f){c();if(204!==f.status)return window.$.Deferred().reject(d(a).msg)},c)}}};
var XM=function(a,b,c){for(var d=Object.keys(b),f={key:void 0,De:void 0},d=z.ha(d),g=d.next();!g.done;f={key:f.key,De:f.De},g=d.next())switch(f.key=g.value,f.key){case "title":a.oa.title=a.rC.value=a.Uc.textContent=b.title;a.dispatchEvent({type:YM,data:{id:a.oa.id,title:a.oa.title}});break;case "id":a.oa.id=b.id;a.PN.name=b.id;break;case "indexItem":f.De=a;c||(a.XJ.value="");g=[b];c&&g.push(c);g.forEach(function(a){return function(b){for(var d=b[a.key][0],f=b[a.key][1],g=0;g<f;g++)a.De.iB.children[d+
g].remove(),c||a.De.co.children[d+g].remove();a.De.oa[a.key].splice.apply(a.De.oa[a.key],[].concat(z.ia(b[a.key])));if(2<b[a.key].length){for(d=2;d<b[a.key].length;d++)f=(0,window.$)(a.De.iB.children[b[a.key][0]]),g=b[a.key][d],g='\x3cli class\x3d"TopicIndex-questionItem"\x3e\n      \x3ca class\x3d"question_link" target\x3d"_blank" href\x3d"/question/'+g.jd+'"\x3e'+g.text+"\x3c/a\x3e\n    \x3c/li\x3e",f[0]?(0,window.$)(g).insertBefore(f):(0,window.$)(a.De.iB).append(g),c||(0,window.$)(a.De.co).append(ZM(b[a.key][d]));
c||$M(a.De,a.De.co)}}}(f));break;case "subTopic":for(var g=b[f.key][0],h=b[f.key][1],k=0;k<h;k++)a.jv.children[g+k].remove();if(2<b[f.key].length)for(g=2;g<b[f.key].length;g++)(0,window.$)(a.jv).append(aN(b[f.key][g]));a.oa[f.key].splice.apply(a.oa[f.key],[].concat(z.ia(b[f.key])))}};
var bN=function(a,b){for(var c=Object.keys(b),c=z.ha(c),d=c.next();!d.done;d=c.next())switch(d.value){case "isEdit":if(a.M.isEdit=b.isEdit,!1===b.isEdit){if(!a.oa.id){a.dispatchEvent(cN);return}d=a.Ga.removeClass("is-edit").children(".is-hide");0===a.oa.subTopic.length&&(d=d.not(".TopicIndex-subTopicsWrap"));d.removeClass("is-hide");a.Ga.find(".TopicIndex-editWrap").addClass("is-hide")}else a.BH=!0,a.Ga.addClass("is-edit").children().not(".zg-anchor-hidden").addClass("is-hide"),(0,window.$)(a.CP).removeClass("is-hide")}};
var dN=function(a,b){switch(b.type){case "title":a.lL.textContent=b.Ta;break;case "question":a.YJ.textContent=b.Ta;break;case "topic":a.pL.textContent=b.Ta}};
var eN=function(a,b,c){var d=new tM({data:c,gl:function(b){var c=a.oa.subTopic;return a.oa.id?a.service.tN({Eq:a.oa.id,OX:b[3]}).then(function(d){dN(a,{type:"topic",Ta:""});XM(a,{subTopic:[c.length,0,{text:b[0],jd:b[3],id:d,Vc:b[1]}]});return b}).fail(function(b){dN(a,{type:"topic",Ta:b||"添加失败"})}):(d.pc=!1,dN(a,{type:"title",Ta:"请输入标题"}))},lP:function(b){var c=a.oa.subTopic.findIndex(function(a){return(0,window.parseInt)(a.jd)===(0,window.parseInt)(b)});return a.service.kP(a.oa.subTopic[c].id).then(function(){dN(a,
{type:"topic",Ta:""});XM(a,{subTopic:[c,1]});return b}).fail(function(b){return dN(a,{type:"topic",Ta:b||"删除失败"})})}});d.kp=3;d.w(b.find(".zm-tag-editor")[0])};
var fN=function(a,b){var c=(0,z.ew)(gN);new z.Xs(b,{source:"/question/autocomplete",Pi:b.offsetParent,select:function(b){var c=this;dN(a,{type:"question",Ta:""});if(!a.oa.id)return dN(a,{type:"question",Ta:"请输入标题后才能添加问题"});if(30<=a.oa.indexItem.length)return dN(a,{type:"question",Ta:"问题数不能超过 30 个"}),"";a.service.JD({Eq:a.oa.id,jd:b.url_token,WI:"question"}).then(function(g){XM(a,{indexItem:[a.oa.indexItem.length,0,{jd:b.url_token,id:g.topicIndexItemId,text:b.title}]});dN(c,{type:"question",Ta:""})}).fail(function(b){return dN(a,
{type:"question",Ta:b||"添加失败"})})},kd:function(a,b,g){g.innerHTML=c(a.data)}});b.addEventListener("input",function(c){(c=c.target.value.trim())||dN(a,{type:"question",Ta:""});if(c.startsWith("http")){for(var f={article:/http[s]?:\/\/zhuanlan.zhihu.[a-z]{3}\/p\/(\d+)/,question:/http[s]?:\/\/www.zhihu.com\/question\/(\d+)/},g=void 0,h=Object.keys(f),h=z.ha(h),k=h.next();!k.done;k=h.next()){var k=k.value,l=f.article.exec(c);if(l&&l[1]){g={WI:k,jd:l[1],Eq:a.oa.id};break}}g&&a.service.JD(g).then(function(c){dN(a,
{type:"question",Ta:""});g.title=c.topicIndexItemTitle;XM(a,{indexItem:[a.oa.indexItem.length,0,{jd:g.jd,id:c.topicIndexItemId,text:g.title}]});b.value=""}).fail(function(b){return dN(a,{type:"question",Ta:b||"添加失败"})})}})};
var $M=function(a,b){if(!z.tm.Ab){a.he&&a.he.H();var c=new z.Zs;a.he=c;c.GK("question-cursor-move");c.ns=(0,z.$a)("question-cursor-move opacity-40").split(" ");z.$s(c,b,0);c.init();a.he=c;a.he.R=(0,window.$)(b);a.o().g(a.he,"dragend",function(c){dN(a,{type:"topic",Ta:""});c=c.ZO;var f=c.dataset.id,g=a.oa.indexItem.findIndex(function(a){return Number(a.id)===Number(f)}),h={Eq:a.oa.id,QJ:c.previousElementSibling?c.previousElementSibling.dataset.id:0,RI:c.nextElementSibling?c.nextElementSibling.dataset.id:
0},k=[].indexOf.call(b.children,c);a.pc===c||k===g||0===h.QJ&&0===h.RI||(a.service.bY(f,h).then(function(){a.pc=null;XM(a,{indexItem:[g,1]},{indexItem:[k,0,a.oa.indexItem[g]]});a.dispatchEvent("sort");dN(a,{type:"question",Ta:""})}).fail(function(b){a.pc=null;dN(a,{type:"question",Ta:b||"调整失败"})}),a.pc=c)});(0,window.$)(b).find("a, i").on("mousedown",function(a){return a.stopPropagation()})}};
var hN=function(a){return"\n    \x3cdiv class\x3d\"TopicIndex-editWrap\"\x3e\n      \x3cdiv class\x3d'TopicIndex-edit'\x3e\n        \x3cdiv class\x3d'TopicIndex-editTitle'\x3e标题\x3cspan class\x3d\"TopicIndex-errTips\"\x3e\x3c/span\x3e\x3c/div\x3e\n        \x3cdiv class\x3d'TopicIndex-editContent'\x3e\n          \x3cinput type\x3d'text' class\x3d'TopicIndex-editSectionTitle zg-form-text-input js-change' placeholder\x3d'输入标题' value\x3d\""+(a&&a.title?a.title:"")+"\" role\x3d'combobox'\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d'TopicIndex-edit'\x3e\n        \x3cdiv class\x3d'TopicIndex-editTitle'\x3e相关问题或文章\x3cspan class\x3d\"TopicIndex-errTips\"\x3e\x3c/span\x3e\x3c/div\x3e\n        \x3cdiv class\x3d'TopicIndex-display'\x3e\n          \x3cdiv class\x3d'TopicIndex-questionList'\x3e"+
(a&&a.indexItem?a.indexItem&&a.indexItem.map(function(a){return'\x3cdiv class\x3d"TopicIndex-questionItem item" data-id\x3d'+a.id+'\x3e\n                \x3cspan class\x3d"zg-icon-drag-wrap"\x3e\x3ci class\x3d"zg-icon-drag"\x3e\x3c/i\x3e\x3c/span\x3e\n                \x3ca class\x3d"question_link" target\x3d"_blank" href\x3d"/question/'+a.jd+'"\x3e'+a.text+'\x3c/a\x3e\n                \x3ca class\x3d"TopicIndex-binButton zu-bin-button js-delete" name\x3d"delete"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e删除\x3c/a\x3e\n            \x3c/div\x3e'}).join("")||
""||"":"")+"\n          \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d'TopicIndex-editContent'\x3e\n          \x3cinput type\x3d'text' class\x3d'zg-form-text-input TopicIndex-editQuesInput' placeholder\x3d'搜索问题或粘贴问题、文章链接' role\x3d'combobox' autoComplete\x3d'off' /\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d'TopicIndex-edit'\x3e\n        \x3cdiv class\x3d'TopicIndex-editTitle'\x3e\n          \x3cspan class\x3d\"TopicIndex-editTitleText\"\x3e相关话题\x3cspan class\x3d\"TopicIndex-errTips\"\x3e\x3c/span\x3e\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d\"zm-tag-editor zg-section\"\x3e\n          \x3cdiv class\x3d\"zm-tag-editor-labels zg-clear\"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d'zm-command clearfix'\x3e\n        \x3cspan class\x3d'zg-left'\x3e\x3ca class\x3d'js-finish submit-button zg-btn-blue' name\x3d'exit'\x3e完成\x3c/a\x3e\x3c/span\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e"};
var iN=function(a){return'\x3ca class\x3d"zg-anchor-hidden" name\x3d"'+a.id+'"\x3e\x3c/a\x3e\n    \x3ch3 class\x3d"TopicIndex-sectionTitle"\x3e'+a.title+'\x3c/h3\x3e\n    \x3cul class\x3d"TopicIndex-questionList"\x3e'+(a.indexItem&&a.indexItem.map(function(a){return'\x3cli class\x3d"TopicIndex-questionItem"\x3e\n        \x3ca class\x3d"question_link" target\x3d"_blank" href\x3d"/question/'+a.jd+'"\x3e'+a.text+"\x3c/a\x3e\n      \x3c/li\x3e"}).join("")||"")+'\n    \x3c/ul\x3e\n    \x3cdiv class\x3d"TopicIndex-subTopicsWrap"\x3e\n      \x3cspan class\x3d"TopicIndex-subLabel"\x3e相关话题：\x3c/span\x3e\n      \x3cdiv class\x3d"TopicIndex-subTopics clearfix"\x3e'+
(a.subTopic&&a.subTopic.map(function(a){return'\x3cspan data-id\x3d"'+a.id+'"\x3e\x3ca class\x3d"zm-item-tag" href\x3d"/topic/'+a.Vc+'" data-tip\x3d"t$b$'+a.Vc+'" data-token\x3d"'+a.Vc+'" data-topicid\x3d"'+a.jd+'"\x3e'+a.text+"\x3c/a\x3e\x3c/span\x3e"}).join("")||"")+'\n      \x3c/div\x3e\n    \x3c/div\x3e\n    \x3ca class\x3d"TopicIndex-editButton zu-edit-button js-edit" name\x3d"edit"\x3e\n      \x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e'};
var ZM=function(a){return'\n    \x3cdiv class\x3d"TopicIndex-questionItem item" data-id\x3d"'+a.id+'"\x3e\n      \x3cspan class\x3d"zg-icon-drag-wrap"\x3e\x3ci class\x3d"zg-icon-drag"\x3e\x3c/i\x3e\x3c/span\x3e\n      \x3ca class\x3d"question_link" target\x3d"_blank" href\x3d"/question/'+a.jd+'"\x3e'+a.text+'\x3c/a\x3e\n      \x3ca class\x3d"TopicIndex-binButton zu-bin-button js-delete" name\x3d"delete"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e删除\x3c/a\x3e\n    \x3c/div\x3e'};
var aN=function(a){return'\x3cspan data-id\x3d"'+a.id+'"\x3e\x3ca class\x3d"zm-item-tag" href\x3d"/topic/'+a.Vc+'" data-tip\x3d"t$b$'+a.Vc+'" data-token\x3d"'+a.Vc+'" data-topicid\x3d"'+a.jd+'"\x3e'+a.text+"\x3c/a\x3e\x3c/span\x3e"};var jN=function(){z.R.call(this);this.oa={id:z.oh[0][1]};this.Ui=[]};var kN=function(a,b){a.o().g(b,cN,function(){a.Ui.splice(a.Ui.indexOf(b),1);a.dispatchEvent(lN);b.H()})};
var mN=function(a,b){a.o().g(b,YM,function(b){a:{b=b.data;for(var d=a.bw.children(),f=0;f<d.length;f++){var g=d.eq(f),h=g.children("a"),k=h.attr("href").substr(1);if(Number(b.id)===Number(k)){b.title?h.text(b.title):g.remove();break a}}a.dispatchEvent(lN);a.bw.append('\x3cli class\x3d"TopicIndex-tocItem"\x3e\x3ca class\x3d"TopicIndex-tocLink" href\x3d"#'+b.id+'"\x3e'+b.title+"\x3c/a\x3e\x3c/li\x3e");a.bw.toggleClass("is-hide",2>=d.length)}})};
var nN=function(){z.R.call(this);var a=z.oh;this.Rf=a[0][3];this.bj=a[0];this.Kw=a[4];this.Mz=a[5];this.Bh="topic"};var oN=function(){(0,window.$)(".zm-topic-list-container").on("click",".js-questionUnhelpful",function(a){a=(0,window.$)(a.currentTarget);var b=a.data("qid"),c=a.data("isRevert");if(b)return c?(a.text("没有帮助").data("isRevert",!1),window.$.post("/question/revert-unhelpful",{qid:b})):(a.text("撤销没有帮助").data("isRevert",!0),window.$.post("/question/unhelpful",{qid:b})),!1})};
var pN=function(){var a=z.L("zh-topic-log-list");a&&((new QM(a,null,null,null,!0)).init(),(0,window.$)(a).on("click",'a[name\x3d"revert"]',z.jp(function(a){!1!==a&&z.ZD(this)},z.cE({Dq:!0}))))};var qN=function(a){if(z.L("zh-topic-admin-page-wrap")){var b=z.L("zh-topic-del-btn");b&&a.o().g(b,"click",a.cU)}};var rN=function(a,b){var c=z.Le("li",null,a.vw);z.A(c,function(a){a.getAttribute("data-token")===b[1]&&z.Q(a,!1)})};
var sN=function(a){var b=z.L("zh-topic-followers-list-wrap");b&&(a=new QM(b,["/topic",(0,window.encodeURI)(a.bj[1]),"followers"].join("/"),null,["zg-btn-follow","zg-btn-unfollow"],!0),a.Yi("zm-person-item"),a.init())};
var tN=function(a){var b=z.L("zh-topic-side-head");if(b){var c=z.N("zu-entry-focus-button",b);c&&a.o().g(c,"click",function(){(0,z.zG)(c,"topic","",["zg-btn-green","zg-btn-white"])});a.yg=z.L("zh-topic-operation-menu");a.yg&&a.o().g(a.yg,"click",a.QB)}if(b=z.L("zh-current-topic-bio")){var d=new z.Rv(!0,"/topic/bio/update","bio");gM(d,["tid\x3d"+a.Rf]);d.$b='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e你在 '+a.bj[0]+" 话题中的经验\x3c/a\x3e";d.qF=!0;d.w(b)}var f=(0,window.$)(".zm-topic-side-person-list .js-showAll");
if(f.length)f.on("click",function(){(0,window.$)(".zm-topic-side-person-list").addClass("show-all");f.remove()})};var uN=function(a){z.$e(a,z.Xe('\x3ca href\x3d"/question/23261456" class\x3d"zg-link-gray-normal"\x3e\x3ci class\x3d"icon-info" style\x3d"vertical-align: -3px; margin-right: 6px"\x3e\x3c/i\x3e如何参与知乎话题的公共编辑？\x3c/a\x3e'))};
var vN=function(a){if(z.L("zh-topic-organize-page-wrap")){var b=z.L("zh-topic-organize-parent-editor");if(b)if(z.T.ct){var c=new z.Ht(null,a.Rf,!0);c.au=!0;c.w(b);c.addEventListener("remove_tag",function(a){(a=a.data&&a.data.id)&&(0,window.$)("#wedge-"+a).remove()})}else uN(b);if(b=z.L("zh-topic-organize-child-editor"))z.T.ct?(c=new z.Ht(null,a.Rf,!1),c.au=!0,c.w(b),(0,window.$)("a.entire-link").insertAfter(c.bo).show()):uN(b);(0,window.$)("#zm-topic-manage-relation").on("change",'[type\x3d"checkbox"]',
function(){var a=(0,window.$)(this).closest("li").attr("id").split("-")[1];window.$.post("/topic/update",{action:"set_topic_edge",parent_topic_id:a,topic_id:z.oh[0][3],edge:this.checked^0}).done(function(a){if(!a)return z.X.message("网络异常");if(a.r)return z.X.message(a.msg)})});a.uw=z.L("zh-topic-alias-input");new z.wk(a.uw,"输入话题别名");a.vw=z.L("zh-topic-alias-list");a.o().g(z.L("zh-topic-alias-container"),"click",a.PU);if(b=z.L("zh-topic-merge"))a.Ka=new vM,a.Ka.w(b);(b=z.L("zh-topic-merge-btn"))&&a.o().g(b,
"click",a.pU)}};var wN=function(){var a=z.L("zh-topic-organize-page-children");a&&(new SM("/topic/"+(0,window.encodeURIComponent)(z.oh[0][1])+"/organize/entire")).w(a)};var xN=function(a){var b=z.L("zh-topic-side-related-topics");b&&(a.UV=b,a.oB=new z.Z(!1),a.o().g(a.oB,"complete",a.AU),a.oB.ajax("/topic/related?tid\x3d"+a.Rf))};
var yN=function(a){if(z.T.zZ)(0,window.$)("div.topic-avatar").addClass("disabled");else{var b=z.N("zm-entry-head-avatar-edit-button");if(b){var c=new z.nz(2,z.oh[0][3]);c.w(b);var d=z.N("zm-avatar-editor-preview");z.G(c,"beforepost",function(){(0,window.$)("\x3cdiv class\x3d'avatar-edit-preview-loading topic'\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e").appendTo(d.parentNode)});z.G(c,"success",function(){window.$.post("/topic/"+z.oh[0][1]+"/avatar",{avatar_path:c.getData().url}).then(function(a){if(!a)return z.X.message("网络异常");
if(a.r)return z.X.message(a.msg);d&&(d.src=c.getData().url)}).always(function(){(0,window.$)(".avatar-edit-preview-loading").remove()})});a.o().g(c,"beforeopen",z.jp(z.cE({Dq:!0}),z.Lq(z.q,!0)))}}};var zN=function(a){AN(a);BN(a);a.JI&&a.o().g(a.JI,"afterload",function(b){z.Y.yb({type:"ga_click_topic_more",data:b.data,target:a.JI.Vd})})};
var AN=function(a){var b=z.L("zh-topic-feed-list");if(b){var c=new z.Dl;a.L(c);c.use("locationSource",{Jt:0,offset:function(a){return z.jb(a).getAttribute("data-score")}});c.use("childConstructor",{factory:z.JD}).use("expandLimit");c.w(b);a.o().g(c,"click!",function(a){"comment"===a.namespace&&a.Gc.fill("category",this.Bh).fill("label","topic_activity")})}};
var BN=function(a){var b=z.L("zh-topic-top-page-list");if(b){var c=new z.Dl({Pf:!1});a.L(c);c.use("childConstructor",{factory:z.JD}).use("expandLimit");c.w(b);a.o().g(c,"click!",function(a){"comment"===a.namespace&&a.Gc.fill("category",this.Bh).fill("label","topic_activity")})}};
var CN=function(){function a(a){if(!a)return z.X.message("网络异常");if(a.r)return z.X.message(a.msg)}(0,window.$)("#zh-topic-manage-relation-form").on("change",'input[type\x3d"radio"]',function(){window.$.post("/topic/update",{action:"set_topic_weaknode",topic_id:z.oh[0][3],weak:(0,window.$)(this).val()}).done(a)});(0,window.$)("#zh-topic-manage-lock-form").on("change",'[type\x3d"checkbox"]',function(){window.$.post("/topic/lock",{url_token:z.oh[0][1],lock_type:this.name,lock_value:(0,window.$)(this).is(":checked")?
1:0}).done(a)})};var DN=function(a){var b=(0,window.$)(".topic-info a[name\x3dshare]"),c=b.get(0),d=window.location.href,f={index:[/\/topic\/\d+$/],hot:[/\/topic\/\d+\/newest/],top_answers:[/\/topic\/\d+\/top-answers/],unanswered:[/\/topic\/\d+\/unanswered/,/\/topic\/\d+\/questions/]},g=Object.keys(f).find(function(a){return f[a].some(function(a){return a.test(window.location.pathname)})})||"";c&&(z.fD(c,"topic",a.bj[1],d).Jb(a),b.click(function(){z.U("share","click_share_topic_page",g)}))};
var EN=function(a){var b=(0,window.$)(".TopicIndex-toc");if(b.length&&(2>=b.children().length?b.addClass("is-hide"):(FN(a,b),GN(a,b)),z.nm&&(b=(0,window.$)(".TopicIndex-sectionWrap")[0]))){var c=new jN;c.w(b);a.o().g(c,lN,function(){a.yE=Array.from((0,window.$)(".TopicIndex-section"),function(a){return(0,window.$)(a).offset().top})})}};
var GN=function(a,b){var c=z.jp(function(a){b.toggleClass("TopicIndex-toc--sticky",a)},function(){return 150<z.Qe(window.document).y});c();a.o().g(window,"scroll",c)};
var FN=function(a,b){function c(){var b=z.Qe(window.document).y,c=0;a.yE.some(function(a,d){b>a&&(c=d+1)});return Math.min(c,h.length-1)}var d=window.location.hash,f=b.find("a"),g=0;Array.from(f).some(function(a,b){if((0,window.$)(a).attr("href")===d)return g=b,!0});f.eq(g).addClass("TopicIndex-tocLink--active");var h=Array.from((0,window.$)(".TopicIndex-section"),function(a){return(0,window.$)(a).offset().top});a.yE=h;a.o().g(window,"scroll",function(){var a=c();a!==g&&(f.eq(g).removeClass("TopicIndex-tocLink--active"),
g=a,f.eq(g).addClass("TopicIndex-tocLink--active"))})};var HN=function(a){z.R.call(this,a)};var IN=function(a,b,c){var d,f,g=[];for(d in c)f=c[d],z.na(f)?z.A(f,(0,z.t)(function(a){g.push(BM({type:"hidden",name:d,value:String(a)}))},a)):g.push(BM({type:"hidden",name:d,value:String(f)}));z.Ee(b,qM(g))};var JN=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"day"})})};var KN=function(a){return window.$.get("/node/ExploreHotFavlistsInnerV2",{params:JSON.stringify({offset:a})})};
var LN=function(a){return window.$.get("/node/ExploreAnswerListV2",{params:JSON.stringify({offset:a,type:"month"})})};var MN=function(){z.I.call(this)};var NN=function(){z.R.call(this);var a=z.lh||[0,0];this.Ht=a[0];this.visible=!!a[1];this.Bh="collection"};
var ON=function(a){var b=z.L("zh-list-answer-wrap");if(b){(0,window.$)(b).on("click","a[name\x3dunfavo]",window.$.proxy(a.KR,a));var c=new z.Dl({Pf:!1});a.L(c);c.use("childConstructor",{ni:z.xD}).use("expandLimit");c.w(b);a.o().g(c,"click!",function(a){"comment"===a.namespace&&a.Gc.fill("category",this.Bh).fill("label","collection_answer")})}};
var PN=function(){var a=z.L("zh-favlist-following-wrap");a&&((new QM(a,null,"favlist",null,!0)).init(),(0,window.$)(a).on("click","a.zg-unfollow",function(a){"/collections"===window.location.pathname&&(a=(0,window.$)(a.target).attr("href"),/\/collection\/\d+\/followers/.test(a)?z.yi({category:"collection",action:"visit_collection_followers",label:"collections_my_followed_collections_collection_followers_count"}):z.yi({category:"collection",action:"click_unfollow_collection",label:"collections_my_followed_collections_unfollow_collection"}))}).on("click",
".zm-item-title \x3e a",function(){var a=window.location.pathname;"/collections"===a?z.yi({category:"collection",action:"visit_collection",label:"collections_my_followed_collections_collection"}):"/collections/mine"===a&&z.yi({category:"collection",action:"visit_collection",label:"collections_my_collection"})}))};
var QN=function(a){var b=z.L("zh-list-side-head");if(b){var c=z.N("zu-entry-focus-button",b);c&&a.o().g(c,"click",function(){(0,z.zG)(c,"favlist","",["zg-btn-green","zg-btn-white"])});a.yg=z.L("zh-list-operation-menu");a.yg&&a.o().g(a.yg,"click",a.QB)}(b=z.L("zh-single-answer-author-info"))&&(new RM(b)).init();(b=z.L("zh-list-create-new-list"))&&a.o().g(b,"click",a.aX);(b=z.L("zh-fav-list-side-bar-creator"))&&(new RM(b)).init();(0,window.$)("#zh-fav-list-side-bar-report").on("click",function(){(new z.LB({type:"favlist",
id:a.Ht})).render()})};var RN=function(a){z.X.confirm("删除收藏夹","你确定要删除这个收藏夹吗？",function(a){a&&(a=new z.Hr,a.add("favlist_id",this.Ht),a.add("_xsrf",(new z.dj(window.document)).get("_xsrf")),(new HN).post(iM(a),"/collection/delete"))},a)};
var SN=function(a){a.Ia||(a.Ia=new z.eC(a.Ht,"favlist"),a.L(a.Ia),a.o().g(a.Ia,"click!",function(a){"comment"===a.namespace&&(a.Gc.fill("category",this.Bh).fill("label","collection"),a.Gc.action=a.Gc.action.replace("favlist","collection"))}),z.iC(a.Ia,a.Vt,(0,window.$)(".toggle-comment",a.Vt)[0]))};var TN=function(a){a.IL=new z.Z(!0);a.o().g(a.IL,"complete",function(){window.location.reload()});a.IL.ajax("/collection/update","favlist_id\x3d"+a.Ht+"\x26is_public\x3d1")};
var UN=function(a,b){z.I.call(this);this.qa=a;this.Fb=b;this.data=z.S};var VN=function(a){a.nu&&a.nu.ea(a.data.vb?"撤消匿名身份":"使用匿名身份")};var WN=function(a,b){return a?b?new z.yA(a):new z.Fz(a):new z.Jz};var XN=function(a){a.Hk.innerHTML="";z.Q(a.Hk,!1);a.bp=!1;a.zm.bq("问题重定向");z.up("/question/unredirect",null,"POST","qid\x3d"+a.qa+"\x26rqid\x3d"+a.Qu)};
var YN=function(a,b){z.R.call(this);this.Nx=this.sq=null;this.AJ=b;this.content=a;this.type=b.type;this.Vc=b.Vc;this.title=this.type===ZN?"一句话介绍":"在 "+b.bj+" 话题下的话题经验"};var $N=function(a){a.mj.focus();z.ys(a.mj.get()[0],a.mj.val().length)};var aO=function(a,b){a.sq=b;(0,window.$)(a.h).attr("class","zm-bio-item "+a.sq)};var bO=function(a,b){z.I.call(this);this.rS=b;this.lF=a;this.items=[];this.fI=!1;this.JW=z.km.selected_bio};var cO=function(){dO||(dO=new bO(z.mm,!1));return dO};
var eO=function(a){var b=z.S.fb;a.fI=!0;a.hK=b};var fO=function(a){window.$.get("/question/"+a.hK+"/bios").then(function(b){a.yT=!0;a.lF=b.msg;gO(a)})};var gO=function(a){if(!a.yT&&a.fI)fO(a);else{if(!a.ta){a.ta=new z.V;a.ta.Sa("编辑话题经验");z.Mj(a.ta,null);a.ta.iq(!0);var b=a.ta.T();z.W.add(a.ta.m(),"bio-editor-modal");b.innerHTML='\x3cdiv class\x3d"bio-editor-modal-title"\x3e可以填写你从事的职业、取得的资格或过往的经历，让你在这个问题下的回答更具说服力。\x3c/div\x3e';a.render(b)}a.ta.G(!0)}};
var hO=function(a,b,c){b=new YN(b,c);b.render(a.uS);c.Vc===a.JW&&b.Cc(!0);b.Jb(a);a.items.push(b)};var iO=function(a){var b=a.getSelection();b&&window.$.post("/question/"+a.hK+"/bio",{bio:b.getToken()}).then(function(){a.ma({action:"edit_topic_experience_success",attributes:{topic_experience_topic_id:b.getToken(),topic_experience_topic_content:b.Za()}})})};
var jO=function(a,b){z.R.call(this);this.mb=a;this.As=fM(this.mb);this.isContentEditable=this.mb.isContentEditable();this.DX=30;this.Zd=new z.sd(1E3*this.DX);this.qa=z.S?z.S.qa:0;this.CH=b||!1};var kO=function(a){lO(a,"保存中…");a.Qx();a.vS()};var mO=function(a){a.Zd.stop()};var nO=function(a){a.oC&&((0,window.clearInterval)(a.oC),a.oC=null)};var oO=function(a,b){var c=z.wi(b||(0,z.J)());/^\d/.test(c)&&(c=" "+c);lO(a,"已存于"+c)};
var lO=function(a,b,c){var d=(0,window.$)(a.oH);c?d.addClass("warning"):d.removeClass("warning");z.Q(a.lt,!0);z.nf(a.oH,b)};var pO=function(a){qO(a);var b={qid:a.qa,timestamp:(0,z.J)()};(0,window.setTimeout)(function(){window.$.post("/draft/delete",b)},500)};var qO=function(a){a.dI&&(a.dI.abort(),a.fs());nO(a);z.Q(a.lt,!1);a.dispatchEvent("clearContent")};
var rO=function(a,b){z.R.call(this);this.GW=(0,window.$)(a).children();this.contents=[];this.Xg=0;this.ls=[];this.className=b||"";this.eE=!1;this.delay=0;this.zr=null;z.A(this.GW,function(a){a=(0,window.$)(a).addClass("carousel-inner-content");this.contents.push(a);this.ls.push((0,window.$)("\x3cdiv\x3e\x3c/div\x3e").addClass("carousel-dot"))},this)};
var sO=function(a,b){if(0>b||b>=a.contents.length)return!1;a.zr&&((0,window.clearTimeout)(a.zr),a.zr=null);a.ls[a.Xg].removeClass("carousel-dot-selected");a.contents[a.Xg].hide();a.ls[b].addClass("carousel-dot-selected");a.contents[b].show();a.Xg=b;tO(a);return!0};var tO=function(a){var b=a.Xg;a.eE&&(a.zr=(0,window.setTimeout)(function(){b===a.Xg&&(b===a.contents.length-1?sO(a,0):a.next())},a.delay))};
var uO=function(){function a(){function a(){return new window.Promise(function(a){w.onAnimationEnd(function(){a()},400)})}function b(a){return z.nb(a,function(a,b){return a.then(b)},window.Promise.resolve())}if(!d){d=!0;var c=(0,window.$)("#copyright-demo-region1"),f=(0,window.$)("#copyright-demo-region2"),p=(0,window.$)("#copyright-demo-region3"),r=(0,window.$)("#copyright-demo-region4"),w=(0,window.$)("#copyright-demo-indicator");(0,window.$)(".frame2-region").removeClass("copyright-demo-region-selected");
b([function(){w.show().addClass("indicator-move1");c.addClass("copyright-demo-region1-select-animation");return a()},function(){c.removeClass("copyright-demo-region1-select-animation").addClass("copyright-demo-region-selected");w.removeClass("indicator-move1").addClass("indicator-move2");return a()},function(){f.addClass("copyright-demo-region-selected");w.removeClass("indicator-move2").addClass("indicator-move3");return a()},function(){p.addClass("copyright-demo-region-selected");w.removeClass("indicator-move3").addClass("indicator-move4");
return a()}]).then(function(){r.addClass("copyright-demo-region-selected");w.removeClass("indicator-move4");d=!1})}}function b(){var a=(0,window.$)(".copyright-demo-pointer"),b=(0,window.$)(".copyright-demo-noty");a.css("opacity","0");b.css("opacity","0");a.addClass("copyright-demo-pointer-show-animation");b.addClass("copyright-demo-noty-show-animation");(0,window.setTimeout)(function(){a.removeClass("copyright-demo-pointer-show-animation");b.removeClass("copyright-demo-noty-show-animation");a.css("opacity",
"1");b.css("opacity","1")},1100)}var c=z.ED.sI(z.T[2]).addClass("copyright-demo-noty"),d=!1,f=(0,window.$)((0,window.$)("#copyright-demo-template").html());(0,window.$)("#copyright-demo-frame3",f).append(c);c=new rO(f,"copyright-demo");c.g("rightShow",function(c){1===c.offset?a():2===c.offset&&b()});f=new z.V;c.render(f.T());f.Sa("功能演示");z.Uj(f,462);return{dialog:f,vE:c}};
var vO=function(){var a=(0,window.$)('\x3cdiv id\x3d"copyright-demo-helper" style\x3d"display: none; position: absolute;"\x3e\x3cp class\x3d"copyright-demo-helper-intro"\x3e 勾选后，我们将限制其他用户的复制操作，并给予提醒 \x3c/p\x3e\x3cp class\x3d"copyright-demo-helper-btn"\x3e 查看演示 \x3c/p\x3e\x3c/div\x3e'),b=new z.Sx({I:"data-copyright-demo"});b.lq=250;b.Fo=750;b.Ih(a[0]);b.g("trigger",function(a){b.setPosition(new z.Ax(a.anchor,4))});var c=null;(0,window.$)(".copyright-demo-helper-btn").click(function(){c||(c=uO(),wO());
b.G(!1);sO(c.vE,0);var a=c.vE;a.eE=!0;a.delay=3E3;tO(a);c.dialog.G(!0)})};var wO=function(a){a=void 0===a?xO:a;if("number"===typeof a){xO=a;var b=void 0,c,d;switch(a){case 0:c="勾选后，我们将限制其他用户的复制操作，并给予提醒";d="复制将受限，同时会弹出提醒";b="保留所有权利，禁止转载";break;case 2:c="选择后，我们将在其他用户复制时给予提醒",d="系统会弹出提醒",b="如需转载，请点击文末的申请转载按钮"}(0,window.$)(".copyright-demo-helper-intro").text(c);(0,window.$)(".copyright-demo-effect").text(d);(0,window.$)(".copyright-demo-noty .tooltip-inner").text(b)}};
var yO=function(a,b){z.Vv.call(this,!1);this.vb=!!a;this.SL=b;this.$b="\x26nbsp";this.Kw=z.km||z.T[4];this.Bv=this.Px=this.bG=this.enabled=!0;if(z.T.Ee||!z.T.Lb())this.gA='\x3cspan style\x3d"font-style: normal;color: #999;"\x3e写回答…\x3c/span\x3e'};var zO=function(a,b){b?AO(a,b,"添加话题经验，提升回答可信度"):AO(a,"","填写话题经验，提升回答可信度")};var BO=function(a,b){b?AO(a,b,"修改话题经验"):AO(a,"","填写话题经验，提升回答可信度")};
var AO=function(a,b,c){b=void 0===b?"":b;c=void 0===c?"修改":c;a.rt&&(b&&(b=z.Ma("，"+JM(b.trim()))),a.nE.innerHTML=b+'\x3ca name\x3d"edit_bio" class\x3d"zu-edit-button" href\x3d"#"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e'+c+"\x3c/a\x3e")};
var CO=function(a){if(z.S.gd&&!window.localStorage.getItem("no_more_org_question_rule"))(0,window.$)(a.m()).one("focus",".zm-editable-editor-field-element",function(){z.X({title:"机构提问规则",content:'\n          \x3cdiv class\x3d"zh-question-answer-form-orgRule"\x3e\n            \x3cp\x3e这是一个「机构提问」，请在回答前了解以下规则：\x3c/p\x3e\n            \x3col\x3e\n              \x3cli\x3e提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。\x3c/li\x3e\n              \x3cli\x3e「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。\x3c/li\x3e\n              \x3cli\x3e提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。\x3c/li\x3e\n            \x3c/ol\x3e\n            \x3ca class\x3d"knowMore" href\x3d"/org-intro#org-question" target\x3d"_blank"\x3e了解更多\x3c/a\x3e\n          \x3c/div\x3e',modal:!0,
ha:!0,buttons:{yes:"知道了",cancel:"不再显示"}},function(a){a||window.localStorage.setItem("no_more_org_question_rule",!0)})})};var DO=function(a,b,c){b=(0,window.$)(b);(0,window.$)(a.hc).hide();c=(0,window.$)(c);(0,window.$)(a.Fj).append(b).after(c);(z.Vj||a.Qd)&&b.addClass("activate-mask-tip-answer-simple");a=z.Lq(z.q,!0,"#draft");b.on("click",a);c.on("click",a)};
var EO=function(a){a.Xk?a.Xk.show():(a.Xk=(0,window.$)('\x3cdiv class\x3d"question-tip-box-bottom"\x3e确定想要回答你自己提出的问题吗？\x3cbr\x3e如果需要对问题做出更多的解释和说明，请编辑问题描述。 如果需要对其他回答做出回应，请在相应回答下通过评论发布。\x3cbr\x3e\x3cdiv class\x3d"zg-clear"\x3e\x3ca href\x3d"javascript:" class\x3d"zg-right zg-btn zg-btn-blue" name\x3d"confirm"\x3e确定\x3c/a\x3e\x3ca href\x3d"javascript:" class\x3d"zg-right zg-link-gray " name\x3d"cancel"\x3e取消\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'),a.Xk.on("click",'[name\x3d"cancel"]',function(){a.Xk.hide()}).on("click",
'[name\x3d"confirm"]',function(){a.Xk.hide();(0,window.$)(a.fc).hide();a.ab(!0);a.Gg()}),(0,window.$)(a.fc).after(a.Xk))};var FO=function(a){a=a.lx;switch(a.tagName){case "INPUT":return Number(!a.checked);case "SELECT":return Number(a.value)}};var GO=function(a){var b=(0,window.$)("input[name\x3danno-checkbox]",a.hc)[0],c=(0,window.$)("label",a.hc)[0];a.vn=b;z.S.vb&&(a.vn.checked=!0);z.Bo(c,!0)};
var HO=function(a){a=a.lx=(0,window.$)("[name\x3dcopyright]",a.hc)[0];switch(a.tagName){case "INPUT":a.checked=!1;break;case "SELECT":a.value="1"}};var IO=function(a){var b=(0,window.$)(".demo-trigger",a.hc);if(b.length)if("INPUT"===a.lx.tagName)b.removeAttr("hidden");else(0,window.$)(a.lx).on("change",function(a){a=Number(a.target.value);1===a?b.attr("hidden",""):(b.removeAttr("hidden"),wO(a))})};
var JO=function(a){var b=cO();a.Lw||(eO(b),a.o().g(b,"change",a.AA).g(b,"trackRequested",function(a){a.label="add_answer_box_edit_topic_experience";z.yi(a)}));a.Lw=!0;gO(b)};var KO=function(a,b){z.R.call(this);this.LV=a;this.YD=b};var LO=function(a,b,c,d,f){z.Vv.call(this,d,b,c);this.qa=a;this.JH=this.Wp=!1;this.fV=f};var MO=function(a,b){a.JH=b};
var NO=function(){var a=z.O("select",{style:"1px solid #999 "}),b=z.O("option",{value:"none"},"请选择一个修改理由...");a.appendChild(b);z.A(OO,function(b,d){var f=z.O("option",{value:b.value},d+1+". "+b.label);a.appendChild(f)});return a};var PO=function(a,b,c){a.CI.innerHTML=b;z.W.set(a.CI,c||"zg-error-text")};var QO=function(){z.R.call(this)};var RO=function(){z.V.call(this);this.Ye(!0);this.G(!0)};
var SO=function(a,b){a.Sa("提问无人问津？");a.ea(b);a.ha();(0,window.$)(".js-gonext",a.h).on("click",function(){var b=(0,window.$)(this).parents('[class^\x3d"view"]').attr("class");"view-starting"===b?(a.Sa("第一条"),TO(a,"firsttip")):"view-firsttip"===b?(a.Sa("第二条"),TO(a,"secondtip")):"view-secondtip"===b?(a.Sa("第三条"),TO(a,"thirdtip")):"view-thirdtip"===b&&a.G(!1)})};var UO=function(a,b){a.Sa("邀请回答小窍门");a.ea(b);a.ha();(0,window.$)(".js-close",a.h).on("click",function(){a.G(!1)})};
var TO=function(a,b){(0,window.$)('[class^\x3d"view"]',a.h).hide();(0,window.$)(".view-"+b,a.h).show()};var VO=function(a,b){z.R.call(this);this.KV=a;this.Lp=b;this.ba=null;this.tb=!1;this.mm=null;this.hk=[];this.Bc=!1;this.kT="loading";this.xH="zg-btn-white"};
var WO=function(a){var b=a.kT;a.R.addClass(b).html(XO);window.$.get("/node/QuestionInvitePanelV2",{params:{question_id:a.KV}}).done(function(c){a.Bc=!0;a.R.removeClass(b);c=(0,window.$)(c);a.R.replaceWith(c);a.h=c[0];c.toggle(a.fd());a.R=c;YO(a)})};
var YO=function(a){var b=a.m();a.o().g(z.Ep,"anon_change",a.RT);(0,window.$)(".cancel-anon",b).click(window.$.proxy(a.yQ,a));if(!(0,window.$)(".error-message",b).length){var c=z.N("search-input",b),d=z.N("invite-title",b);a.pz(c,d);a.$v=(0,window.$)(".suggest-persons",b);a.$v.on("click","button",window.$.proxy(a.HG,a));(0,window.$)(".js-more",b).one("click",function(){(0,window.$)(".person",this.$v).show();(0,window.$)(this).remove()});a.Yq=(0,window.$)(".invite-status",b);a.Yq.on("click","button",
window.$.proxy(a.zQ,a)).on("mouseenter mouseleave",".invited-shortlist",function(a){(0,window.$)(".invited-hovercard",this).toggleClass("in","mouseenter"===a.type)});ZO(a)}};var $O=function(a,b){var c=z.S;a.dispatchEvent(new z.FB("click!invitation",{category:"invitation",action:"ask_to_answer",label:b,value:c.GH?null:c.Ie}))};var aP=function(a,b){return!!z.pb(a.hk,function(a){return a.id===b})};
var bP=function(a,b,c){var d=(0,window.$)(".invite-button",a.$v).filter(function(){return this.getAttribute("data-uid")===b}).get(0);d&&cP(a,d,c)};var cP=function(a,b,c){a=a.xH;c?(z.W.add(b,a),z.nf(b,"收回邀请")):(z.W.remove(b,a),z.nf(b,"邀请回答"))};var ZO=function(a){a.hk=window.$.map((0,window.$)(".invited-fulllist",a.Yq).children(),a.KJ)};var dP=function(a,b){a.hk&&IM(a.hk,function(a){return a.id===b})&&eP(a)};
var eP=function(a){var b=a.hk,c={each:z.A,fullList:function(){return(0,z.ew)(fP,{persons:b,helper:c})}};b.length?a.Yq.html((0,z.ew)(gP,{persons:b,helper:c,maxInvites:15})):a.Yq.html("你可以通过邀请其他用户来更快获得回答")};var hP=function(a){z.R.call(this);this.data=a;this.Ia=null};var iP=function(a){var b=z.N("panel-container",a.h);b&&(a.sm=new QO,a.L(a.sm),a.sm.w(b),a.Ia=new z.eC(a.data.qa,"question"),a.sm.L(a.Ia),z.iC(a.Ia,a.sm.m(),(0,window.$)(".toggle-comment",a.h)[0]),a.Oo(),a.fk(),jP(a))};
var jP=function(a){if("normal"===z.S.status){var b=new VO(a.data.qa,a.data.fb);b.render(a.sm.m());var c=(0,window.$)('a[name\x3d"invite"]',a.m());a.o().g(b,["expand","collapse"],function(a){c.text("expand"===a.type?"收起邀请":"邀请回答")});a.sm.L(b);z.S.dX&&(b.Rc(!0),a.dispatchEvent(new z.FB("show!invitation",{category:"invitation",action:"ask_to_answer_card",label:""})));a.Hz=b}};
var kP=function(a,b){var c=a.xN;c||(c=new z.$z,c.w(z.L("zh-question-admin-menu")),z.ch(c,function(a){a.Da(a.m().getAttribute("data-action"))}),a.o().g(c,"action",function(a){a=this.CD=a.target;(new z.IB).open(a.m(),{id:this.data.qa,type:"question"},(0,z.t)(this.QO,this))}),a.xN=c);c.X()?c.G(!1):z.aA(c,new z.wz(b,1,!0),0,new z.qg(5,0,5,0))};
var lP=function(a){z.X.confirm("删除问题","你确定要删除这个问题吗？相关的评论也将被删除。",function(a){if(a){var c=new z.Z(!0);z.G(c,"complete",function(){var a=z.Tn(c);a&&!a.r?window.location.href="/":z.X.message(a.msg)});c.ajax("/question/delete/"+this.data.qa)}},a)};var mP=function(a){z.X.confirm("锁定问题","锁定后该问题将无法添加新的回答，你确认要锁定吗？",function(b){b&&window.$.post("/question/"+a.data.fb+"/org_lock").then(function(a){a.r?z.X.message(a.msg):(z.X.message("操作成功！"),window.location.reload())})})};
var nP=function(a){z.X.confirm("解除锁定问题","你确认要解除锁定吗？",function(b){b&&window.$.post("/question/"+a.data.fb+"/org_unlock").then(function(a){a.r?z.X.message(a.msg):(z.X.message("操作成功！"),window.location.reload())})})};var oP=function(a,b,c){z.Vv.call(this,a,b,c)};var pP=function(a){z.xD.call(this);z.Lb(this.options={},qP,a||{});this.qa=this.options.qa;this.bb=this.options.bb;this.xx=this.options.xx;this.tb=!0};
var rP=function(a){var b=z.N("zm-item-answer",a.h)||a.h;a.bb=b.getAttribute("data-aid");a.Ah="1"===b.getAttribute("data-isowner");a.fb=b.getAttribute("data-atoken");a.Wo="1"===b.getAttribute("data-deleted");a.px=Number(b.getAttribute("data-created"));b.getAttribute("data-helpful");a.NS="1"===b.getAttribute("data-good");b.getAttribute("data-copyable");a.Gi="1"===b.getAttribute("data-collapsed");a.vb=null};
var sP=function(a){if(!a.He&&a.Ah&&z.S&&a.bb){a.He=new oP(!1,"/answer/content","content");z.zc(a,a.He);a.He.Bv=!0;a.He.Px=!0;a.He.qG=yO.prototype.qG;var b=z.N("zm-item-rich-text",a.h);gM(a.He,["id\x3d"+a.qa]);a.He.w(b);a.o().g(a.He,"shouldUpdateContent",function(a){if(z.ma(a.data))return!1});a.o().g(a.h,"click",function(a){"suggest_edit"===a.target.name&&(this.He.Gg(),(0,window.$)(".zh-question-censor-tip",this.h).hide());return!0})}};
var tP=function(a){window.$.post("/answer/unremove",{aid:a.bb}).then(function(){a.Wo=!1;z.Q(a.h,!0);a.jw="cancel_delete";a.dispatchEvent("change");sP(a)})};var uP=function(){z.R.call(this);this.data=z.S||{};this.qa=this.data.qa;this.bp=!1;this.bi={};this.Cw=[];this.sr=[];this.Ki=0;this.vk=z.lm&&z.lm.url_token?z.lm:null;this.Nx=(0,window.$)("#zh-question-title").data("editable")};
var vP=function(a){z.T.Ch&&window.$.post("/question/popup",{action:"no_answer",question_token:a.data.fb},function(a){a&&SO(new RO,a)})};
var wP=function(a){(0,window.$)(".js-ignore-invite").click(function(){(0,window.$)(".question-invited-by").hide();window.$.post("/question/askpeople",{qid:a.data.fb,uid:z.T.ug,op:"pass"})});(0,window.$)(".js-invite-others").click(window.$.proxy(function(){var a=(0,window.$)('#zh-question-meta-wrap a[name\x3d"invite"]')[0];a&&(z.Pr(a,{OC:function(){return!1},Aw:!0}),this.Cu.Hz.Rc(!0))},a))};
var xP=function(a){"close"===z.S.status||z.S.Xo||(a.Ka=new z.zt(a.data.bn,a.data.qa),a.Ka.kp=5,a.Ka.Wt=1,a.Ka.ID=!0,a.Ka.au=!0,a.Ka.w(z.N("zm-tag-editor",a.h)),a.o().g(a.Ka,["remove_tag","add_tag"],function(){z.Y.yb("ga_edit_question_topic_changed")}),a.o().g(a.Ka,"start_editing",function(){z.Y.yb("ga_question_topic_edit_finish_changed")}),a.Ka.addEventListener("beforeedit",z.cE({Np:!0})))};
var yP=function(a){var b=z.L("zh-question-title");z.S.Xo?b.children[0].appendChild(z.Xe('\x3ca class\x3d"Button Button--text QuestionPage-titleButton" href\x3d"/question/24501563" target\x3d"_blank" data-tooltip\x3d"s$t$该问题已被锁定公共编辑"\x3e\x3cspan class\x3d"sprite-global-icon-lock"\x3e\x3c/span\x3e\x3c/a\x3e')):(a.nd=new LO(a.data.qa,"/question/title","content",!1,!0),a.nd.qF=!0,a.nd.Qd=!0,a.nd.Wp=!0,MO(a.nd,AM(a.data.Ch)),a.nd.w(b),a.o().g(a.nd,"change",function(){z.Ep.dispatchEvent("question_title_change");
window.document.title=this.nd.Za()+" - 知乎"}),a.o().g(a.nd,"click_edit",function(){z.Y.yb("ga_question_title_edit_start")}),a.o().g(a.nd,"cancel_edit",function(){z.Y.yb("ga_question_title_edit_cancel")}),a.o().g(a.nd,"save_changed",function(){z.Y.yb("ga_question_title_edit_save_changed")}),a.o().g(a.nd,"save_unchanged",function(){z.Y.yb("ga_question_title_edit_save_unchanged")}),a.nd.addEventListener("beforeedit",z.cE({Np:!0})))};
var zP=function(a,b){var c=z.L("zh-question-detail");if(c){var d=new z.jD({QE:"zm-editable-content"});a.o().g(d,"expand",b).g(d,"invalid",b);d.w(c)}};var AP=function(a){a.KE&&(a.data.Nr=+a.KE.innerHTML,z.T.Lb()||(a.data.Nr=0),z.Q(a.ki,0<a.data.Nr),a.tr&&z.nf(a.tr,a.data.Ie?a.data.Ie+" 个回答":"还没有回答"),a.Wm&&z.Q(a.Wm,1<a.data.Ie),z.Q(a.ki,0<a.data.Nr))};
var BP=function(a){var b=z.L("zh-question-answer-wrap");if(b){var c=!Boolean((0,window.$)(".question-page-pager").length),d=void 0;if(c){var f={},d=new z.Dl({use:[],Pf:a.data.Ie>a.data.mV});d.use("nodeSource",{filter:function(a){var b=/data-atoken=\"(.*?)\"/;return a.filter(function(a){a=b.exec(a)[1];return f[a]?!1:f[a]=!0})}});(0,window.$)(".zm-item-answer").each(function(a,b){f[(0,window.$)(b).attr("data-atoken")]=!0})}else d=new z.Dl({use:[],Pf:!1});a.L(d);a.o().g(d,"itemcreated",function(a){d.L(CP(this,
a.item))});d.w(b);c&&(b=d.th(),d.use("expandLimit"),"#draft"===window.location.hash&&b.done(function(){DP(a,a.mb.m());a.mb.vg.focus();var b=window.getSelection(),c=window.document.createRange();c.selectNodeContents(a.mb.vg);c.collapse(!1);b.removeAllRanges();b.addRange(c)}))}};
var CP=function(a,b,c){var d=new pP({qa:a.qa});d.Jb(a);d.w(b);a.bi[d.bb]=d;a.sr.push(d.bb);a.o().g(d,"change",a.zA);d.Ah&&(a.Ki=d.bb,d.bO=z.T,a.o().g(d.He,"change",a.oR),a.$h=d);d.Gi?d.Ah&&a.Mn.appendChild(d.m()):a.Cw.push({added_time:d.px,vote:c,aid:d.bb});d.Wo&&z.Q(d.m(),!1);return d};
var EP=function(a){var b=null,c=null,d,f={suggest:"建议修改",evaluate:"建议修改",close:"关闭"};z.hm.ee||"normal"===z.S.status||(c="被"+f[z.S.status]+'的问题不允许添加新的回答。\x3ca data-tooltip\x3d"s$b$为什么部分问题会被「关闭」「建议修改」？" href\x3d"//www.zhihu.com/question/21290061"\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark"\x3e\x3c/i\x3e\x3c/a\x3e');a.Ki?(d=a.bi[a.Ki],b="#answer-"+d.bb,d=d.Wo):a.vk&&(b="/question/"+z.S.fb+"/answer/"+a.vk.url_token,d=a.vk.is_delete);b&&(c=d?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':
'一个问题你只能回答一次，但你可以对 \x3ca href\x3d"'+b+'"\x3e现有的回答\x3c/a\x3e 进行修改');!z.T.Ch||a.Ki||a.vk||(c='添加回答：\x3ca href\x3d"javascript:;" name\x3d"answer_my_question"\x3e回答自己的提问\x3c/a\x3e');a.data.Mz&&(c='该问题目前已经被锁定，无法添加新答案。\x3ca href\x3d"/question/19604313" target\x3d"_blank"\x3e问题为什么会被锁定？\x3c/a\x3e');c&&a.mb.ab(!1,c)};
var FP=function(a){a.tr=z.L("zh-question-answer-num");a.ur=z.L("zh-question-answer-wrap");a.ki=z.L("zh-question-collapsed-link");a.Mn=z.L("zh-question-collapsed-wrap");a.KE=z.L("zh-question-collapsed-num");a.WD=z.L("zh-question-answer-form-wrap");a.Rk=z.L("zh-question-notification-summary");a.Wm=z.L("zh-answers-filter");a.Du=z.L("zh-add-question-sug");a.tr&&(a.data.Ie=+a.tr.getAttribute("data-num"));a.ur&&(a.data.mV=+a.ur.getAttribute("data-pagesize"));a.ki&&a.o().g(a.ki,"click",a.rX);a.Du&&a.o().g(a.Du,
"click",a.EG);a.Wm&&z.Wm&&a.o().g(a.Wm,"click",function(a){a.stopPropagation();z.W.add(this.Wm,"activated");this.o().Aa(window.document,"click",function(){z.W.remove(this.Wm,"activated")})})};var GP=function(a,b){var c=z.L("zh-question-collapsed-switcher");b?(c.name="collap",a.JE=!0,z.Q(a.Mn,!0),z.W.add(a.ki,"zu-question-collap-title-active")):(a.JE=!1,c.name="expand",z.Q(a.Mn,!1),z.W.remove(a.ki,"zu-question-collap-title-active"))};
var HP=function(a){a.LO=!0;var b=a.Mn,c=window.$.get("/node/QuestionCollapsedAnswerListV2",{params:{question_id:a.data.qa}});c.done(function(c){c=z.Xe(c);GP(a,!0);z.W.remove(b,"zm-question-collapsed-list-loading");b.appendChild(c);z.A(z.ff(b),function(b){b!==d&&CP(a,b,99999)})});var d=z.ff(b)[0];d&&(z.Q(d,!1),c.done(function(){z.Q(d,!0)}));z.Q(b,!0);z.W.add(b,"zm-question-collapsed-list-loading")};
var IP=function(a){if(a.WD){a.mb=new yO(a.data.vb,z.T);a.L(a.mb);a.mb.w(a.WD);z.hm.ee&&z.hm.ee.length?a.mb.ea(z.hm.ee[0]):!z.tm.Ab&&z.C&&a.mb.ea("\x3cp\x3e\x3c/p\x3e");if(!(a.data.Mz||a.Ki||a.vk&&a.vk.url_token))if(a.data.xn&&a.data.xn.length&&a.data.xn[3]!==z.T.ug)a.mb.ab(!1,"只有 "+xM(a.data.xn)+" 能回答此问题");else if("normal"===z.S.status||z.hm.ee)z.T.Ch||a.mb.Gg();a.o().g(a.mb,"change",a.PT);a.o().g(a.mb,JP,a.YT);a.mb.ready(function(){var a=this.vy();a&&"writing"===window.location.hash.slice(1)&&a.execCommand("toggleFullScreen")})}};
var KP=function(a,b){if(b=b||window.location.hash.slice(1)){var c=b.split("-"),d=c[1];"answer"===c[0]&&((c=a.hG(d))&&(c.Gi&&!a.JE?DP(a,a.ki):DP(a,c.m())),a.cK=d)}};var DP=function(a,b){if(b){var c=z.Qg(window.document.body).top,d=a.VR?z.Ig(a.Rk).height:0,c={paddingTop:c+d};"number"===window.$.type(c)&&(c={offsetTop:c});c.OC=rM;z.Pr(b,c);z.zr(b);a.Nj&&a.Nj.Kq()}};var LP=function(){uP.call(this);this.data=z.S;this.qa=this.data.qa};
var MP=function(a){var b=(0,window.$)(".awesome-answer-list").get(0);if(b){var c=new z.Dl({use:["expandLimit"],Pf:!1});a.L(c);a.o().g(c,"itemcreated",function(a){var b=new z.xD;b.w(a.item);c.L(b)});c.w(b)}};var NP=function(){var a=(0,window.$)("#react-answer-warrants");a.length&&z.ex("AnswerWarrant").then(function(b){return b.renderList(a)})};
var OP=function(a){var b=z.N("zm-item-answer",z.L("zh-question-answer-wrap"));if(b){a.Fb=new pP({qa:a.qa,sF:!0});a.L(a.Fb);a.Fb.w(b);b=a.o();b.g(a.Fb,"change",a.zA);if(a.Fb.Ah){b.g(z.Ep,"anon_change",function(a){PP(this,a.vb)});var c=a.Fb.He;c&&b.g(c,"change",function(){var a=(0,z.$a)(c.Za()[0]),a=z.Xe(a);z.Ro(a,this.Fb.h);this.Fb.H();OP(this)})}QP(a);a.Fb.tv();a.Fb.Ia.gE=!1;a.Fb.Ij=!1;a.Fb.Rt()}};
var PP=function(a,b){var c=(0,window.$)("#js-sidebar-author-info");if(!(0,window.$)("a[name\x3dfocus]",c).length){var d={0:"fullname",1:"url_token",2:"avatar_path",3:"hash",4:"headline"},f=z.nb(z.T,function(a,b,c){a[d[c]]=b;return a},{}),f=(0,z.ew)(a.cO,{author:!b&&f});c.html(f)}};var RP=function(){var a=(0,window.$)("#zh-question-answer-collestions");a.length&&(0,window.$)("a[name\x3dfocus]",a).click(function(){(0,z.zG)(this,"favlist")})};
var QP=function(a){a.Fb?a.Fb.Wo?(a.gs.innerHTML=a.Fb.Ah?'你已经删除了对该问题的回答，如果需要修改，请先 \x3ca href\x3d"javascript:;" name\x3d"cancel_delete"\x3e撤消删除\x3c/a\x3e':"此答案已经被作者删除",z.Q(a.Fb.m(),!1)):z.Q(a.Fb.m(),!0):a.gs.innerHTML="此答案已经被作者删除"};var SP=function(a,b){this.lp=this.lf=1;this.Bm=b||4;this.items=a||[];this.BE=[];this.lp=Math.ceil(this.items.length/this.Bm)};var TP=function(a,b,c){b=(b-1)*a.Bm;return a.items.slice(b,b+c)};var UP=function(a){return TP(a,a.lf,a.Bm)};
var VP=function(a,b){var c=TP(a,a.lf+1,1)[0];if(a.Do()&&c){var d=a.remove(b);a.remove(c);a.items.splice(d,0,c);return c}};var WP=function(a){z.R.apply(this,arguments)};var XP=function(a){var b=window.$.makeArray((0,window.$)("\x3cdiv\x3e").html(a.tM.html()).children().add(a.gb.children()));a.SA=new SP(b,YP);a.Zq.on("click",function(){ZP(a,a.gb.find("."+a.ly).length)})};
var $P=function(a){a.gb.on("click","[data-follow]",function(b){var c=(0,window.$)(b.target),d={id:c.data("id"),name:c.closest(".topic-item").find("h3 a").text(),o_:c.data("token")};c.hasClass(a.ly)?(b=(0,window.$)(b.target).closest(".topic-item"),a.SA.remove(b[0]),1===a.gb.find("."+a.ly).length&&(a.Zq.hasClass("disabled")?a.rb.fadeOut():(0,window.setTimeout)(function(){ZP(a,0)})),a.dispatchEvent({type:aQ,data:d})):c.hasClass(a.WX)&&a.dispatchEvent({type:bQ,data:d})})};
var ZP=function(a,b){a.Zq.hasClass("disabled")||(a.SA.random(b)||(a.Zq.addClass("disabled"),a.rb.find(".hidden-topics-plaza").show()),a.gb.html(UP(a.SA)))};var cQ=function(a){z.R.apply(this,arguments)};
var dQ=function(a){a.o().g(window,"hashchange",a.TG);a.TG({data:!0});a.rb.on("click",".zm-topic-cat-more a",function(){var b=a.Uh.find(eQ).length;window.$.get("/followed_topics",{offset:b,limit:fQ-b},function(b){b.payload.length&&(b=b.payload.map(function(b){return gQ(a,b)}).join(""),a.Uh.append(b));a.Uh.find(".zm-topic-cat-more").remove();+(0,window.$)(".topic-feed-title .follow-topics-count").text()>fQ&&a.Uh.append('\x3cli class\x3d"zm-topic-cat-more js-topic-all"\x3e\x3ca target\x3d"_blank" class\x3d"zg-link-gray" href\x3d"'+
(0,window.$)(".topic-feed-title a").attr("href")+'"\x3e查看全部\x3c/a\x3e\x3c/li\x3e')})})};var hQ=function(a){a.Wq.on("click","a",function(b){(0,window.$)(b.currentTarget).hasClass("current")||(a.Wq.find("a").removeClass(iQ),(0,window.$)(b.currentTarget).addClass(iQ),jQ(a))})};var kQ=function(a,b){var c=a.rb.find(".no-topics"),d=a.rb.find(".topic-feed-title a"),f=d.find("span"),g=+f.text();(g+=b)?(d.show(),c.hide()):(d.hide(),c.show());f.html(g);a.KS&&lQ(a,g)};
var lQ=function(a,b){a.Wv||(a.Wv=(0,window.$)('\x3ca href\x3d"#" class\x3d"new-follow-topics"\x3e新关注 \x3cspan\x3e'+b+"\x3c/span\x3e 个话题，点击查看\x3c/a\x3e"),a.Wv.insertBefore(".topic-recommend").click(function(a){a.preventDefault();window.location.reload()}));a.Wv[b?"show":"hide"]().find("span").html(b)};var mQ=function(a,b){return a.filter(function(a,d){return(0,window.$)(d).text()===b})};
var nQ=function(a){a.tg&&(a.removeChild(a.tg),a.tg.H(),a.tg=null);var b=a.gb,c=new z.Dl({use:["autoload"]});a.L(c);c.use("nodeSource",{offset:function(){return Number(b.find(".feed-item").last().data("score"))||0}});c.use("childConstructor",{factory:z.JD}).use("expandLimit");c.w(b.get(0));a.o().g(c,"next",a.ND);a.tg=c};
var jQ=function(a,b){var c=a.Wq.find(".current").data("feedType"),c={params:{topic_id:b,feed_type:c}},d=a.gb.data("init");window.$.extend(!0,d,c);a.gb.attr("data-init",JSON.stringify(d));a.gb.empty();a.tg.$o()&&nQ(a);a.tg.Wg();a.dA=a.tg.th()};
var oQ=function(a,b,c){a.eA&&"pending"===a.eA.state()&&a.eA.abort();a.eA=window.$.get("/node/TopicAvatarV2",{params:{topic_id:b,avatar_type:"topic"}},function(b){if(b&&b.r)z.X.message("错误");else{var f=c.data("href");a.ln.find(".js-topic-title-avatar").html(b).attr("href",f);a.ln.find(".js-topic-title-name").text(c.text()).attr("href",f);a.ln.show()}})};var gQ=function(a,b){a.rL||(a.rL=(0,z.ew)(pQ));return a.rL(b)};var qQ=function(){z.R.call(this)};var rQ=function(){z.R.call(this);this.EW=z.um.searchKeyword};
var sQ=function(){var a=(0,window.$)("#js-search-question-form");a.length&&a.submit(function(b){b.preventDefault();b=z.Zv.aa();b.show();z.$v(b,(0,window.$)(".title-input",a).val())})};var tQ=function(a){var b=(0,window.encodeURIComponent)(a.EW);(0,window.$)("ul.list[data-paging]").on("click",".item a[href!\x3d#]",function(a){a=a.currentTarget;a.host&&(a=(0,window.$)(a).closest(".item").index()+1,z.hj.set("s-q",b),z.hj.set("s-i",a),z.hj.set("sid",(0,z.UF)()))})};
var uQ=function(a){function b(a,b){var h=(0,window.$)(a);window.$.each(b(),function(a,b){h.on("click",a,function(a){d.apply(null,c(b,a))})})}function c(a,b){return z.mb(a,function(a){return z.qa(a)?a(b):a})}var d=z.Aa(z.U,"search");b(".related-topics",function(){return{"a.avatar-link":["visit_topic","search_result_card_topic_avatar"],"a.name-link":["visit_topic","search_result_card_topic"],"a[href$\x3dquestions]":["visit_topic_questions","search_result_card_topic"],"a[href$\x3dtop-answers]":["visit_topic_topanswers",
"search_result_card_topic"],"a[href$\x3dfollowers]":["visit_topic_followers","search_result_card_topic"],"button.zg-btn-follow":["click_follow_topic","search_result_card_topic"],"button.zg-btn-unfollow":["click_unfollow_topic","search_result_card_topic"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_topic"]}});b(".related-users",function(){return{"a.avatar-link":["visit_people_profile","search_result_card_people_avatar"],"a.name-link":["visit_people_profile","search_result_card_people"],
"a[href$\x3danswers]":["visit_people_answers","search_result_card_people"],"a[href$\x3dfollowers]":["visit_people_followers","search_result_card_people"],"a[href$\x3dposts]":["visit_people_posts","search_result_card_people"],"button.zg-btn-follow":["click_follow_people","search_result_card_people"],"button.zg-btn-unfollow":["click_unfollow_people","search_result_card_people"],'a[href^\x3d"/search?"]':["click_search_result_more","search_result_card_people"]}});b(window.document.body,function(){var a=
z.Aa(z.Ja,"search_result_%s_more_button");return{"ul.list.contents + .zu-button-more":["click_search_result_more",a("all")],"ul.list.users + .zu-button-more":["click_search_result_more",a("user")],"ul.list.topics + .zu-button-more":["click_search_result_more",a("topic")]}});b(".search-tabs",function(){var a=z.Aa(z.Ja,"search_result_tab_%s");return{'a[href^\x3d"/search?type\x3dquestion"]':["click_search_result_tab",a("all")],'a[href^\x3d"/search?type\x3dpeople"]':["click_search_result_tab",a("user")],
'a[href^\x3d"/search?type\x3dtopic"]':["click_search_result_tab",a("topic")]}});b(".secondary-tabs",function(){return{'a:not([href*\x3d"sort\x3dupvote"])':["click_search_result_relatrank"],'a[href*\x3d"sort\x3dupvote"]':["click_search_result_agreerank"]}});b(".range-selector",function(){var a=z.Aa(z.Ja,"search_result_range_%s");return{'a[href*\x3d"range\x3d1d"]':["click_search_result_range",a("1d")],'a[href*\x3d"range\x3d1w"]':["click_search_result_range",a("1w")],'a[href*\x3d"range\x3d3m"]':["click_search_result_range",
a("3m")]}});b("ul.list.contents",function(){function a(){return function(a){return"search_result_all_list_"+((0,window.$)(a.target).closest(".item").index()+1)+""}}return{".js-title-link":["visit_question",a()],".js-expand, .summary":["click_expand",a()],".js-collapse":["click_collapse_answer",a()],"a.zg-follow":["click_follow_question",a()],"a.zg-unfollow":["click_unfollow_question",a()]}});b("ul.list.users",function(){function a(b){return function(a){return"search_result_user_list_"+((0,window.$)(a.target).closest(".item").index()+
1)+(b||"")}}return{"a.avatar-link":["visit_people_profile",a("_avatar")],"a.name-link":["visit_people_profile",a()],"a[href$\x3danswers]":["visit_people_answers",a()],"a[href$\x3dfollowers]":["visit_people_followers",a()],"a[href$\x3dposts]":["visit_people_posts",a()],"button.zg-btn-follow":["click_follow_people",a()],"button.zg-btn-unfollow":["click_unfollow_people",a()]}});b("ul.list.topics",function(){function a(b){return function(a){return"search_result_topic_list_"+((0,window.$)(a.target).closest(".item").index()+
1)+(b||"")}}return{"a.avatar-link":["visit_topic",a("_avatar")],"a.name-link":["visit_topic",a()],"a[href$\x3dquestions]":["visit_topic_questions",a()],"a[href$\x3dfollowers]":["visit_topic_followers",a()],"button.zg-btn-follow":["click_follow_topic",a()],"button.zg-btn-unfollow":["click_unfollow_topic",a()]}});a.o().g(a,"click!",function(a){"comment"===a.namespace&&a.Gc.fill("category","search").fill("label","search_result_answer")})};var vQ=function(){z.I.call(this);this.fz=[];this.oa=[]};
var wQ=function(a){for(var b=[],c=0;3>c;c++){var d=a.oa.shift();d&&b.push(d)}3===b.length?(a.Nt.innerHTML=b.join(""),xQ(a)):yQ(a)};var xQ=function(a){var b=z.So("suggest-item",a.Nt);z.A(b,function(a){this.fz.push(a.id.split("-")[1])},a)};var yQ=function(a){a.Nt.innerHTML='\x3cimg class\x3d"bubble-loading" src\x3d"'+z.tm.bC+'/img/noti-loading.gif"\x3e';window.$.post("/lookup/suggest_member",{ids:a.fz.join(",")}).done((0,z.t)(a.aU,a))};var zQ=function(a){z.R.apply(this,arguments)};
var AQ=function(a){var b={};(0,window.$)("meta",a).each(function(){var a=(0,window.$)(this);b[a.attr("name")]=a.attr("content")});return b};var BQ=function(a){zQ.apply(this,arguments)};
var CQ=function(a){a=(0,window.$)(a.m());var b=(0,window.$)(".js-list",a);(0,window.$)(".js-hidden-list",a);var c=(0,window.$)(".pager",a),d=window.$.makeArray((0,window.$)("\x3cdiv\x3e").html((0,window.$)(".js-hidden-list").html()).children().add(b.children())),f=new SP(d,4);f.Oc(function(a){c.find(".next").toggleClass("disabled",!a.Do);c.find(".prev").toggleClass("disabled",!a.bt)});(0,window.$)(".pager",a).on("click",".next:not(.disabled)",function(){f.next();b.html(UP(f))}).on("click",".prev:not(.disabled)",
function(){f.prev();b.html(UP(f))});a.on("click","[data-follow]",function(a){var b=(0,window.$)(a.target).closest(".item"),c=VP(f,b[0]);c&&b.fadeOut(function(){b.replaceWith(c)})})};var DQ=function(a){(0,window.$)(".js-validate",a.h).click(function(){(new z.sq).G(!0)})};
var EQ=function(a){var b=(0,window.$)(".js-headline-input",a.h),c=(0,window.$)(".js-instruction",a.h);b.on("focus",function(){return c.slideDown(200)});b.on("blur",function(){return c.slideUp(200)});b.is(":focus")&&b.trigger("focus");(0,window.$)(".js-form",a.h).on("submit",function(c){c.preventDefault();var f=b.val();f&&z.vk((0,window.$)(".js-submit-button",a.h),function(){return window.$.post("/people/edit",{data:JSON.stringify({headline:f})},function(b){if(b&&!b.r)z.T.aH=f,(0,window.$)(".avatar-reminder .js-headline").text(f),
a.Li();else{var c=b&&b.msg;z.X.message(c?Array.isArray(c)?c[0][1]:b.msg:"更新失败")}})})()})};
var FQ=function(a){var b=(0,window.$)(".js-choose-image",a.h)[0],c=(0,window.$)(".segment-avatar-wrapper .avatar",a.h),d=new z.nz(z.oz),f=void 0;d.w(b);d.g("beforepost",function(){f=(0,window.$)('\x3cspan class\x3d"spinner"\x3e\x3c/span\x3e').appendTo(c.parent())});d.g("success",function(){window.$.post("/node/ProfileHeaderV2",{method:"save",params:{data:{avatar_path:d.getData().url}}},function(b){f.remove();b&&b.r?z.X.message("更新失败"):(z.T.hE=d.Rd("s"),(0,window.$)(".zu-top .avatar").attr({src:d.Rd("s"),
srcset:d.Rd("xs")+" 2x"}),(0,window.$)(".headline-reminder .js-avatar-wrapper .avatar").attr({src:d.Rd("xs"),srcset:d.Rd("l")+" 2x"}),a.Li())})})};var GQ=function(){z.UC.call(this,"promotion")};
var HQ=function(a){for(var b=a.m(),c=[{value:"close",label:"不感兴趣",xf:a.mc.bind(a)},{value:"agreement",label:"知乎广告介绍",xf:a.ZU}],d=new z.Kz,c=z.ha(c),f=c.next();!f.done;f=c.next())f=f.value,f=new z.Fz(f.label,f),d.Ha(f);b=(0,window.$)(".AdFeed-menuBtn",b)[0];c=new z.Rz("ad",d);c.rk.jf=7;c.Tb=z.Gl;c.w(b);z.zc(c,a);z.yo(d,{module:"AdMenu"},function(){return{card:{card_type:"Content",content:a.qo()}}});a.o().g(d,"action",function(a){a=a.target;a.Y().xf(a)})};
var IQ=function(a){var b=(0,window.$)(".js-share",a.m()).get(0),c=a.Le["promotion-url"];b&&c&&z.fD(b,a.entryType,a.ti,c).Jb(a)};var JQ=function(){z.UC.call(this,"column")};var KQ=function(){z.UC.call(this,"roundtable")};var LQ=function(a){z.R.call(this);this.sD=a};
var MQ=function(a,b){if(a.sD){var c=a.sd=new a.sD,d=z.N("feed-content",b)||z.N("feed-main",b);a.L(c);a.Ij&&(c.Ij=!0);d&&c.w(d);c.Of&&c.mc&&z.xl(c.Of.register("i g",function(){return c.mc()}),{group:"操作",name:"不感兴趣"});a.o().g(c,"Ignore",function(){(0,window.$)(b).slideUp(function(){a.H();(0,window.$)(b).remove()})})}};var NQ=function(a){a=a.getAttribute("data-type");return new LQ({ac:BQ,ad:GQ,p:z.FD,a:z.xD,q:z.HD,r:KQ,c:JQ,l:z.ID}[a]||z.R)};
var OQ=function(a){PQ||(this.ho=a,this.Th=(0,window.$)(this.ho.m()),(0,window.setTimeout)((0,z.t)(this.nc,this)))};var QQ=function(a){(0,window.setTimeout)(function(){window.$.ajax({type:"POST",url:"/zreactor/deliver",data:JSON.stringify(a),contentType:"application/json",processData:!1})},50)};
var RQ=function(a){var b=SQ[a.Th.data("type")];z.In(a.Th[0],function(){TQ(a,"display")},a.ho);a.ho.o().g(a.ho,"expand",function(c){c.target instanceof z.UC&&TQ(a,"expand_"+b)}).g(a.ho,"collapse",function(c){c.target instanceof z.UC&&TQ(a,"collapse_"+b)});a.Th.on("click",".js-noHelp",function(){var b=!!(0,window.$)(this).data("revert");TQ(a,b?"unhelpful":"revert_unhelpful");(0,window.$)(this).data("revert",!b)});window.$.each({".actioncard-body .more":"view_all",".actioncard-body .next:not(.disabled)":"next_page",
".actioncard-body .prev:not(.disabled)":"prev_page",".actioncard-body .items a":"open_topic",".js-validate, .js-headline-input, .js-choose-image":"open_form",'.zg-follow[data-follow^\x3d"t:"], .zg-btn-follow[data-follow^\x3d"t:"]':"follow_topic",'.zg-unfollow[data-follow^\x3d"t:"], .zg-btn-unfollow[data-follow^\x3d"t:"]':"unfollow_topic",'a.zg-follow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"follow_"+UQ[b],'a.zg-unfollow:not([data-follow^\x3d"t:"]):not([data-follow^\x3d"m:"])':"unfollow_"+
UQ[b],"a.js-toggleCommentBox":"expand_comments",'a[name\x3d"addnew"]':"comment",".feed-content h2 a":"open_"+VQ[b],"a.ignore:not(.close)":"uninterest","a.revert":"revert_uninterest","a.ignore.close":"confirm_uninterest","button.up.pressed":"vote_up_"+b,"button.down.pressed":"vote_down_"+b,"button.up:not(.pressed)":"revert_vote_up_"+b,"button.down:not(.pressed)":"revert_vote_down_"+b,".js-collect":"collect_answer",".js-thank":"thanks",".js-share":"share",".js-report":"report",".js-write-answer":"open_write_answer",
"a.answer-date-link":"open_answer"},function(b,d){a.Th.on("click",b,function(){TQ(a,d)})})};var TQ=function(a,b){var c=window.$.extend({},WQ(a),{action_type:b,time:(0,z.J)()});c.object_id&&("display"===b?a.yV(c):QQ(c))};
var WQ=function(a){var b=a.eD,c=window.$.extend({},b.data("meta"),{create:a.Th.find(".source .time").data("timestamp"),offset:(0,window.$)(".feed-item").index(a.Th)+1});return{mid:z.um.ga_vars.user_hash,object_type:SQ[a.Th.data("type")],object_id:b.data("id"),object_meta:c,context:XQ,others:""}};var YQ=function(a,b,c){z.LD.call(this,a,b,c);this.nI=!0};var ZQ=function(){z.R.call(this);this.Ve=[];this.xh=0;this.QH=!!(0,window.$)("#is-topstory").length;this.SF="feed-item-hook"};
var $Q=function(a){var b=a.m(),c=a.dP="/node/"+a.Ga.data("init").nodename,d=a.up=new YQ(b,c,!0);z.yo(b,{module:a.QH?"TopStoryFeedList":"HomeFeedList"},function(){return{list:{list_size:d.lb().length,new_item_size:a.xh||0}}});a.o().g(d,"itemcreated",function(a){this.Ve.push(a.data.WS)}).g(d,"ignore",function(a){aR(this,a.key,a.value)});d.Yi(a.SF);d.Jb(a);d.init();if(a.Ga.data("delayed"))z.Ep.on("guider2:topicselected",a.QU.bind(a))};var bR=function(a){a.Ga.on("click",".js-more-similar",function(){(0,window.$)(this).parent().slideUp("fast").nextUntil(":not(.hidden)").slideDown("fast")})};
var aR=function(a,b,c){a.Ve.forEach(function(a){a.Le[b]===c&&(0,window.$)(a.h).fadeOut(150)})};var cR=function(a){a.Ga.on("click contextmenu","a",function(a){var c=a.currentTarget.href,d=c.includes("topic/"),c=c.includes("people/");if(d||c)if("click"!==a.type||a.ctrlKey||a.metaKey)c="",c="contextmenu"===a.type?"contextmenu":a.ctrlKey?"ctrl_click":"meta_click",z.yi({category:"open_link_in_new_tab",action:c,label:d?"topic":"people"})})};var dR=function(){this.interval=3E4};
var eR=function(a){a.Zd||(a.Zd=(0,window.setInterval)((0,z.t)(function(){fR()},a),a.interval))};var fR=function(){(0,window.$)(".feed-item-hook .time").each(function(){(0,window.$)(this).text(z.wi((0,window.$)(this).data("timestamp")))})};var gR=function(){z.R.call(this)};
var hR=function(){var a=(0,window.$)("#js-global-notify");if(a.length){var b=new z.pv;b.w(a[0]);hM(b);(0,window.$)(".zu-global-notify-close",a).click(function(){var c=(0,window.$)(this).data("id");window.$.post("/notice/read",{nid:c});b.H();a.remove()})}};
var iR=function(){(0,window.$)(".js-HomeEntry-ask").click(function(){z.U("question_answer","click_add_question","Feed_above");z.Lq(function(){z.Zv.aa().show()},!0,"#ask")()});(0,window.$)(".js-HomeEntry-post").click(function(){z.U("feed","click_write_post","Feed_above")})};var jR=function(){z.R.call(this)};var kR=function(){z.R.call(this);this.Bh="explore";this.PP="explore_feed"};
var lR=function(a){var b=(0,window.$)("#js-explore-tab");if(b.length){var c=(0,window.$)(".tab-panel",b),d=(0,window.$)(".tab-nav",b),b=function(){var b={"daily-hot":0,"monthly-hot":1}[window.location.hash.slice(1)]||0;d.removeClass("active").eq(b).addClass("active");b=c.hide().eq(b).show().children("[data-type]");if(!b.data("inited")){b.data("inited",!0);var g={daily:JN,monthly:LN}[b.data("type")],g=new mR(g);g.use("expandLimit");a.L(g);g.w(b[0])}};a.o().g(window,"hashchange",b);b()}};
var nR=function(a){var b=(0,window.$)("#zh-recommend-list-full\x3e.zh-general-list")[0];if(b){var c=new z.Dl;c.use("nodeSource");c.use("childConstructor",{factory:z.JD});a.L(c);c.w(b)}};
var oR=function(){function a(a,b,c,d,l){c=(0,window.$)(c.target).closest(d,c.delegateTarget).index();z.Bi(a,b,l,c+1)}var b=z.Aa(a,"view_answer","visit_answer"),c=z.Aa(a,"view_topic","visit_topic"),d=z.Aa(a,"view_roundtable","visit_roundtable");(0,window.$)("#zh-recommend").on("click","a.question_link",function(a){b(a,".feed-item","editor_recommendations_question_title")});(0,window.$)('div[data-type\x3d"daily"]').on("click","a.question_link",function(a){b(a,".feed-item","daily_trending_question_title")});
(0,window.$)('div[data-type\x3d"monthly"]').on("click","a.question_link",function(a){b(a,".feed-item","monthly_trending_question_title")});(0,window.$)("ul.hot-topics").on("click",'a[href*\x3d"topic"]',function(a){c(a,"li","explore_sidebar_trending_topics_name")});(0,window.$)("ul.hot-roundtables").on("click",'a[href*\x3d"roundtable"]',function(a){d(a,"li","explore_sidebar_trending_roundtable")});(0,window.$)("ul.hot-topics").on("click","img.avatar",function(a){c(a,"li","explore_sidebar_trending_topics_avatar")})};
var mR=function(a){z.bl.call(this,{source:pR(a),use:["autoload"]})};var pR=function(a){return function(){return a((0,window.$)(this.lb()).last().data("offset")).then(function(a){return{results:a}})}};var qR=function(a){z.R.apply(this,arguments)};
var rR=function(a){var b=a.gr;return function(){return(0,z.t)(function(a){var d=Array.from(b.children(".zm-tag-editor-edit-item").map(function(a,b){return(0,window.$)(b).find('a[name\x3d"remove"]').data("url-token")}));return a.filter(function(a){return d.every(function(b){return Number(b)!==Number(a[2])&&3<a.length})})},this)}};var sR=function(a,b,c){window.$.post("/node/QuestionExpertTopicsV2",{method:b,params:{url_token:c}}).then(function(){a.dispatchEvent(tR)})};
var uR=function(a){a.gr.on("click",'a[name\x3d"remove"]',function(b){(0,window.$)(b.currentTarget).parent().remove();vR(a);sR(a,"delete_expert_topic",(0,window.$)(b.currentTarget).data("url-token"))})};var vR=function(a){var b=a.gr.children(".zm-tag-editor-edit-item").length;b>=wR?(a.pD.hide(),a.dw.show()):(a.pD.show(),a.dw.hide());0===b?a.qD.show():a.qD.hide()};var xR=function(a){z.R.apply(this,arguments)};
var yR=function(a){var b=(0,window.$)(".QuestionSuggestList .zh-general-list");b.length&&(a.mD=(0,window.$)(".QuestionSuggestListTitle"),a.nD=(0,window.$)(".QuestionSuggestList"),a.er=b,zR(a),AR(a),b.on("click",".question_link",function(){z.U("question_answer","click_visit_question_page","Questions_For_You")}))};
var zR=function(a){var b=(0,window.$)(".QuestionSuggestListTitle .js-feed-switcher");if(b.length)b.on("click","a",function(c){c=(0,window.$)(c.currentTarget);c.hasClass("current")||(b.find("a").removeClass("current"),c.addClass("current"),BR(a,c.data("feed-node")))})};
var BR=function(a,b){var c={params:{offset:0}};b&&(c.nodename=b);var d=a.er.data("init");window.$.extend(!0,d,c);a.er.attr("data-init",JSON.stringify(d));a.er.empty();a.Zm&&(a.removeChild(a.Zm),a.Zm.H(),a.Zm=null);c=a.er;d=new z.Dl({use:["autoload"]});a.L(d);d.use("nodeSource",{});d.w(c.get(0));a.Zm=d;a.Zm.Wg();a.Zm.th()};var AR=function(a){var b=new qR;a.o().g(b,tR,function(){b.gr.children(".zm-tag-editor-edit-item").length?(a.nD.show(),a.mD.show(),BR(a)):(a.nD.hide(),a.mD.hide())});b.w((0,window.$)(".MyTopicWrapper")[0])};
var CR=function(a){(0,window.$)(a.m()).on("click",'a[name\x3d"dislike"]',function(a){var c=(0,window.$)(a.currentTarget).closest(".feed-item");a=c.find('meta[itemprop\x3d"question-url-token"]').attr("content");window.$.post("/api/personalized_questions/ignore",{question_token:a});c.slideUp(function(){c.remove()});z.U("question_answer","click_ignore_question","Questions_For_You")})};var kM={};z.GF.prototype.FB=z.Hn(47,function(a){this.Ln=a});
z.FD.prototype.Ry=z.Hn(46,function(a){a=(0,window.$)(a.currentTarget);var b=a.data();z.X.confirm(a.attr("title"),z.el("确定%s吗？",a.text()),function(a){a&&(window.$.post(z.el("/%s/uninterest",b.type),{id:b.id}),this.dispatchEvent("Ignore"))},this)});z.FD.prototype.$y=z.Hn(45,function(){window.$.post("/post/undo_uninterest",{id:this.sb})});z.xD.prototype.mc=z.Hn(44,function(){window.$.post("/question/uninterest",{qid:this.Le["question-id"]});this.dispatchEvent("Ignore")});
z.FD.prototype.mc=z.Hn(43,function(a){window.$.post("/post/uninterest",{id:this.sb});a||this.dispatchEvent("Ignore")});z.HD.prototype.mc=z.Hn(42,function(){window.$.post("/question/uninterest",{qid:this.Le["question-id"]});this.dispatchEvent("Ignore")});z.ID.prototype.mc=z.Hn(41,function(){window.$.post("/live/uninterest",{lid:this.Le["live-id"]});this.dispatchEvent("Ignore")});z.Rv.prototype.vy=z.Hn(39,function(){return this.Ra});
z.zt.prototype.gl=z.Hn(32,function(a,b,c,d){z.ma(a)?this.Zi(a):this.Zi([a,b,c,d])});z.Zv.prototype.gl=z.Hn(31,function(a,b,c,d){this.Ka.gl(a,b,c,d)});z.Zs.prototype.GK=z.Hn(30,function(a){this.Lx=z.xb(arguments,0)});z.Cd.prototype.Tl=z.Hn(3,function(){return this.rF});jM.prototype.ak=!0;jM.prototype.hh=function(){return this.gC};jM.prototype.toString=function(){return"Const{"+this.gC+"}"};var mM={},pM={};lM.prototype.ak=!0;lM.prototype.hh=function(){return this.Fk};lM.prototype.mz=!0;
lM.prototype.Tl=function(){return 1};var EM=/^[-,."'%_!# a-zA-Z0-9]+$/;oM.prototype.ak=!0;oM.prototype.hh=function(){return this.RJ};oM.prototype.mz=!0;oM.prototype.Tl=function(){return 1};
var GM=/^(?:(?:https?|mailto|ftp):|[^&:/?#]*(?:[/?#]|$))/i,FM={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},HM={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},CM=/^[a-zA-Z0-9-]+$/,DM={EMBED:!0,IFRAME:!0,LINK:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,TEMPLATE:!0};z.y(tM,z.Ht);
tM.prototype.Fe=function(a,b,c){var d=this;this.pc||(this.pc=!0,this.vN(c).then(function(a){d.pc=!1;a&&c&&c.length&&(d.BB=c,d.data.push(c),z.Gt(d),z.Ct(d),d.Ed(),d.Ya.value="",d.dispatchEvent("select"),z.Ft(d))}))};tM.prototype.ym=function(a){var b=this;this.pc||this.mP(a).then(function(a){b.pc=!1;a&&(z.Ct(b),b.Ed(),z.Ft(b))})};
tM.prototype.tn=function(){if(0===this.S.Ma.length&&this.Ya.value&&window.document.activeElement===this.Ya){var a=z.O("div",{className:"zu-autocomplete-empty"},"没有名字为 "+(0,window.$)(this.Ya).val()+" 的话题");(0,window.$)(this.S.N.h).html(a).show()}else 1<this.S.Ma.length&&!this.S.Ma[0][4]&&z.rs(this.S)};z.y(uM,z.zt);z.e=uM.prototype;
z.e.yf=function(a){this.S=new z.yt("/topic/autocomplete",this.Ya,null,null,a,!0);this.S.Eg(!0);this.S.qk=this.ue;this.S.Om(this.Lf());this.o().g(this.S,"select",this.Ef);this.o().g(this.S,"suggestionsupdate",this.tn)};z.e.w=function(a){this.h=a;this.te(!0);this.cc()};z.e.Jl=function(){this.yc||(this.yc=z.N("zm-tag-editor-editor",this.h),this.ie=z.N("zm-tag-editor-command-buttons-wrap",this.h),this.Ya=z.Le("input","",this.h)[0],this.yf(this.ie))};z.e.Ed=function(){};z.e.fe=function(){};z.e.Ef=function(){};
z.e.HA=function(){};z.e.lg=function(){return this.S.lg()};z.y(vM,z.zt);z.e=vM.prototype;z.e.w=function(a){this.h=a;this.Hg=z.N("zm-tag-editor-labels",this.h);this.te(!0);this.fe();this.cc()};
z.e.Jl=function(){this.yc||(this.yc=z.O("div","zm-tag-editor-editor",[this.bo=z.O("div","zg-section zg-clear"),this.ie=z.O("div","zg-section zm-tag-editor-command-buttons-wrap",[this.Ya=z.L("zh-topic-merge-input"),z.O("a",{"class":"zg-mr15 zg-btn-blue",href:"#",name:"add",style:"display:none;"},"添加"),this.WF=z.L("zh-topic-merge-btn")])]),z.cf(this.yc,this.Hg),this.yf(this.ie))};
z.e.yf=function(a){this.S=new z.yt("/topic/autocomplete",this.Ya,null,null,a,!0);this.S.Eg(!0);this.S.qk=this.ue;this.S.Om(this.Lf());this.S.Yx=[this.Se];this.o().g(this.S,"select",this.Ef);this.o().g(this.S,"suggestionsupdate",this.tn)};z.e.Lf=function(){return(0,z.t)(function(a){return z.lb(a,function(a){return z.bo(this.data,function(c){return c[1]!==a[1]&&3<a.length})},this)},this)};z.e.Ef=function(){var a=this.S.lg().slice(1);a&&3<a.length&&(this.hF=a,this.Fe(a[3],a[0]))};
z.e.Fe=function(a,b){var c=this;(0,window.setTimeout)(function(){c.Ya.value=b})};z.e.Ed=function(){};z.n(KM,z.R);
KM.prototype.init=function(){this.Mt=z.L("zh-pm-detail-item-wrap");this.o().g(this.Mt,"click",this.Va);var a=z.L("zh-pm-editor-form");if(a){var b=this.lb()[0],c=void 0,c=b?(0,window.$)(b).data():z.mh?{member:z.mh.id,name:z.mh.fG}:{},b=this.Vu=new z.ux({Iu:!0,kl:"to_admin"===c.type?[!0,{cu:!1}]:!0});b.Nq=!1;b.Ih(a);b.show();z.xx(b,c.member,c.name);c.token&&(a=c.type,b.xq=c.token,b.mC=a);b.focus()}LM(this);this.Oo()};
KM.prototype.Oo=function(){(0,window.$)("#zh-pm-detail-item-wrap").on("click","a[name\x3dreport]",function(a){a=(0,window.$)(a.currentTarget).closest(".zm-pm-item");(new z.LB({type:"message",id:a.data("token"),mv:a.data("talkerToken")})).render()})};KM.prototype.lb=function(){return z.ff(this.Mt)};
KM.prototype.Va=function(a){var b=z.Gr(this.Mt,a.target);if(b&&(a=z.Jo(b,this.Cf))){a=(0,window.$)(a).data();var c=a.token;switch(b.name){case "reply":this.Vu.show();var b=this.Vu,d=a.type;b.xq=c;b.mC=d;z.xx(this.Vu,a.member,a.name,!1);this.Vu.focus();break;case "delete":MM(this,c)}}};z.n(OM,z.R);
OM.prototype.init=function(){var a=z.L("zh-create-pm");a&&this.o().g(a,"click",this.$T);var a=z.L("zh-pm-item-wrap"),b=new z.Dl;b.use("locationSource",{param:function(a){return{start:a[a.length-1].getAttribute("data-token")}}});b.w(a);this.o().g(a,"click",this.Va);(0,window.$)(function(){(0,window.$)("#zh-change-pm-admin").change(function(){var a=(0,window.$)(this).find("option:selected").attr("data-token");window.location.href="self"===a?"/admin_feedback":"/admin_feedback/"+a})});(0,window.$)("#zh-pm-item-wrap").on("click",'a[name\x3d"report"]',
function(a){a=(0,window.$)(a.currentTarget).closest(".zm-pm-item");(new z.LB({type:"message",id:a.data("token"),mv:a.data("talkerToken")})).render()})};OM.prototype.$T=function(){var a=new z.ux({Iu:!0});a.show();z.xx(a,-1);z.Ua(window.location.pathname,"admin_inbox")?a.av("admin"):a.av((0,window.$)("#zh-change-pm-admin option:selected").attr("data-token"))};
OM.prototype.Va=function(a){var b=z.Gr(this.d_,a.target);if(b){a=b.name;b=z.Jo(b,this.Cf);if(!b||!a)return!0;var c=(0,window.$)(b).data(),d=c.member,f=c.name;switch(a){case "reply":a=!0;"to_admin"===c.type&&(a=[!0,{cu:!1}]);z.Lq((0,z.t)(function(){var a=new z.ux({Iu:!0,kl:!1});a.show();var b=c.type;a.xq=c.token;a.mC=b;z.xx(a,d,f,!1);a.Ad.focus()},this),a)();break;case "delete":var g=b.getAttribute("data-token");z.X.confirm("删除私信会话","你确定要删除与 "+f+"的所有会话吗？",function(a){a&&PM(g)},this);break;case "edit":z.xr(this.ld,
this.Sh),this.an=-1}}};z.y(QM,z.LD);QM.prototype.init=function(a){QM.v.init.call(this,a);this.cc(this.h)};QM.prototype.KC=function(a){this.KC=a};QM.prototype.cc=function(a){if(this.KC){var b=new z.GF,c=this.VP;b.ny=this.jy;b.my=c||b.my;this.Ln&&b.FB(this.Ln);b.w(a)}};QM.prototype.FB=function(a){this.Ln=a};z.y(RM,z.Yj);RM.prototype.init=function(){this.o().g(this.h,"click",this.zp)};RM.prototype.zp=function(a){a=z.Gr(this.h,a.target);"focus"===(a&&a.name)&&(0,z.zG)(a,this.jy,null,this.UP,{follow_text:this.text[0],unfollow_text:this.text[1]})};z.y(SM,z.Yj);z.e=SM.prototype;z.e.w=function(a){this.element=a;var b=(0,window.$)("\x3cul\x3e");this.vL=(0,window.$)("\x3cli\x3e");b.append(this.vL);(0,window.$)(a).append(b);this.wL||(this.wL=!0,this.yC=new z.Z(!0),this.o().Aa(this.yC,"success",this.gU),this.yC.ajax(this.url,null,"POST"))};z.e.gU=function(){var a=z.Tn(this.yC);a&&(a&&a.r?z.X.message(a.msg):(TM(this,this.vL,a.msg),this.wL=!1,this.C()))};z.e.C=function(){this.o().g(this.element,"click",this.zp)};
z.e.zp=function(a){var b=(a=a.target)?a.name:"";if(b)switch(b){case "load":case "loadmore":this.cA(a);break;case "topic":window.location.href=a.href}};z.e.cA=function(a){if(!this.jp){var b=a.getAttribute("data-token"),c=a.getAttribute("data-parent");this.jp=!0;this.pk=new z.Z(!0);this.o().Aa(this.pk,"success",this.or);this.AB=a.parentNode;this.AB.innerHTML='\x3cspan class\x3d"zg-gray"\x3e加载中...\x3c/a\x3e';this.pk.ajax(this.url+"?child\x3d"+b+"\x26parent\x3d"+c,null,"POST")}};
z.e.or=function(){var a=z.Tn(this.pk);if(a)if(a&&a.r)z.X.message(a.msg);else if(a=a.msg,a[1]){(0,window.$)(this.AB).hide();for(var b=(0,window.$)(this.AB.parentNode),c=0;c<a[1].length;c++){var d=a[1][c],f=(0,window.$)("\x3cli\x3e").addClass("zm-topic-organize-item");"topic"!==d[0][0]&&f.addClass("zm-topic-organize-loadmore");b.append(f);TM(this,f,d)}this.jp=!1}};z.y(UM,z.Rv);UM.prototype.yh=function(a){z.oh[0][0]===a?this.aj():UM.v.yh.apply(this,arguments)};UM.prototype.OD=function(a){if(a=z.Tn(a.target))a.r?z.X.message(a.msg):a.msg&&(window.location.href=a.msg)};z.n(VM,z.R);z.e=VM.prototype;
z.e.W=function(a){z.R.prototype.W.call(this,a);this.h=a;this.Ga=(0,window.$)(a);this.Ga.append(hN(this.oa));this.jv=this.Ga.find(".TopicIndex-subTopics")[0];this.jv||(this.Ga.append(DR),this.jv=this.Ga.find(".TopicIndex-subTopics")[0]);a=this.Ga.find(".TopicIndex-errTips");this.PN=this.Ga.find(".zg-anchor-hidden")[0];this.XJ=this.Ga.find(".TopicIndex-editQuesInput")[0];this.Uc=this.Ga.find(".TopicIndex-sectionTitle")[0];this.rC=this.Ga.find(".TopicIndex-editSectionTitle")[0];this.iB=this.Ga.find(".TopicIndex-questionList")[0];
this.co=this.Ga.find(".TopicIndex-editWrap .TopicIndex-questionList")[0];this.CP=this.Ga.find(".TopicIndex-editWrap")[0];this.lL=a[0];this.YJ=a[1];this.pL=a[2];bN(this,{isEdit:!0})};z.e.B=function(){z.R.prototype.B.call(this);this.h=z.O("div",{innerHTML:iN(this.oa),"class":"TopicIndex-section is-edit"});this.W(this.h)};z.e.C=function(){z.R.prototype.C.call(this);fN(this,this.XJ);eN(this,this.Ga,this.oa.subTopic.map(function(a){return[a.text,a.Vc,void 0,a.jd]}));$M(this,this.co);this.Jw()};
z.e.zb=function(){z.R.prototype.zb.call(this);this.Ga.find(".js-change").off("change",this.kL);this.Ga.off("click",".TopicIndex-questionList .js-delete",this.WJ);this.Ga.off("click",".js-finish",this.VF);this.h.remove()};
z.e.Jw=function(){var a=this;this.kL=function(b){var c=b.target.value.trim();if(12<c.length)return b.target.value=c.substr(0,12),dN(a,{type:"title",Ta:"标题字数不能超过12"});a.oa.id?""===c?0>=a.oa.indexItem.length&&0>=a.oa.subTopic.length?a.service.jP(a.oa.id).then(function(){dN(a,{type:"title",Ta:a.oa.title+"已删除"});a.dispatchEvent({type:YM,data:{id:a.oa.id,title:""}});a.dispatchEvent(cN)}).fail(function(b){return dN(a,{type:"title",Ta:b||"删除失败"})}):dN(a,{type:"title",Ta:"请输入标题"}):a.service.cY(a.oa.id,c).then(function(){dN(a,
{type:"title",Ta:""});XM(a,{title:c})}).fail(function(b){return dN(a,{type:"title",Ta:b||"保存失败"})}):0<c.length&&a.service.qN({title:c}).then(function(b){XM(a,{id:b,title:c});dN(a,{type:"question",Ta:""});dN(a,{type:"title",Ta:""});a.BH||bN(a,{isEdit:!1})}).fail(function(b){return dN(a,{type:"title",Ta:b||"添加失败"})})};this.FX=function(b){12<b.currentTarget.value.trim().length?dN(a,{type:"title",Ta:"标题不能超过12字"}):dN(a,{type:"title",Ta:""})};this.WJ=function(b){var c=[].indexOf.call(a.co.children,(0,window.$)(b.target).closest(".TopicIndex-questionItem")[0]);
a.service.iP(a.oa.indexItem[c].id).then(function(){dN(a,{type:"question",Ta:""});XM(a,{indexItem:[c,1]})}).fail(function(){return dN(a,{type:"question",Ta:window.status||"删除失败"})})};this.VF=function(){a.lL.textContent||a.YJ.textContent||a.pL.textContent||(a.wh?a.BH=!1:(a.rC.value!==a.oa.title&&a.rC.dispatchEvent(new window.Event("change")),bN(a,{isEdit:!1})))};this.Ga.find(".js-change").on("change",this.kL).on("input",this.FX);this.Ga.on("click",".TopicIndex-questionList .js-delete",this.WJ);this.Ga.on("click",
".js-finish",this.VF)};var YM="update_module",cN="del_module",gN='\x3cspan class\x3d"zu-autocomplete-row-name" title\x3d"\x3c%\x3dlabel%\x3e" style\x3d"-webkit-user-select: none;" data-topicid\x3d"\x3c%\x3durl_token%\x3e"\x3e\x3c%\x3dlabel%\x3e\x3cspan class\x3d"zg-link-gray-normal"\x3e\x3c%\x3d answer_count \x3e 0 ? answer_count + \'个回答\' : \'\' %\x3e\x3c/span\x3e\x3c/span\x3e',DR='\x3cdiv class\x3d"TopicIndex-subTopicsWrap clearfix is-hide"\x3e\n      \x3cspan class\x3d"TopicIndex-subLabel"\x3e相关话题：\x3c/span\x3e\n      \x3cdiv class\x3d"TopicIndex-subTopics"\x3e\x3c/div\x3e\n    \x3c/div\x3e';z.n(jN,z.R);jN.prototype.W=function(a){z.R.prototype.W.call(this,a);this.h=a;this.R=(0,window.$)(a);this.R.append(ER);this.jD=this.R.find(".TopicIndex-section");this.bw=(0,window.$)(".TopicIndex-toc");this.jD.append(FR)};
jN.prototype.Jw=function(){var a=this;this.uN=function(b){if(20>a.Ui.length){var c=new VM(void 0,a.oa.id);b=b.currentTarget.parentElement;c.Jf(b.parentNode,b);a.Ui[a.R.find(".TopicIndex-section").length-1]=c;kN(a,c);mN(a,c)}else z.X.alert("暂不支持添加超过20个模块")};this.BP=function(b){var c=(0,window.$)(b.currentTarget).parent(".TopicIndex-section");b=c[0];var d=[].indexOf.call(a.h.children,b);a.Ui[d]?bN(a.Ui[d],{isEdit:!0}):(c={id:c.data("id"),title:c.find(".TopicIndex-sectionTitle").text(),iS:[].map.call(b.querySelectorAll(".TopicIndex-questionItem"),
function(a){var b=a.children[0]||a,c=b.getAttribute("href");return{id:a.dataset.id,jd:c&&c.match(/\d+/g)[0],text:b.textContent}}),oX:[].map.call(b.querySelectorAll(".TopicIndex-subTopics span"),function(a){return{id:a.dataset.id,jd:a.children[0].dataset.topicid,text:a.children[0].textContent,Vc:a.children[0].dataset.token}})},c=new VM(c,a.oa.id),c.w(b),a.Ui[d]=c,kN(a,c),mN(a,c))};this.R.on("click",".js-add",this.uN);this.R.on("click",".js-edit",this.BP)};
jN.prototype.C=function(){z.R.prototype.C.call(this);this.Jw();if(0===this.jD.length){var a=new VM(void 0,this.oa.id),b=this.R.find(".TopicIndex-addBtnWrap")[0];a.Jf(b.parentNode,b);this.Ui.push(a);kN(this,a);mN(this,a)}};var lN="update_top",FR='\x3ca class\x3d"TopicIndex-editButton zu-edit-button js-edit" name\x3d"edit"\x3e\n    \x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e',ER="\x3cdiv class\x3d\"TopicIndex-addBtnWrap\"\x3e\n    \x3cdiv class\x3d'TopicIndex-addSectionButton js-add'\x3e\n      \x3ci class\x3d'z-icon-follow'\x3e\x3c/i\x3e\n      \x3cspan\x3e添加下一个标题\x3c/span\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e";z.y(nN,z.R);z.e=nN.prototype;z.e.init=function(){z.CG.L(this);this.w(window.document.body)};
z.e.C=function(){nN.v.C.call(this);tN(this);var a=z.L("zh-topic-top-answerer");a&&(new RM(a,"people",["zg-follow","zg-unfollow"])).init();if(a=z.L("zh-topic-direct-question-list"))a=new QM(a,null,"question",null,!0),a.Yi("question-item"),a.init();if(!z.T.gd){if(a=z.L("zh-topic-title"))this.nd=new UM(!1,"/topic/update","title"),gM(this.nd,["tid\x3d"+this.Rf]),this.nd.addEventListener("beforeedit",z.cE({Dq:!0})),this.nd.w(a),(0,window.$)(a).on("click",".js-pin",function(){var a=(0,window.$)(this),c=
a.attr("data-action");window.$.post(c,{tid:z.oh[0][3]}).done(function(c){if(!c)return z.X.message("网络异常");if(c.r)return z.X.message(c.msg);c=a.hasClass("pin")?'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/remove" class\x3d"js-pin zg-gray unpin topic-hover-content"\x3e\x3ci class\x3d"z-icon-unpin"\x3e\x3c/i\x3e取消常去话题\x3c/a\x3e':'\x3ca href\x3d"javascript:;" data-action\x3d"/pin-topic/add" class\x3d"js-pin zg-gray pin topic-hover-content"\x3e\x3ci class\x3d"z-icon-pin"\x3e\x3c/i\x3e设为常去话题\x3c/a\x3e';
a.replaceWith(c)})});if(a=z.L("zh-topic-desc"))(0,window.$)(a).find(".zm-editable-content").data("editable-maxlength"),this.Dl=new z.Vv(!0,"/topic/update","description"),this.Dl.$b='\x3ca href\x3d"javascript:;" name\x3d"edit"\x3e添加话题描述\x3c/a\x3e\x3c/div\x3e',gM(this.Dl,["tid\x3d"+this.Rf]),this.Dl.Xw=!1,this.Dl.NL=!1,this.Dl.addEventListener("beforeedit",z.cE({Dq:!0})),this.Dl.w(a);if(a=z.L("zh-topic-faq"))this.ey=new z.Vv(!0,"/topic/"+(0,window.encodeURIComponent)(z.oh[0][1])+"/faq","content"),this.ey.$b=
'\x3cdiv class\x3d"zm-topic-faq-container"\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e常见问题是该话题下经常会提到的问题的整理，以便后来者查阅（\x3ca href\x3d"/question/20388061" class\x3d"zg-link-litblue"\x3e如何创建？\x3c/a\x3e）\x3c/div\x3e\x3ca href\x3d"javascript:;" name\x3d"edit" class\x3d"zg-link-litblue"\x3e\x3cspan class\x3d"zg-blue-edit"\x3e\x3c/span\x3e为「'+z.oh[0][0]+"」添加常见问题\x3c/a\x3e\x3c/div\x3e",this.ey.Xw=!1,this.ey.w(a);yN(this)}zN(this);sN(this);vN(this);wN();xN(this);qN(this);pN();(a=z.N("zm-topic-feed-container"))&&
(new RM(a,"question",["zg-follow","zg-unfollow"])).init();(a=z.L("zh-topic-side-children-list"))&&(new RM(a,"topic",["zg-follow","zg-unfollow"])).init();CN();(0,window.$)(".js-may-disable").click(z.Lq(z.q,!0));oN();DN(this);EN(this)};
z.e.pU=function(){this.Yr=this.Ka.hF;if(!this.BI&&this.Yr){this.BI=!0;this.nA=new z.Z(!0);this.o().Aa(this.nA,"success",this.DN);this.nA.ajax("/topic/"+(0,window.encodeURIComponent)(z.oh[0][1])+"/demand","action\x3dmerge\x26target_topic_id\x3d"+this.Yr[3]);var a=z.L("zh-topic-merged-msg");z.Q(z.L("zh-topic-merge"),!1);z.Q(a,!0);a=z.Le("a",null,a)[0];a.href="/topic/"+this.Yr[1];a.innerHTML=this.Yr[0];this.Ka&&(this.Ka.Ya.value="")}};
z.e.DN=function(){var a=z.Tn(this.nA);if(!a)return z.X.message("网络异常");if(a.r)return z.X.message(a.msg);this.BI=!1};z.e.cU=function(){this.nF||(this.nF=!0,this.Ex=new z.Z(!0),this.o().Aa(this.Ex,"success",this.BN),this.Ex.ajax("/topic/"+(0,window.encodeURIComponent)(z.oh[0][1])+"/demand","action\x3dremove"))};
z.e.BN=function(){var a=z.Tn(this.Ex);if(!a)return z.X.message("网络异常");if(a.r)return z.X.message(a.msg);a=z.L("zh-topic-del-msg");z.Q(z.L("zh-topic-del-btn"),!1);z.Q(a,!0);this.Ka&&(this.Ka.Ya.value="");this.nF=!1};
z.e.PU=function(a){if((a=a.target)&&a.name)if("add"===a.name){if(a=this.uw.value)this.ww=new z.Z(!0),this.o().Aa(this.ww,"complete",this.AN),this.ww.ajax(window.location.href,"action\x3dadd_alias\x26alias\x3d"+(0,window.encodeURIComponent)(a))}else"remove"===a.name?(this.pB=new z.Z(!0),a=a.parentNode.getAttribute("data-token"),this.o().Aa(this.pB,"complete",this.FN),this.pB.ajax(window.location.href,"action\x3dremove_alias\x26alias_token\x3d"+a)):"remove-merged"===a.name&&(this.qB=new z.Z(!0),a=a.parentNode.getAttribute("data-token"),
this.o().Aa(this.qB,"complete",this.GN),this.qB.ajax("/topic/"+(0,window.encodeURIComponent)(z.oh[0][1]+"/demand"),"action\x3dremove\x26target_topic_id\x3d"+a))};z.e.GN=function(){var a=z.Tn(this.qB);if(!a)return z.X.message("网络异常");if(a.r)return z.X.message(a.msg);rN(this,a.msg)};z.e.FN=function(){var a=z.Tn(this.pB);if(!a)return z.X.message("网络异常");if(a.r)return z.X.message(a.msg);rN(this,a.msg)};
z.e.AN=function(){var a=z.Tn(this.ww);if(!a)return z.X.message("网络异常");if(a.r)return z.X.message(a.msg);var a=a.msg,b=z.O("li");b.setAttribute("data-token",a[1]);b.innerHTML=a[0]+' \x3ca name\x3d"remove" href\x3d"javascript:;" class\x3d"zg-link-gray"\x3e移除\x3c/a\x3e';this.vw.appendChild(b);this.uw.value="";z.Q(this.vw.parentNode,!0)};
z.e.QB=function(a){this.MA?this.pb.X()?this.pb.G(!1):(this.pb.G(!0),a.stopPropagation(),a.preventDefault(),this.ol()):(a.stopPropagation(),a.preventDefault(),this.ek(),this.ol());this.MA=!0};z.e.ol=function(){this.o().Aa(window.document,"click",function(){this.pb.G(!1)})};
z.e.ek=function(){var a=z.L("zh-topic-side-head"),b=this.yg.getAttribute("data-auth");this.pb=new z.Kz;this.bz=!0;"f-topic-manage"===b&&this.pb.Ha(this.VU=new z.Fz("管理话题"));this.pb.Ha(this.WU=new z.Fz("组织话题"));this.pb.Ha(this.UU=new z.Fz("话题日志"));this.bz&&(this.pb.render(a),this.o().g(this.pb,"action",this.Wj))};z.e.Wj=function(a){var b="";a.target===this.VU?b="admin":a.target===this.WU?b="organize":a.target===this.UU&&(b="log");window.location.href=["/topic",this.bj[1],b].join("/")};
z.e.AU=function(){var a=z.Tn(this.oB);if(a&&!a.r){var b=[];z.A(a,function(a){b.push(z.tr(a,null,!0))});this.UV.innerHTML=b.join("")+'\x3cdiv class\x3d"zg-clear"\x3e\x3c/div\x3e';a.length&&z.Q(z.L("zh-topic-side-related-topics-wrap"),!0)}};z.y(HN,z.R);HN.prototype.B=function(){this.h=this.K().B("FORM",{method:"POST",style:"display:none"})};HN.prototype.post=function(a,b,c){var d=this.m();d||(this.render(),d=this.m());d.action=b||"";d.target=c||"";IN(this,d,a);d.submit()};z.y(MN,z.Yj);MN.prototype.init=function(){var a=z.On(new z.qh(window.location.href),"group_id");a&&(this.wk=new z.Z(!1),this.o().Aa(this.wk,"success",this.UA),a&&this.wk.ajax("/noti7/read","group_id\x3d"+a,"POST"))};MN.prototype.UA=function(){var a=z.Tn(this.wk);if(a&&!a.r&&a.msg){var b=a.msg;if(!0===b||"true"===b||"True"===b)return;this.HT=a.msg;this.dispatchEvent("change")}(a=z.BG)&&z.rx(a)};z.y(NN,z.R);z.e=NN.prototype;z.e.init=function(){z.CG.L(this);this.w(window.document.body)};
z.e.C=function(){NN.v.C.call(this);QN(this);if(this.Vt=z.L("zh-list-meta-wrap"))this.o().g(this.Vt,"click",this.GA),z.On(new z.qh(window.location.href),"fc")&&SN(this);var a=z.L("zh-favlists-wrap");a&&(new QM(a,null,"favlist",null,!0)).init();ON(this);(a=z.L("zh-favlist-log-list-wrap"))&&(new QM(a,null,"favlist",null,!0)).init();PN();if(a=z.L("zh-favlist-followers-wrap"))a=new QM(a,null,"people",["zg-btn-follow","zg-btn-unfollow"],!0),a.Yi("zm-profile-section-item"),a.KC(!0),a.init();this.o().g(window,
"hashchange",this.e_);this.tz();this.wp=new MN;this.wp.init()};z.e.KR=function(a){a=a.target;var b=a.id.split("-"),c=b[1],b=b[2];(new z.Z(!0)).ajax("/collection/remove","answer_id\x3d"+c+"\x26favlist_id\x3d"+b);if(b=z.uf(a,"div","zm-item"))a=z.So("zm-item-answer",b),1===a.length?z.P(b):(a=z.pb(a,function(a){return a.getAttribute("data-aid")===c}))&&z.P(a.parentNode)};z.e.aX=z.Lq(function(){z.kA.aa().show(!0);z.Ai("collect","click_add_collection_start","collections_sidebar_create_collection")},!0);
z.e.QB=function(a){this.MA?this.pb.X()?this.pb.G(!1):(this.pb.G(!0),a.stopPropagation(),a.preventDefault(),this.ol()):(a.stopPropagation(),a.preventDefault(),this.ek(),this.ol());this.MA=!0};z.e.ol=function(){this.o().Aa(window.document,"click",function(){this.pb.G(!1)})};z.e.ek=function(){var a=z.L("zh-list-side-head");this.pb=new z.Kz;this.bz=!0;this.visible||this.pb.Ha(this.YU=new z.Fz("设置为公开"));this.pb.Ha(this.TU=new z.Fz("删除此收藏夹"));this.bz&&(this.pb.render(a),this.o().g(this.pb,"action",this.Wj))};
z.e.GA=function(a){a=a.target;switch(a&&a.name){case "edit":z.oA(z.kA.aa());break;case "addcomment":z.yi({category:"collect",action:"click_add_collection_comment_start",label:"collection_collection_name_add_collection_comment_start"});SN(this);this.Ia.Qh();this.Ia.fd()&&this.Ia.cj("view_comments",(0,window.parseInt)(z.pf(a),10)||0);break;case "remove":RN(this)}};
z.e.Wj=function(a){a.target===this.YU?z.X.confirm("确定设置收藏夹为公开？","收藏夹设置为公开后，将不能再设置为私密。",function(a){a&&TN(this)},this):a.target===this.TU&&RN(this)};z.e.tz=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=KN(a).done(function(a){b.html(a)}))})};z.y(UN,z.Yj);
UN.prototype.init=function(){if(this.Hk=z.L("zh-question-redirect-info"))this.Hk.innerHTML&&(this.bp=!0),this.o().g(this.Hk,"click",function(a){"cancel"===a.target.name&&XN(this)});var a=z.L("zh-question-side-header-wrap");if(z.tm.Ab&&!z.tm.SH&&a){var b=z.L("zh-question-filter-wrap");b?z.bf(a,b):a.style[z.D?"styleFloat":"cssFloat"]="none"}(this.yg=z.L("zh-question-operation-menu"))&&this.ek();this.o().g(z.Ep,"anon_change",function(a){var b=z.L("zh-question-side-invitation-anon");b&&z.Q(b,a.vb);(b=
z.L("zh-question-side-invitation-notanon"))&&z.Q(b,!a.vb);this.zm&&this.zm.ab(AM(this.data.Ch)||!a.vb)})};
UN.prototype.ek=function(){this.pb=new z.Kz;var a=this.data.xn,b=this.yg.getAttribute("data-auth"),b=b?b.split(","):[];if(null==a||0===a)this.pb.Ha(this.nu=WN("使用匿名身份",!1)),VN(this),z.S.gd||z.sm("question_op_redirect")||"close"===z.S.status||z.S.Xo||(this.pb.Ha(this.zm=WN(this.bp?"撤消重定向":"问题重定向")),this.zm.ab(AM(this.data.Ch)||!this.data.vb)),z.B(b,"auth-f-manage")&&this.pb.Ha(this.XU=WN("更新话题页显示",!1)),this.o().g(this.pb,"action",this.Wj),this.nu&&this.o().g(z.Ep,"anon_change",function(){VN(this)}),
this.Fb&&z.B(b,"auth-pu-mark")&&(this.pb.Ha(this.LA=WN("优质回答",!0)),this.LA.Cc(this.Fb.NS)),a=new z.Rz("Settings",this.pb),a.Jk=!0,z.Tz(a),a.w(this.yg)};
UN.prototype.Wj=function(a){if(a.target===this.nu)z.Cp(this.data.vb?0:1);else if(a.target===this.zm){if(!1===z.cE({Np:!0})())return!1;this.Op||(this.Op=new z.WD(this.qa),this.o().g(this.Op,"change",this.oT));this.pb.G(!1);this.bp?XN(this):this.Op.show()}else a.target===this.SU?(a=this.SU.og()?"/unlock_summary":"/lock_summary",z.up("/question/"+this.data.fb+a,function(){window.top!==window?window.top.location.href="/question/"+z.S.fb:window.location.reload()},"POST")):a.target===this.XU?window.$.post("/refresh_topic_feeds",
{q:z.S.fb}).done(function(a){a.r||z.X.message("操作成功！")}):a.target===this.LA&&(a=this.LA.og()?"/good_mark":"/good_unmark",window.$.post("/answer/"+this.Fb.fb+a).done(function(a){a.r||z.X.message("操作成功！")}))};
UN.prototype.oT=function(){this.Hk.innerHTML='\x3cdiv class\x3d"zg-wrap"\x3e\x3cdiv class\x3d"zu-global-nitify-inner"\x3e\x3cspan class\x3d"zu-global-notify-icon"\x3e\x3c/span\x3e此问题将跳转至 \x3ca href\x3d"/question/'+this.Op.Qu+'"\x3e'+this.Op.VJ+'\x3c/a\x3e（\x3ca href\x3d"javascript:;" name\x3d"cancel"\x3e撤消重定向\x3c/a\x3e）\x3c/div\x3e\x3c/div\x3e';z.Q(this.Hk,!0);this.bp=!0;this.zm.bq("撤消重定向")};z.y(YN,z.R);var ZN="headline",GR={experience:"/topic/bio/update",headline:"/people/edit"},HR="例：游戏开发者，科幻游戏爱好者;例：交互设计师，专注 iOS 平台产品设计;例：从医五年，口腔医学领域;例：金融硕士，三年从业经验;例：SNS 深度用户，社交产品设计师;例：十年互联网人，做过产品，写过代码;例：摄影爱好者，专注人像摄影;例：旅行爱好者，脚步遍及 32 个国家;例：读中外历史，研究各国文化;例：三次创业，两次失败，一次成功;例：坚持健身四年，专注有氧抗阻训练;例：做过动画，画过漫画".split(";");z.e=YN.prototype;
z.e.B=function(){this.K();var a,b;"experience"===this.type?(b="添加我在 "+this.AJ.bj+" 话题下的话题经验",a="在 "+this.AJ.bj+" 话题下的话题经验"):(b="添加一句话介绍",a="一句话介绍");a='\n    \x3cdiv class\x3d"zm-bio-item '+(this.content.length?"normal":"empty")+'"\x3e\n      \x3cp class\x3d"zm-bio-item-title"\x3e'+z.Ma(a)+'\x3c/p\x3e\n      \x3cinput class\x3d"zm-bio-item-checkbox" type\x3d"checkbox"/\x3e\n      \x3cimg class\x3d"avatar" src\x3d"'+z.Ma(z.T.Rd())+'"\x3e\n      \x3cdiv class\x3d"zm-bio-item-empty-tip"\x3e\n        \x3cspan class\x3d"sprite-topic-exprience-icon-add"\x3e\x3c/span\x3e\n        \x3ca href\x3d"javascript:;" name\x3d"edit"\x3e'+
z.Ma(b)+'\x3c/a\x3e\n      \x3c/div\x3e\n      \x3cdiv class\x3d"zm-bio-item-content"\x3e\n        \x3cspan class\x3d"username"\x3e'+z.Ma(z.T[0])+'\x3c/span\x3e\n        \x3cspan class\x3d"content"\x3e\n          '+("，"+z.Ma(this.content))+'\n        \x3c/span\x3e\n        \x3ca href\x3d"javascript:;" name\x3d"edit" class\x3d"zu-edit-button"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改\x3c/a\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  ';a=(0,window.$)(a);this.h=a.get(0);this.kf();this.UC=
a.find(".zm-bio-item-checkbox");this.Sq=a.find(".content");this.W(this.h)};
z.e.kf=function(){var a=this.K(),b=(0,window.$)('\n    \x3cdiv class\x3d"zm-command"\x3e\n      \x3cspan class\x3d"limitTip"\x3e'+(40-this.content.length)+' / 40\x3c/span\x3e\n      \x3ca href\x3d"javascript:;" name\x3d"cancel"\x3e取消\x3c/a\x3e\n      \x3ca href\x3d"javascript:;" name\x3d"save" class\x3d"zg-r3px zg-btn-blue"\x3e保存\x3c/a\x3e\n    \x3c/div\x3e\n  ').get(0),c=a.B("textarea",{className:"zm-bio-item-editor-input",value:this.content});this.EP=a.B("div","zm-bio-item-editor",[a.B("div","zg-form-text-input",
c),b]);new z.Ur(c);a.appendChild(this.h,this.EP);this.mj=(0,window.$)(c);this.hI=a.jg("limitTip",b);this.type!==ZN&&this.mj.prop("placeholder",HR[Math.floor(Math.random()*HR.length)])};z.e.W=function(a){YN.v.W.call(this,a);this.sq=this.content.length?"normal":"empty"};
z.e.C=function(){var a=this;YN.v.C.call(this);this.o().g(this.h,"click",function(){"normal"===this.sq?this.Cc(!0):"empty"===this.sq&&(aO(this,"editing"),$N(this))});(0,window.$)(this.h).find("a").click(function(b){switch((0,window.$)(b.target).prop("name")){case "edit":aO(a,"editing");$N(a);break;case "cancel":a.yo();break;case "save":a.Ys()}b.stopPropagation()});this.mj.on("keyup",function(b){b=40-(0,window.$)(b.target).val().length;z.zo(a.hI,"exceed",0>b);z.nf(a.hI,b+" / 40")})};
z.e.Ys=function(){var a=this.mj.val();if(40>a.length){var b=this,c=GR[this.type];("experience"===this.type?window.$.post(c,{bio:a,tid:this.Vc}):window.$.post(c,{data:JSON.stringify({headline:a})})).then(function(){a.length?(b.Sq.text("，"+a),b.Cc(!0),aO(b,"normal")):(b.Sq.text(""),b.Cc(!1),aO(b,"empty"));b.ea(a)})}};z.e.yo=function(){this.content.length?aO(this,"normal"):aO(this,"empty")};z.e.ea=function(a){this.content=a;this.content.length?this.Sq.text("，"+a):this.Sq.text("")};
z.e.Cc=function(a){this.UC.prop("checked",a);a&&this.dispatchEvent("bio_item_checked")};z.e.Za=function(){return this.content};z.e.getToken=function(){return this.Vc};z.e.og=function(){return this.UC.prop("checked")};z.y(bO,z.Yj);var dO=null;z.e=bO.prototype;
z.e.render=function(a){var b=this;this.h=z.O("div","zu-bio-editor-wrap",[this.uS=z.O("div","zu-bio-editor-inner-wrap"),this.hc=z.O("div","zm-command",[this.Qn=z.O("a",{name:"save",href:"#",className:"zg-r3px zg-btn-blue"},"完成")])]);var c=z.T[4];c.length&&hO(this,c,{type:ZN,Vc:"headline"});z.A(this.lF,function(a){hO(this,a[1],{type:"experience",bj:a[0][0],Vc:a[0][3]})},this);this.rS&&z.Q(this.hc,!1);a.appendChild(this.h);this.o().g(this.hc,"click",this.Va);this.g("bio_item_checked",function(a){z.A(this.items,
function(b){b!==a.target&&b.Cc(!1)})});(0,window.$)(z.Gj(this.ta)).click(function(){b.ma({action:"click_edit_topic_experience_close"})})};z.e.getSelection=function(){return this.items.find(function(a){return a.og()})};z.e.qy=function(){var a=this.getSelection();return a&&a.Za()};z.e.Va=function(a){(a=this.eh(a.target))&&"save"===a.name&&(this.ta&&(iO(this),this.ta.G(!1)),this.dispatchEvent("change"),this.ma({action:"click_edit_topic_experience_submit"}))};
z.e.ma=function(a){this.dispatchEvent(Object.assign({type:"trackRequested",category:"edit_profile"},a))};z.y(jO,z.R);z.e=jO.prototype;z.e.D=function(){nO(this);this.Zd.H();jO.v.D.call(this)};
z.e.w=function(a){this.h=a;this.lt=z.N("draft-saved-info",a);z.Q(this.lt,!1);this.oH=z.N("draft-saved-time",a);this.HO=z.N("draft-clear-button",a);a=this.o().g(this.Zd,"tick",this.Ru).g(this.HO,"click",this.IO).g(this.As,"keydown",this.XS);"oninput"in this.As&&!z.D?a.g(this.As,"input",this.wS):a.g(this.As,"keydown",this.xS);var b=z.hm.ee&&1E3*z.hm.ee[1];b&&(oO(this,b),this.oC=(0,window.setInterval)((0,z.t)(function(){oO(this,b)},this),22E3))};
z.e.XS=function(a){(a.metaKey||a.ctrlKey)&&"s"===z.rl[a.keyCode]&&(this.mT(),this.isContentEditable||a.preventDefault())};z.e.Qx=function(){(0,window.$)(window).on("beforeunload.DraftSaver",(0,z.t)(function(){return"你的修改还未成功保存，确认离开该页面吗？"},this))};z.e.fs=function(){(0,window.$)(window).off("beforeunload.DraftSaver")};z.e.wS=function(){mO(this);kO(this)};z.e.xS=function(a){z.go(a.keyCode)&&(mO(this),kO(this))};z.e.ea=function(a){this.mb.ea(a);this.mb.gq()};z.e.Za=function(){return this.mb.kg()};
z.e.wK=function(){if(!this.Od){var a=this.Za();if(a){lO(this,"保存中…");var a=(new z.wh).add("qid",this.qa).add("content",a).add("timestamp",(0,z.J)()),b=new z.Z;b.ajax("/answer/draft/save",a.toString(),"POST");this.o().g(b,"success",(0,z.t)(this.yh,this));this.dI=b}}};z.e.qY=150;z.e.Ru=z.Sr(jO.prototype.qY,jO.prototype.wK);z.e.nT=350;z.e.mT=z.Sr(jO.prototype.nT,jO.prototype.wK);z.e.zS=3E3;z.e.vS=z.Sr(jO.prototype.zS,function(){this.Od||(this.Za()?this.Ru():pO(this))});
z.e.yh=function(a){a=z.Tn(a.target);var b="",c=!1;0===a.r?b="已保存":(b=a.msg||"保存失败！请稍后再试。",c=!0);nO(this);z.Q(this.lt,!0);lO(this,b,c);this.fs();"保存成功"===a.msg&&this.dispatchEvent("saveContent");this.Zd.start()};z.e.IO=function(a){a.preventDefault();z.X.confirm("清除草稿",this.CH?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",function(a){a&&(this.CH?(pO(this),this.mb.dispatchEvent("cancel_edit"),this.mb.aj()):(this.ea(""),pO(this),eM(this.mb)))},this)};z.y(rO,z.R);
rO.prototype.B=function(){rO.v.B.call(this);var a=(0,window.$)('\x3cdiv class\x3d"carousel"\x3e\x3cdiv class\x3d"carousel-navigation-btn"\x3e\x3cdiv class\x3d"carousel-left-btn copyright-ico-prev"\x3e \x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"carousel-content"\x3e\x3c/div\x3e\x3cdiv class\x3d"carousel-navigation-btn"\x3e\x3cdiv class\x3d"carousel-right-btn copyright-ico-next"\x3e \x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');this.bT=(0,window.$)(".carousel-left-btn",a);this.qW=(0,window.$)(".carousel-right-btn",a);
this.wE=(0,window.$)(".carousel-content",a);this.xE=(0,window.$)("\x3cdiv\x3e\x3c/div\x3e").addClass("carousel-navigation-dot-group");z.A(this.contents,function(a,c){this.wE.append(a);this.xE.append(this.ls[c])},this);this.wE.append(this.xE);sO(this,0);this.W(a[0]);this.R=(0,window.$)(this.h).addClass(this.className)};rO.prototype.C=function(){rO.v.C.call(this);this.bT.click(window.$.proxy(this.prev,this));this.qW.click(window.$.proxy(this.next,this))};
rO.prototype.next=function(){sO(this,this.Xg+1)&&this.dispatchEvent({type:"rightShow",offset:this.Xg})};rO.prototype.prev=function(){sO(this,this.Xg-1)&&this.dispatchEvent({type:"leftShow",offset:this.Xg})};var xO=void 0;z.n(yO,z.Vv);z.e=yO.prototype;z.e.qG=function(){var a=(0,window.$)("#zh-question-title h2.zm-editable-content")[0];return{title:a&&(/answer\/\d+$/.test(window.location.pathname)?z.pf(a):a.firstChild.nodeValue)||"",Tk:this.Fj}};z.e.qy=function(){return this.Kw};z.e.Xu=function(a){this.vb=a};z.e.ab=function(a,b){this.enabled=a;this.rt?(this.aj(),this.$b=b,this.fc.innerHTML=this.$b):b&&(this.$b=b)};z.e.W=function(a){z.Vv.prototype.W.call(this,a);this.rt=!0;z.W.add(this.fc,"zu-answer-form-disabled-wrap")};
z.e.D=function(){this.mt&&(z.P(this.mt),this.TL=this.mt=null);z.Vv.prototype.D.call(this)};z.e.Uj=function(a){this.Xu(a.vb);this.vn&&(this.vn.checked=a.vb)};z.e.C=function(){z.Vv.prototype.C.call(this);this.o().g(z.Ep,"anon_change",this.Uj);CO(this)};
z.e.kf=function(){z.Vv.prototype.kf.call(this);var a=this.K(),b=z.T.Lb();this.mt=a.B("div","zh-answer-form clearfix",[b?zM(this.SL):"",this.TL=a.B("div",null,[a.B("div","zu-answer-form-title",[b?yM(this.SL):"我来回答这个问题",this.nE=a.B("span")])])]);b&&!z.T.gd&&(b=z.km.value,"TOPIC"===z.km.type?BO(this,b):zO(this,b),(0,window.$)(this.nE).on("click","a.zu-edit-button",function(a){z.yi({category:"edit_profile",action:"click_edit_topic_experience_start",label:"add_answer_box_edit_topic_experience",attributes:{text:(0,window.$)(a.target).text()}})}));
a.st(this.mt,this.Fj);this.o().g(this.TL,"click",this.Va);z.T.Lb()?z.T.Ee||DO(this,'\x3cdiv class\x3d"activate-mask-tip-answer"\x3e'+(z.T.eo?"为了正常使用知乎的提问、回答、评论和编辑功能，请验证你的邮箱。":"为了正常使用知乎的提问、回答、评论和编辑功能，请绑定你的手机或邮箱。")+"\x3c/div\x3e",'\x3cdiv class\x3d"zm-command"\x3e\x3ca class\x3d"zg-r3px zg-btn-blue" href\x3d"javascript:"\x3e我要激活\x3c/a\x3e\x3c/div\x3e'):DO(this,'\x3cdiv class\x3d"signin-mask-tip-answer"\x3e\x3c/div\x3e','\x3cdiv class\x3d"zm-command"\x3e\x3ca class\x3d"zg-r3px zg-btn-blue" href\x3d"javascript:"\x3e我要回答\x3c/a\x3e\x3c/div\x3e')};
z.e.Qs=function(a){switch(a){case "edit_bio":JO(this);break;case "cancel_delete":this.dispatchEvent(JP);break;case "answer_my_question":EO(this)}return!0};z.e.fe=function(){"editing"===this.status?this.Pb&&z.Q(this.Pb,!0):this.Pb&&z.Q(this.Pb,!1);z.Q(this.td,!1);this.fc&&z.Q(this.fc,!this.enabled)};
z.e.xl=function(){var a=(0,z.ew)(IR);this.hc=z.Xe(a({questionStatus:z.S.status,statusText:{suggest:"建议修改",evaluate:"建议修改",close:"关闭"}[z.S.status]}));this.Qn=(0,window.$)(".submit-button",this.hc)[0];GO(this);HO(this);IO(this);this.Pb.appendChild(this.hc);this.ready(function(){if(this.Ra&&this.Ra.on)this.Ra.on("load",this.sz,!1,this)});z.tm.Ab||vO()};
z.e.sz=function(){var a=new jO(this);z.zc(this,a);this.o().g(a,"saveContent",function(){var a=!this.Qd&&this.Ra.Wb.FullScreenPlugin;a&&dM(a)},!1,this);var b=fM(this);this.o().g(b,"focus",function(){a.Zd.start()}).g(b,"blur",function(){mO(a);a.Ru()}).g(this,"saveSuccess",function(){mO(a);pO(a)});a.w(this.hc);this.BF=a};z.e.AA=function(){var a=cO(),b=a.qy(),a=(a=a.getSelection())&&a.type;a===ZN?zO(this,b):"experience"===a?BO(this,b):AO(this,"","填写话题经验，提升回答可信度")};
var JP="cancel_delete_answer",IR='\x3cdiv class\x3d"zm-command clearfix"\x3e'+(z.T.gd?"":'\x3clabel class\x3d"zg-left anno-box"\x3e\x3cinput name\x3d"anno-checkbox" type\x3d"checkbox"\x3e 匿名 \x3cspan\x3e\x26nbsp\x3c/span\x3e\x3c/label\x3e ')+'\x3clabel class\x3d"zg-left copyright-box"\x3e'+(z.T.AH?'\x3cselect name\x3d"copyright"\x3e\x3coption value\x3d1 selected\x3e允许规范转载\x3c/option\x3e\x3coption value\x3d2\x3e允许付费转载\x3c/option\x3e\x3coption value\x3d0\x3e禁止转载\x3c/option\x3e\x3c/select\x3e':'\x3cinput name\x3d"copyright" type\x3d"checkbox"\x3e未经许可，禁止转载')+
(z.tm.Ab?"":'\x3ca href\x3d"/terms#sec-licence-6" class\x3d"demo-trigger" target\x3d"_blank" hidden\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark" style\x3d"margin-left: 5px;" id\x3d"copyright_question_mark" data-copyright-demo\x3d"true"\x3e\x3c/i\x3e\x3c/a\x3e')+'\x3c/label\x3e \x3c% if (questionStatus !\x3d\x3d "normal") { %\x3e\x3cspan class\x3d"zg-gray-normal" style\x3d"margin-right:5px;"\x3e被\x3c%\x3d statusText %\x3e的问题不允许添加新的回答\x3c/span\x3e\x3ca class\x3d"zg-right" data-tooltip\x3d"s$b$为什么部分问题会被「关闭」「建议修改」？" href\x3d"/question/21290061 "\x3e\x3ci class\x3d"zg-icon zg-icon-question-mark"\x3e\x3c/i\x3e\x3c/a\x3e\x3c% } %\x3e\x3cspan class\x3d"\x3c%\x3d (questionStatus !\x3d\x3d "normal" ? "hidden" : "") %\x3e zg-right"\x3e\x3ca class\x3d"submit-button zg-btn-blue" name\x3d"save" href\x3d"javascript:"\x3e发布回答\x3c/a\x3e\x3c/span\x3e\x3cdiv class\x3d"draft-controls zg-right '+
(z.tm.Ab?"draft-controls-mobile":"")+'"\x3e\x3cspan class\x3d"draft-saved-info"\x3e\x3ca class\x3d"draft-clear-button goog-inline-block" href\x3d"#" data-tooltip\x3d"s$b$删除草稿"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e\x3cspan class\x3d"hide-text"\x3e清除草稿\x3c/span\x3e\x3c/a\x3e\x3cspan class\x3d"draft-saved-time"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e';z.y(KO,z.R);KO.prototype.B=function(){KO.v.B.call(this);this.h=z.Xe(JR)};KO.prototype.C=function(){KO.v.C.call(this);this.Ga=(0,window.$)(this.m());this.Pm=z.tt("answer",this.YD);var a=z.Kw(window.location.protocol+"//"+window.location.hostname+"/question/"+this.LV+"/answer/"+this.YD);(0,window.$)(".js-qrcode-image",this.Ga).attr("src",a);this.nc()};
KO.prototype.nc=function(){var a=this;(0,window.$)("button.weibo",this.Ga).click(function(){a.Pm.done(function(a){a.r||(z.eD(a.msg.sina),z.Ai("share","click_share_answer_to_weibo_start","answer_box_after_submit_answer"))})})};var JR='\x3cdiv class\x3d"answer-share-tip"\x3e分享我的回答到\x3cbutton class\x3d"wechat hidden-phone"\x3e\x3cdiv class\x3d"qr-code"\x3e扫描二维码\x3cimg class\x3d"js-qrcode-image" alt\x3d"微信分享二维码"\x3e\x3c/div\x3e\x3cspan class\x3d"ico z-ico-wechat"\x3e\x3c/span\x3e微信\x3c/button\x3e\x3cbutton class\x3d"weibo"\x3e\x3cspan class\x3d"ico z-ico-weibo"\x3e\x3c/span\x3e微博\x3c/button\x3e\x3c/div\x3e';z.y(LO,z.Vv);var OO=[{value:"精简文字描述",label:"精简文字描述"},{value:"补充必要的信息",label:"补充必要的信息"},{value:"改进标点或格式",label:"改进标点或格式"},{value:"other",label:"其他"}];z.e=LO.prototype;z.e.w=function(a){LO.v.w.call(this,a);this.o().g(z.Ep,"anon_change",this.Uj)};z.e.Uj=function(a){this.JH||z.W.enable(this.h,"zm-editable-disabled",a.vb)};
z.e.xl=function(){LO.v.xl.call(this);this.lB=z.O("div",{"class":"zm-editable-require-reason-wrap",style:"padding:10px 0 0 0"},[z.O("a",{"class":"zg-right zg-link-litblue",href:"/question/19550238/answer/12202028",target:"_blank"},z.S.gd?"":"为什么问题可以被公共编辑？"),NO(),this.CI=z.O("span"),this.NV=z.O("div",{"class":"zg-form-text-input",style:"height:22px;margin:10px 0 0 0;display:none"},this.MV=z.O("textarea",{style:"width:100%;height:22px !important;min-height:22px !important;"}))]);z.bf(this.lB,this.hc);
this.Wp&&PO(this," * 必选","zg-gray-normal");var a=z.Le("select",null,this.lB)[0];this.o().g(a,"change",function(){z.Q(this.NV,"other"===a.value);PO(this," * 必选","zg-gray-normal")})};
z.e.yh=function(a){var b=z.Le("select",null,this.lB)[0],c=b.value;if(this.Wp){if("none"===c){PO(this,"请选择一个修改理由");return}if("other"===b.value&&(c=z.ur(this.MV.value),!c)){PO(this,"请填写修改理由");return}}"title"===this.as&&-1===a.indexOf("?")&&-1===a.indexOf("？")?PO(this,"还没有输入问号"):("none"===c&&(c=""),this.params=["id\x3d"+this.qa+"\x26reason\x3d"+(0,window.encodeURIComponent)(c)+"\x26question_id\x3d"+this.qa],this.dispatchEvent("change"),LO.v.yh.call(this,a),PO(this,"* 必选","zg-gray-normal"),this.Wp=!0)};
z.e.kg=function(){return this.Qd&&this.fV?(0,z.Nr)(z.pp(this.Ra.value)):LO.v.kg.call(this)};z.e.bh=function(){(0,window.$)(window).on("beforeunload.EditorWithReason",(0,z.t)(function(){return"你对问题的修改还未保存，确认离开该页面吗？"},this))};z.e.pi=function(){(0,window.$)(window).off("beforeunload.EditorWithReason")};z.e.aj=function(){LO.v.aj.call(this);this.pi()};z.e.Gg=function(){LO.v.Gg.call(this);this.bh()};z.y(QO,z.R);QO.prototype.L=function(a,b){QO.v.L.call(this,a,b);this.o().g(a,"beforeexpand",this.GR)};QO.prototype.GR=function(a){var b=a.target;z.ch(this,function(a){b!==a&&a.fd()&&a.Rc(!1)})};QO.prototype.H=function(){this.o().H();QO.v.H.call(this)};z.y(RO,z.V);RO.prototype.C=function(){RO.v.C.call(this);z.Uj(this,490);(0,window.$)(this.m()).addClass("user-guiding-dialog")};z.y(VO,z.R);z.e=VO.prototype;z.e.B=function(){VO.v.B.call(this);this.h=z.O("div",{className:"question-invite-panel"})};z.e.C=function(){VO.v.C.call(this);this.R=(0,window.$)(this.m())};z.e.D=function(){VO.v.D.call(this);this.ba&&this.ba.H();delete this.ba;delete this.mm;delete this.hk};z.e.fd=function(){return this.tb};z.e.Qh=function(){this.Rc(!this.tb)};
z.e.Rc=function(a){a!==this.fd()&&(this.dispatchEvent(a?"beforeexpand":"beforecollapse"),a&&!this.Bc&&WO(this),this.tb=a,this.R.toggle(a),this.dispatchEvent(a?"expand":"collapse"))};
z.e.pz=function(a){var b=this,c=(0,z.ew)(KR),d=new z.Xs(a,{ue:20,source:"/question/ac/invite-people?question_token\x3d"+this.Lp,Pi:this.m(),placeholder:"搜索你想邀请的人",kd:function(a,b,d){d.innerHTML=c(a.data)},filter:function(a){return z.lb(a,function(a){return!aP(b,a.member_hash)})},select:function(){return""},format:function(a){return a}});d.Vi=function(){return!1};var f=d.N;f.className="suggest-persons search";f.Fh="person";f.Eg(!1);var g=(0,window.$)(".suggest-persons-wrapper",this.h),h=z.Rj(function(){(0,window.$)(f.m()).on("click",
"button",window.$.proxy(b.HG,b))}),k=(0,window.$)(".invite-title .spinner-gray");(0,window.$)(".search-input",this.h).on("input",function(){k.css("display","inline-block")});d.addEventListener("show",function(){k.hide();var a=f.m();g.hide();(0,window.$)(".no-result-tips",b.h).remove();var c=(0,window.$)(".person",a);5<c.length&&(c.hide().slice(0,5).show(),(0,window.$)('\x3ca class\x3d"js-more" href\x3d"#"\x3e更多搜索结果\x3c/a\x3e').appendTo(a).one("click",function(){c.show();(0,window.$)(this).remove();
return!1}));h()});d.addEventListener("hide",function(){k.hide();a.value.length?(0,window.$)(".no-result-tips",b.h).length||(g.hide(),(0,window.$)('\x3cspan class\x3d"no-result-tips"\x3e没有找到你想邀请的人\x3c/span\x3e').appendTo(b.h)):(g.show(),(0,window.$)(".no-result-tips",b.h).remove())});d.addEventListener("dismiss",function(){(0,window.$)(".no-result-tips",b.h).remove();g.show()});this.ba=d};z.e.RT=function(){this.fd()?(this.ba&&this.ba.H(),WO(this)):this.Bc=!1};z.e.yQ=function(){z.Cp(0)};
z.e.HG=z.Lq(function(a){var b=a.target,c=this.KJ((0,window.$)(b).parents(".person"));this.mm&&"pending"===this.mm.state()&&this.mm.abort();a=b.getAttribute("data-type");var d=z.W.has(b,this.xH),f=(0,z.t)(function(a){a?(cP(this,b,!0),this.hk.unshift(c),eP(this),bP(this,c.id,!0),this.AO()):(cP(this,b,!1),dP(this,c.id),bP(this,c.id,!1))},this);d?(this.mm=wM(this.Lp,c.id),f(!1)):(this.mm=window.$.post("/question/askpeople",{qid:this.Lp,uid:c.id,_source_type:a,op:"add"}).done(function(a){a.r&&(z.X.message(a.msg),
f(!1))}),f(!0),$O(this,a))},!0);z.e.zQ=function(a){a=a.target.getAttribute("data-uid");wM(this.Lp,a);bP(this,a,!1);dP(this,a)};z.e.AO=z.Rj(function(){z.T.Ch&&window.$.post("/question/popup",{action:"invite",question_token:this.Lp},function(a){a&&UO(new RO,a)})});z.e.KJ=function(a){var b=(0,window.$)(".zm-item-link-avatar",a),c=(0,window.$)(".zg-link",a);return{id:String((0,window.$)("button",a).data("uid")),avatar:(0,window.$)("img",b).attr("src"),fullname:c.text(),url_token:b.attr("href").split("/").slice(-1)[0]}};
var XO='\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cdiv class\x3d"spinner"\x3e正在加载，请稍等 \x3ci class\x3d"spinner-gray"\x3e\x3c/i\x3e\x3c/div\x3e',gP='你已邀请 \x3cspan class\x3d"invited-shortlist"\x3e\x3c% helper.each(persons.slice(0, 2), function(person, i, sliced) { %\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray" target\x3d"_blank"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3c%\x3d i !\x3d\x3d sliced.length - 1 ? "、" : ""%\x3e\x3c% }); %\x3e\x3c%\x3dhelper.fullList()%\x3e\x3c/span\x3e\x3c% if (persons.length \x3e 2) { %\x3e 等 \x3c%\x3dpersons.length%\x3e 人 \x3c% } %\x3e\x3c% if (persons.length \x3c maxInvites) { %\x3e ，还可以邀请 \x3c%\x3dmaxInvites - persons.length%\x3e 人\x3c% } %\x3e',
fP='\x3cdiv class\x3d"invited-hovercard"\x3e\x3ci class\x3d"icon icon-spike"\x3e\x3c/i\x3e\x3cul class\x3d"invited-fulllist"\x3e\x3c% helper.each(persons, function(person, i) { %\x3e\x3cli\x3e\x3ca title\x3d"\x3c%-person.fullname%\x3e" class\x3d"zm-item-link-avatar" href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" target\x3d"_blank"\x3e\x3cimg src\x3d"\x3c%\x3dperson.avatar%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3ca href\x3d"/people/\x3c%\x3dperson.url_token%\x3e" class\x3d"zg-link-gray" title\x3d"\x3c%-person.fullname%\x3e" target\x3d"_blank"\x3e\x3c%\x3dperson.fullname%\x3e\x3c/a\x3e\x3cbutton class\x3d"cancel-button zg-link-btn zg-link-gray" data-uid\x3d"\x3c%\x3dperson.id%\x3e"\x3e收回邀请\x3c/button\x3e\x3c/li\x3e\x3c% }) %\x3e\x3c/ul\x3e\x3c/div\x3e',
KR='\x3ca data-hovercard\x3d"p$t$\x3c%\x3durl_token%\x3e" class\x3d"zm-item-link-avatar" href\x3d"\x3c%\x3dprofile_url%\x3e" title\x3d"\x3c%\x3dfullname%\x3e" target\x3d"_blank"\x3e\x3cimg src\x3d"\x3c%\x3davatar_path%\x3e" class\x3d"zm-item-img-avatar"\x3e\x3c/a\x3e\x3cdiv class\x3d"content"\x3e\x3cbutton class\x3d"invite-button zg-btn zg-btn-green" data-uid\x3d"\x3c%\x3dmember_hash%\x3e" data-type\x3d"search"\x3e邀请回答\x3c/button\x3e\x3cdiv class\x3d"describe"\x3e\x3ca data-hovercard\x3d"p$t$\x3c%\x3durl_token%\x3e" href\x3d"\x3c%\x3dprofile_url%\x3e" class\x3d"zg-link author-link" target\x3d"_blank"\x3e\x3c%\x3dhighlighted_fullname%\x3e\x3c/a\x3e\x3c% if (is_org) { %\x3e\x3cspan class\x3d"OrgIcon sprite-global-icon-org-14" data-tooltip\x3d"s$b$已认证的机构"\x3e\x3c/span\x3e\x3c% } %\x3e\x3c% if (badge) { %\x3e\x3c% if (badge.identity \x26\x26 badge.best_answerer) { %\x3e\x3ci class\x3d"icon icon-badge-id-an icon-badge" data-tooltip\x3d"s$b$已认证的个人 · 优秀回答者"\x3e\x3c/i\x3e\x3c% } else if (badge.identity) { %\x3e\x3ci class\x3d"icon icon-badge-identity icon-badge" data-tooltip\x3d"s$b$已认证的个人"\x3e\x3c/i\x3e\x3c% } else if (badge.best_answerer) { %\x3e\x3ci class\x3d"icon icon-badge-best_answerer icon-badge" data-tooltip\x3d"s$b$优秀回答者"\x3e\x3c/i\x3e\x3c% } %\x3e\x3c% } %\x3e\x3c% if (badge) { %\x3e\x3c% if (badge.identity) { %\x3e，\x3cspan class\x3d"badge-summary"\x3e\x3c%-badge.identity.description%\x3e\x3c/span\x3e\x3c% } else if (badge.best_answerer) { %\x3e，\x3cspan class\x3d"badge-summary"\x3e\x3c%-badge.best_answerer.description%\x3e\x3c/span\x3e\x3c% } %\x3e\x3c% } %\x3e\x3c% if (headline) { %\x3e \x3c% if (!badge || !badge.identity \x26\x26 !badge.best_answerer) { %\x3e ，\x3c% } %\x3e\x3cspan class\x3d"bio" title\x3d"\x3c%-headline%\x3e"\x3e\x3c%\x3dhighlighted_headline%\x3e\x3c/span\x3e \x3c% } %\x3e\x3c/div\x3e\x3cdiv class\x3d"reason"\x3e\x3c% if (detailed_info) {%\x3e \x3c%\x3ddetailed_info%\x3e\x3c% } %\x3e\x3c% if (topic["answer_num"]) {%\x3e在 \x3ca href\x3d"\x3c%\x3dprofile_url%\x3e/topic/\x3c%\x3dtopic["url_token"]%\x3e/answers" data-hovercard\x3d"t$b$\x3c%\x3dtopic["url_token"]%\x3e" data-token\x3d"\x3c%\x3dtopic["url_token"]%\x3e" data-topicid\x3d"\x3c%\x3dtopic["id"]%\x3e" target\x3d"_blank"\x3e \x3c%\x3dtopic["name"]%\x3e \x3c/a\x3e 话题下有 \x3c%\x3dtopic["answer_num"]%\x3e 个回答 \x3c% } %\x3e\x3c/div\x3e\x3c/div\x3e';z.y(hP,z.R);z.e=hP.prototype;
z.e.C=function(){var a=this;hP.v.C.call(this);this.o().g(this.h,"click",this.GA);iP(this);this.o().g(this,"click!",function(a){"comment"===a.namespace&&a.Gc.fill("label","question")});this.g("trackRequested",function(a){a.label="question_box";z.yi(a)});z.yo(this,{module:"QuestionItem"},function(){return{card:{card_type:"Content",content:{type:"Question",token:a.data.fb.toString()}}}});"#showWechatShareTip"===window.location.hash&&window.location.pathname.match(/\/question\/([\d]+)$/)&&((0,z.Ni)(this,
{action:"Share",element:"QRCode"},{share:{type:"Wechat"}}),z.yi({category:"share",action:"scan_share_question_to_wechat_start"}),window.location.hash="")};z.e.Oo=function(){var a=this.h.querySelector("a[name\x3dreport-question]");if(a){var b=this;a.addEventListener("click",function(){(new z.LB({type:"question",id:b.data.qa})).render()})}};
z.e.fk=function(){var a=(0,window.$)('a[name\x3d"share"]',this.m()).get(0);a&&z.fD(a,"question",this.data.fb,window.location.protocol+"//"+window.location.host+"/question/"+this.data.fb).Jb(this)};
z.e.GA=function(a){var b=(a=z.Gr(this.h,a.target))&&a.name;if(b)switch(b){case "addcomment":"添加评论"===window.$.trim((0,window.$)(a).text())?z.Lq(this.xG).call(this,a):this.xG(a);break;case "remove":lP(this);break;case "orgLock":mP(this);break;case "orgUnlock":nP(this);break;case "admin":kP(this,a);break;case "invite":this.Hz.Qh(),this.dispatchEvent(new z.FB("click!invitation",{category:"invitation",action:(this.Hz.fd()?"show":"hide")+"_ask_to_answer_card",label:"?",value:this.data.Ie}))}};
z.e.xG=function(a){this.Ia.Qh();this.Ia.fd()&&this.Ia.cj("view_comments",(0,window.parseInt)(z.pf(a),10)||0)};z.e.QO=function(a){this.CD.Y(a.msg.action);this.CD.bq(a.msg.caption)};z.y(oP,z.Vv);z.e=oP.prototype;z.e.C=function(){oP.v.C.call(this);this.ready(function(){if(this.Ra&&this.Ra.on)this.Ra.on("load",this.sz,!1,this)})};
z.e.sz=function(){var a=new jO(this,!0);z.zc(this,a);this.o().g(a,"saveContent",function(){var a=!this.Qd&&this.Ra.Wb.FullScreenPlugin;a&&dM(a);(0,window.$)(this.Jr).text("保存草稿并离开");(0,window.$)(this.h).find(".zu-edit-button span").text("修改（有未发布的编辑草稿）")}).g(a,"clearContent",function(){(0,window.$)(this.Jr).text("取消");(0,window.$)(this.h).find(".zu-edit-button span").text("修改")});var b=fM(this);this.o().g(b,"focus",function(){a.Zd.start()}).g(b,"blur",function(){mO(a);this.TO!==this.kg()&&a.Ru()}).g(this,
"saveSuccess",function(){delete z.hm.ee;mO(a);pO(a)}).g(this,"save_unchanged",function(){delete z.hm.ee;mO(a);pO(a)});a.w(this.hc);z.hm.ee&&z.hm.ee[0]&&(0,window.$)(this.Jr).text("保存草稿并离开")};
z.e.xl=function(){this.hc=z.O("div","zm-command",[(0,window.$)('\x3cdiv class\x3d"draft-controls zg-left"\x3e\x3cspan class\x3d"draft-saved-info"\x3e\x3ca class\x3d"draft-clear-button goog-inline-block" href\x3d"#" data-tooltip\x3d"s$b$取消编辑并删除草稿"\x3e\x3ci class\x3d"zg-icon zg-icon-bin"\x3e\x3c/i\x3e\x3cspan class\x3d"hide-text"\x3e清除草稿\x3c/span\x3e\x3c/a\x3e\x3cspan class\x3d"draft-saved-time"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e')[0],this.Jr=z.O("a",{"class":"zm-command-cancel",name:"cancel",
href:"#"},"取消"),this.Qn=z.O("a",{"class":"zg-r3px zg-btn-blue",name:"save",href:"#"},"发布")]);this.Pb.appendChild(this.hc)};z.e.fy=function(){var a=this;window.$.get("/draft/get",{qid:this.Yp},function(b){b.r||(a.Zu(b.msg),a.TO=b.msg)})};z.e.oG=function(){var a=[];if(!this.disabled){var b="修改";z.hm.ee&&z.hm.ee[0]&&(b="修改（有未发布的编辑草稿）");a.push('\x3ca href\x3d"javascript:;" class\x3d"zu-edit-button" name\x3d"edit"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e\x3cspan\x3e'+b+"\x3c/span\x3e\x3c/a\x3e")}return a.join("")};z.y(pP,z.xD);var qP={qa:null,bb:null,sF:!1,xx:z.S};z.e=pP.prototype;z.e.Fi=function(){pP.v.Fi.call(this,{SE:".zm-editable-content"})};z.e.OK=function(){if(z.xm||this.options.sF)return!1;var a=(0,window.$)(".js-collapse-body",this.h)[0];return!!a&&1<a.offsetHeight/z.bn.size.height};z.e.xv=function(){z.Ai("view_answer","click_expand_answer","answer_box_expand_answer")};z.e.wv=function(){z.Ai("view_answer","click_collapse_answer","answer_box_collapse_answer")};z.e.uI=function(){this.Rt()};
z.e.C=function(){var a=this;pP.v.C.call(this);rP(this);this.ef=z.N("zm-item-answer-author-info",this.h);this.Ah&&this.ef&&(this.CJ=(this.vb=z.Ua(this.ef.innerHTML,"匿名用户"))?null:this.ef.innerHTML.replace(/src=".+?"/g,'src\x3d"'+z.T[2]+'"'),this.Xu(this.xx.vb),this.o().g(this.ef,"click",function(a){"cancel-anon"===a.target.name&&z.Cp(!1)}));this.cc();this.g("trackRequested",function(b){b.label="answer_box";b.value=(0,window.$)(a.h).index(".zm-item-answer")+1;z.yi(b)});"#showWechatShareTip"===window.location.hash&&
window.location.pathname.match(/\/question\/([\d]+)\/answer\/([\d]+)$/)&&((0,z.Ni)(this,{action:"Share",element:"QRCode"},{share:{type:"Wechat"}}),z.yi({category:"share",action:"scan_share_answer_to_wechat_start"}),window.location.hash="")};
z.e.cc=function(){this.ef&&this.o().g(this.ef,"click",this.Va);this.Ah&&(this.bO=z.T);this.o().g(z.Ep,"anon_change",function(a){this.Ah?this.Xu(a.vb):this.hj&&this.aM&&this.hj.getState()===z.pD.Og&&z.uD(this.aM)});sP(this);(0,window.$)(this.h).on("focusin focusout",function(a){(0,window.$)(this).toggleClass("focusin","focusin"===a.type)})};z.e.eh=function(a){return z.Gr(this.h,a)};
z.e.Va=function(a){var b=this.eh(a.target);if(b=b&&b.name)"edit"===b?(b=cO(),this.Lw||(eO(b),this.o().g(b,"change",this.AA).g(b,"trackRequested",function(a){a.label="answer_box_edit_topic_experience";z.yi(a)})),this.Lw=!0,gO(b),z.yi({category:"edit_profile",action:"click_edit_topic_experience_start",label:"answer_box_edit_topic_experience",attributes:{text:(0,window.$)(a.target).text()}})):"complex"===b&&(a=z.N("zm-item-answer-summary",this.h),b=z.N("zm-item-rich-text",this.h),z.Q(a,!1),z.Q(b,!0))};
z.e.AA=function(){var a=cO().qy()||"",b=z.N("bio",this.ef);if(!b){var c=z.N("author-link",this.ef),b=z.O("span","bio");z.cf(b,c)}a&&(a="，"+JM(a),a=z.Ma(a));b.title=a;b.innerHTML=a};
z.e.Xu=function(a){if(a)this.ef.innerHTML='匿名用户\x3ca class\x3d"zg-link-gray cancel-anon" href\x3d"#" name\x3d"cancel-anon"\x3e取消匿名\x3c/a\x3e';else if(a=z.T.gd?"":'\x3ca name\x3d"edit" class\x3d"zu-edit-button" href\x3d"#"\x3e\x3ci class\x3d"zu-edit-button-icon"\x3e\x3c/i\x3e修改话题经验\x3c/a\x3e',this.CJ)this.ef.innerHTML=this.CJ+a;else{a=[];var b=z.T;a.push(1===b||0===b?"匿名用户":['\x3ca data-hovercard\x3d"p$t$',b[1],'" href\x3d"/people/',b[1],'" title\x3d"'+b[0]+'" class\x3d"','zm-item-link-avatar"\x3e',
'\x3cimg class\x3d"zm-item-img-avatar" src\x3d"'+b[2]+'" /\x3e',"\x3c/a\x3e"].join(""));a.push(xM(z.T,"zm-item-answer-creator"));this.ef.innerHTML=a.join("")}};z.e.Xj=function(){var a=this,b=(0,window.$)(this.m());b.slideUp(function(){a.Ah?(a.Wo=!0,a.jw="set_delete",a.dispatchEvent("change")):(a.H(),b.remove())})};z.e.ma=function(a){this.dispatchEvent(Object.assign({type:"trackRequested"},a))};z.y(uP,z.R);z.e=uP.prototype;z.e.init=function(){z.CG.L(this);this.w(window.document.body)};z.e.C=function(){uP.v.C.call(this);wP(this);this.wp=new MN;this.o().g(this.wp,"change",this.UA);this.wp.init();this.LK();var a=z.L("zh-question-meta-wrap");a&&(this.Cu=new hP(this.data),this.L(this.Cu),this.Cu.w(a),this.Cu.Jb(this));vP(this);(a=z.um.topic_errors_info)&&z.Ln(a);this.zz()};
z.e.LK=function(){this.data.fb=z.S.fb;this.Fi();this.Nx&&(xP(this),yP(this));FP(this);(this.gx=z.L("zg-question-suggested-topics"))&&this.o().g(this.gx,"click",this.OT);this.Qo();this.o().g(window,"hashchange",function(a){a=a.lc;a.oldURL&&"writing"===a.oldURL.split("#")[1]||KP(this)});BP(this);IP(this);EP(this);KP(this,null);AP(this);z.im&&(0,window.setTimeout)(function(){window.location.href=z.im},5E3)};
z.e.zz=function(){this.cK?(0,z.DG)("answer",this.bi[this.cK].fb,"read"):(0,z.DG)("question",this.data.fb,"read");this.o().g(this,["click!","show!"],function(a){"comment"===a.namespace&&a.Gc.fill("category","question_answer").fill("label","question_answer");"invitation"===a.namespace&&a.Gc.fill("label","question_page")})};
z.e.UA=function(){this.VR=!0;this.Rk=(0,window.$)(this.wp.HT)[0];z.cf(this.Rk,z.N("zu-top"));z.Q(this.Rk,!0);z.tm.Ab||(this.Nj=new z.pv,this.Nj.w(this.Rk),hM(this.Nj));this.o().g(this.Rk,"click",this.EG);KP(this)};z.e.Fi=function(){this.Nx?zP(this,this.lS):zP(this,z.q)};
z.e.lS=function(a){"close"===z.S.status||z.S.Xo||(a=a.target.m(),this.Ub=new LO(this.data.qa,"/question/detail","content",!0,null,600),MO(this.Ub,AM(this.data.Ch)),z.N("zm-editable-content",a).innerHTML&&(this.Ub.Wp=!0),this.Ub.w(a),this.o().g(this.Ub,"click_edit",function(){z.Y.yb("ga_question_supplement_edit_start")}),this.o().g(this.Ub,"cancel_edit",function(){z.Y.yb("ga_question_supplement_edit_cancel")}),this.o().g(this.Ub,"save_changed",function(){z.Y.yb("ga_question_supplement_edit_save_changed")}),
this.o().g(this.Ub,"save_unchanged",function(){z.Y.yb("ga_question_supplement_edit_save_unchanged")}),this.Ub.addEventListener("beforeedit",z.cE({Np:!0})))};
z.e.EG=function(a){if("close"===a.target.name){if(this.Nj&&(z.sv(this.Nj),z.rv(this.Nj,!1),window.history.replaceState)){a=new z.qh(window.location.href);var b=a.pe();b.remove("q");b.remove("psq");window.history.replaceState({},"",a.Xe+"?"+b.toString())}z.Q(this.Rk,!1);z.Q(this.Du,!1)}else if("A"===a.target.tagName&&"zh-question-suggest-reask"===a.target.id&&(z.Q(this.Du,!1),z.Zv.aa().show()),b="a"===(0,window.$)(a.target).prop("tagName").toLowerCase()?a.target:this.eh(a.target,"A"))a.preventDefault(),
a.stopPropagation(),a=b.getAttribute("data-source")||b.href,b=a.indexOf("#"),a=0>b?null:a.substr(b+1),KP(this,a?(0,window.decodeURIComponent)(a):a)};z.e.oR=function(){var a=this.$h,b=a.m(),c=a.He.Za()[0];z.Q(b,!1);c=z.Xe((0,z.$a)(c));z.bf(c,b);this.bi[a.bb]=null;this.sr=z.lb(this.sr,function(b){return b!==a.bb},this);var d=999;this.Cw=z.lb(this.Cw,function(b){b.aid===a.bb&&(d=b.vote);return b.aid!==a.bb},this);z.P(b);a.H();CP(this,c,d)};
z.e.zA=function(a){a=a.target;if(a instanceof pP){var b=a.m();switch(a.jw){case "collap":this.Mn.appendChild(b);z.W.add(b,"zm-item-collapsed");this.data.Ie--;AP(this);break;case "cancel_collap":this.ur.appendChild(b);z.W.remove(b,"zm-item-collapsed");DP(this,b);this.data.Ie++;AP(this);break;case "set_delete":EP(this);this.data.Ie--;AP(this);break;case "cancel_delete":DP(this,this.bi[this.Ki].m()),EP(this),this.data.Ie++,AP(this)}}};z.e.hG=function(a){return this.bi[a]};
z.e.rX=function(a){(a=z.Gr(this.ki,a.target))&&a.name&&("expand"===a.name?(this.LO||HP(this),GP(this,!0)):GP(this,!1))};z.e.YT=function(){var a=this.bi[this.Ki],b;a?(tP(a),DP(this,a.m())):(b=this.vk,a=new z.Z(!0),this.o().Aa(a,"success",function(){window.location.href="/question/"+z.S.fb+"/answer/"+b.url_token}),a.ajax("/answer/unremove","aid\x3d"+b.id))};
z.e.PT=function(){var a=this.mb,b=a.vn&&a.vn.checked,c=FO(a),a={modal:!0,title:"确认放弃匿名身份？",content:"你在该问题下的赞同和关注行为将以实名显示。"},d=(0,z.t)(function(){if(!this.xhr||!this.xhr.Ac()){var a=this.mb.kg();if(a){var d=new z.Z(!0),h=new z.wh,k=b?1:0;h.add("id",this.qa).add("content",a).add("anon",k).add("copyright_status",c);d.on("success",function(){z.S.vb!==k&&(z.S.vb=k,z.Ep.dispatchEvent(new z.Dp(k)));var a=z.Tn(this.xhr);a?a.r?z.X.alert(a.msg):(a=z.Xe((0,z.$a)(a.msg[0])),this.ur.appendChild(a),CP(this,a,this.sr.length),
z.zr(a),EP(this),mO(this.mb.BF),pO(this.mb.BF),this.mb.H(),z.S.vb||(new KO(this.data.fb,this.bi[this.Ki].fb)).render((0,window.$)(".zu-main-content-inner").get(0)),this.data.Ie++,AP(this)):z.X.message("网络异常")},!1,this);d.ajax("/answer/add",h.toString());this.xhr=d}}},this);z.S.vb&&!b?z.X.confirm(a,function(a){a&&d()}):d()};z.e.eh=function(){};
z.e.OT=function(a){if((a=this.eh(a.target))&&a.name){var b=a.name;"close"===b?z.Q(this.gx,!1):"addtag"===b&&(this.Ka.Fe(a.id.split("-")[1],a.innerHTML),z.Q(a,!1))}};z.e.Qo=function(){this.TB=new UN(this.qa);this.TB.init()};z.y(LP,uP);z.e=LP.prototype;z.e.LK=function(){(this.gs=z.L("zh-single-answer-disable-wrap"))&&this.o().g(this.gs,"click",this.oW);OP(this);this.Qo();RP();this.Fi();var a=(0,window.$)("#zh-question-answer-collections \x3e .zh-general-list").get(0);if(a){var b=new z.Dl({use:["autoload","nodeSource"]});this.L(b);b.w(a)}NP();MP(this)};z.e.zz=function(){this.o().g(this,["click!","show!"],function(a){"invitation"===a.namespace&&a.Gc.fill("label","answer_page")});LP.v.zz.call(this)};
z.e.oW=function(a){a.target&&a.target.name&&tP(this.Fb)};z.e.hG=function(a){if(this.Fb.bb===a)return this.Fb};z.e.cO='\x3ch3\x3e关于作者\x3c/h3\x3e\x3c% if (author) { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"/people/\x3c%\x3d author.url_token %\x3e" tabindex\x3d"-1"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"\x3c%\x3d author.avatar_path.replace("_s.","_m.") %\x3e"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e\x3ca href\x3d"/people/\x3c%\x3d author.url_token %\x3e"\x3e\x3c%\x3d author.fullname %\x3e\x3c/a\x3e\x3c/h2\x3e\x3cdiv class\x3d"zg-gray-normal"\x3e\x3c%\x3d author.headline || "" %\x3e\x3c/div\x3e\x3c/div\x3e\x3c% } else { %\x3e\x3ca class\x3d"zm-list-avatar-link" href\x3d"javascript:;"\x3e\x3cimg class\x3d"zm-list-avatar-medium" src\x3d"http://img.zhihu.dev:4080/66/6b/666b0abfc_m.jpg"/\x3e\x3c/a\x3e\x3cdiv class\x3d"zm-list-content-medium"\x3e\x3ch2 class\x3d"zm-list-content-title"\x3e匿名用户\x3c/h2\x3e\x3c/div\x3e\x3c% } %\x3e';
z.e.Qo=function(){this.TB=new UN(this.qa,this.Fb);this.TB.init();var a=z.L("js-sidebar-author-info");a&&(new RM(a)).init();var b=(0,window.$)("#react-warrant-sidelist");b.length&&z.ex("AnswerWarrant").then(function(a){return a.renderSide(b)})};z.e.zA=function(a){a=a.target;if(a instanceof pP)switch(a.jw){case "collap":z.W.add(a.m(),"zm-item-collapsed");break;case "cancel_collap":z.W.remove(a.m(),"zm-item-collapsed");break;case "set_delete":case "cancel_delete":QP(this),window.location.reload()}};SP.prototype={Oc:function(a){if(a)this.BE.push(a);else{var b={current:this.lf,Do:this.Do(),bt:this.bt()};z.A(this.BE,function(a){(0,window.setTimeout)(function(){a.call(null,b)})})}},remove:function(a){a=this.items.indexOf(a);-1!==a&&(this.items.splice(a,1),this.lp=Math.ceil(this.items.length/this.Bm),this.Oc());return a},Do:function(){return this.lf<this.lp},bt:function(){return 1!==this.lf},next:function(){this.Do()&&(this.lf+=1,this.Oc())},prev:function(){this.bt()&&(--this.lf,this.Oc())},random:function(a){if(2<=
this.lp){for(var b=[],c=1;c<this.lp+1;c++)b.push(c);0!==a&&z.sb(b,this.lf);this.lf=b[Math.floor(Math.random()*b.length)]}else a===this.Bm&&this.items.reverse(),this.lf=1;this.Oc();return this.items.length>this.Bm}};z.n(WP,z.R);WP.prototype.C=function(){z.R.prototype.C.call(this);this.rb=(0,window.$)(this.m());this.Zq=this.rb.find(".js-pager");this.gb=this.rb.find(".js-list");this.tM=this.rb.find(".js-hidden-list");this.ly=(this.RK=!!this.rb.closest(".zu-main-sidebar").length)?"zg-follow":"zg-btn-follow";this.WX=this.RK?"zg-unfollow":"zg-btn-unfollow";XP(this);$P(this)};var aQ="follow_topic",bQ="unfollow_topic",YP=6;z.n(cQ,z.R);z.e=cQ.prototype;z.e.init=function(){this.w((0,window.$)(".js-topic-feed-page")[0])};
z.e.C=function(){z.R.prototype.C.call(this);this.rb=(0,window.$)(this.m());this.KS=!this.rb.find(eQ).length;this.Uh=this.rb.find(".js-topic-cat-main");this.ln=this.rb.find(".js-topic-title");this.Wq=this.rb.find(".js-feed-switcher");var a=(0,window.$)(".topic-recommend");if(a.length){var b=new WP;b.w(a[0]);this.o().g(b,aQ,this.YQ).g(b,bQ,this.LR)}this.gb=this.rb.find(".zh-general-list");this.gb.length&&nQ(this);dQ(this);hQ(this);this.Az()};
z.e.TG=function(a){var b=(0,window.decodeURIComponent)(window.location.hash.slice(1)),c=this.Uh.find(eQ),b=mQ(c,b);!b.length&&a.data?(b=c.eq(0),this.rb.find(eQ+"."+LR).removeClass(LR),b.addClass(LR),this.ln.show(),this.ND(),window.location.hash=""):b.length&&(a=b.data("id"),this.gb.hide(),this.ln.hide(),c=b,this.rb.find(eQ+"."+LR).removeClass(LR),c.addClass(LR),c=this.Wq.find("a"),c.removeClass(iQ),c.eq(0).addClass(iQ),jQ(this,a),oQ(this,a,b))};
z.e.YQ=function(a){kQ(this,1);a=a.data;this.Uh.find(".zm-topic-cat-more").length||this.Uh.append(gQ(this,a))};z.e.LR=function(a){kQ(this,-1);this.Uh.find('li[data-id\x3d"'+a.data.id+'"]').remove()};z.e.ND=function(){if(!this.gb.show().children().length)return this.gb.html('\x3cp class\x3d"zg-gray-normal" style\x3d"text-align:center;line-height:4;"\x3e该话题暂无动态\x3c/p\x3e')};
z.e.Az=function(){function a(a,c){var d={action:a,category:"topic"};c&&(d.attributes=c);z.yi(d)}this.rb.on("click",".js-topic-cat-main .zm-topic-cat-item",function(b){a("click_topic",{topic_id:(0,window.$)(b.currentTarget).data("id")})}).on("click",".topic-recommend .zg-follow",function(){a("click_follow_topic")}).on("click",".topic-recommend .js-pager",function(){a("click_change_topics")}).on("click",".js-topic-more a",function(){a("click_expand")}).on("click",".js-topic-all a",function(){a("click_read_more")})};
var LR="current",iQ="current",eQ=".zm-topic-cat-item",fQ=100,pQ='\x3cli class\x3d"zm-topic-cat-item" data-id\x3d"\x3c%\x3d id %\x3e" data-href\x3d"/topic/\x3c%\x3d url_token %\x3e"\x3e\x3ca href\x3d"#\x3c%\x3d name %\x3e"\x3e\x3c%\x3d name %\x3e\x3c/a\x3e\x3c/li\x3e';z.y(qQ,z.R);qQ.prototype.init=function(){z.CG.L(this);this.w(window.document.body)};qQ.prototype.C=function(){qQ.v.C.call(this);this.vz("zh-question-followers-list-wrap")};qQ.prototype.vz=function(a){if(a=z.L(a)){var b=new z.Dl;this.L(b);b.use("locationSource");b.w(a)}};z.y(rQ,z.R);rQ.prototype.init=function(){z.CG.L(this);this.w(window.document.body);this.ot();tQ(this);uQ(this);sQ()};
rQ.prototype.ot=function(){function a(a){if((0,window.$)(a).hasClass("article-item"))return new z.FD;var b=new z.R;(0,window.$)(".answer-item",a).each(function(){var a=new z.xD;b.L(a);a.w(this)});return b}var b=this;(0,window.$)("[data-paging]").each(function(){var c=new z.Dl({use:["dataPagingSource"]});c.use("childConstructor",{factory:a});var d=(0,window.$)(this).data("navigable");d&&c.use("shortcut",d);b.L(c);c.w(this)});(0,window.$)(".column[data-entry-url]").click(function(a){var b=(0,window.$)(a.currentTarget).data("entry-url");
b&&!a.target.href&&window.open(b)})};z.y(vQ,z.Yj);vQ.prototype.init=function(){var a=z.L("home-suggest-block");a&&(this.h=a,a=z.L("home-suggest-close-button"),this.o().Aa(a,"click",function(){(new z.Z(!0)).ajax("/option","key\x3dno_show_lookup\x26value\x3d1");z.Q(this.h,!1)}),a=z.L("home-suggest-refresh-button"),this.o().g(a,"click",this.zU),this.Nt=z.L("home-suggest-list"),yQ(this))};vQ.prototype.zU=function(){wQ(this);return!0};
vQ.prototype.aU=function(a){a.r||((a=a.msg)&&z.ma(a)&&a.length?(this.fz=[],this.oa=a,wQ(this)):this.Nt.innerHTML="")};z.n(zQ,z.R);zQ.prototype.W=function(a){z.R.prototype.W.call(this,a);this.EI=AQ(a);this.Of=z.dn.hM(this.h)};zQ.prototype.mc=function(){this.Dp()};zQ.prototype.Dp=function(){this.dispatchEvent("Ignore")};z.n(BQ,zQ);BQ.prototype.C=function(){zQ.prototype.C.call(this);this.ED=this.EI.actionCardType;switch(this.ED){case "popular_topics":CQ(this);break;case "validation_reminder":DQ(this);break;case "headline_reminder":EQ(this);break;case "avatar_reminder":FQ(this);break;case "suggested_question":this.entryType="question",this.sb=this.EI.questionId,(0,window.$)(".js-toggleCommentBox",this.m()).on("click",this.RG.bind(this))}};
BQ.prototype.Dp=function(){zQ.prototype.Dp.call(this);window.$.post("/actioncard/uninterest",{type:this.ED})};BQ.prototype.Li=function(){var a=(0,window.$)(".profile-reminder-template",this.h).html(),a=(0,window.$)(a),b=z.T.aH;b&&a.find(".js-headline").text(b);a.find(".js-avatar-wrapper .avatar").attr({src:z.T.Rd("xs"),srcset:z.T.Rd("l")+" 2x"});(0,window.$)(this.h).closest(".js-inner").replaceWith(a)};BQ.prototype.sy=function(){return(0,window.$)(".js-contentActions",this.m())[0]};
z.Ba(BQ.prototype,z.QG);z.n(GQ,z.UC);z.e=GQ.prototype;z.e.W=function(a){z.UC.prototype.W.call(this,a);HQ(this)};
z.e.C=function(){var a=this;z.UC.prototype.C.call(this);this.Bz();IQ(this);this.XH=this.Le["landing-url"];this.GD=sM(this.XH);var b=this.m();z.yo(this,{module:"AdItem"},function(){return{card:{card_type:"Content",content:a.qo()}}});(0,window.$)(".js-adView",b).each(function(b,d){var f=(0,window.$)(d);z.In(f[0],function(){(0,z.Im)(a,{element:"Card"});z.Ew(f.data("view-track"))})});(0,window.$)("a.js-adLink",b).one("click",function(){var a=(0,window.$)(this),b=a.attr("href");a.attr("href",z.Uo(b,"click",
1))});(0,window.$)(".AdFeed-impression",b).one("load",function(){(0,z.Ni)(a,{action:"Load",element:"Card"})})};z.e.qo=function(){return z.Fw(this.XH)};z.e.mc=function(a){z.Ew(this.Le["close-track"]);(0,z.Ni)(a,{element:"Button",action:"Ignore"},this.GD);this.dispatchEvent("Ignore")};z.e.expand=function(){this.tb||(this.tb=!0,z.W.add(this.h,this.ws),this.dispatchEvent("expand"),this.xv())};z.e.collapse=function(){this.tb&&(this.tb=!1,z.W.remove(this.h,this.ws),this.dispatchEvent("collapse"),this.wv())};
z.e.xv=function(){var a=(0,window.$)(this.m()).index()+1;z.Ai("view_ad","click_expand_answer","feed_ad_vote_up_expand_ad",a)};z.e.wv=function(){var a=(0,window.$)(this.m()).index()+1;z.Ai("view_ad","click_collapse_answer","feed_ad_collapse_ad",a)};z.e.ZU=function(a){window.open(MR,"_blank");var b=Object.assign({link:{url:MR,anchor:"知乎广告介绍"}},this.GD);(0,z.Ni)(a,{element:"Link",action:"OpenUrl"},b)};var MR="/promotion-intro";z.Ba(GQ.prototype,z.RG);z.n(JQ,z.UC);JQ.prototype.mc=function(){window.$.post("/column/uninterest",{id:this.sb});this.dispatchEvent("Ignore")};z.n(KQ,z.UC);KQ.prototype.mc=function(){window.$.post("/roundtable/"+this.ti,{action:"mute"});this.dispatchEvent("Ignore")};z.y(LQ,z.R);z.e=LQ.prototype;z.e.C=function(){LQ.v.C.call(this);this.Cn()};z.e.W=function(a){var b=this;LQ.v.W.call(this,a);MQ(this,a);z.yo(this,{module:"FeedItem",index:""},function(){var a={card_type:"Feed"};b.sd&&b.sd.Fy&&(a.content=b.sd.Fy());return{card:a}})};z.e.Ij=function(){this.Ij=!0};
z.e.Cn=function(a){var b={".js-ignoreContentItem":this.aR,".js-unIgnoreContentItem":this.MR,".js-ignoreRelatedContentItem":this.bR,".js-close":this.Xj,'a[name\x3d"dislike"]':this.FQ,".column[data-entry-url]":this.zG};z.Lb(b,a||{});z.Cb(b,function(a,b){if(z.qa(a))(0,window.$)(this.h).on("click",b,window.$.proxy(a,this))},this)};z.e.Xj=function(){var a=this,b=(0,window.$)(this.m());b.slideUp(function(){a.H();b.remove()})};
z.e.aR=function(){if(this.sd&&this.sd.mc){var a=(0,window.$)(".feed-hide-options",this.h),b=!!a.length;this.sd.mc(b);b&&a.show().siblings().hide()}};z.e.MR=function(){if(this.sd&&this.sd.$y){var a=(0,window.$)(".feed-hide-options",this.h),b=!!a.length;this.sd.$y();b&&a.hide().siblings().show()}};z.e.bR=function(a){this.sd&&this.sd.Ry&&this.sd.Ry(a)};
z.e.FQ=function(){var a=this,b=(0,window.$)(this.h),c=(0,window.$)(".undo-dislike-options",b);if(!c.length&&this.sd&&this.sd.mc)this.sd.mc();else{var d=(0,window.$)(".feed-item-inner",b),f=c.data();c.off().one("click",".revert",function(){d.slideDown();c.slideUp();window.$.post("/topstory/item/uninterest/revert",f)}).one("click",".close",function(){a.Xj()});window.$.post("/topstory/item/uninterest",f).done(function(){d.slideUp();c.slideDown()})}};var XQ=(0,window.$)("#is-topstory").length?"topstory2":"homefeed",PQ=z.D&&!z.F(9),SQ={ac:"actioncard",q:"question",a:"answer",p:"article",c:"column",r:"roundtable",f:"favorites",l:"live"},UQ={question:"question",answer:"question",article:"column",column:"column",roundtable:"roundtable",favorites:"favorites"},VQ={question:"question",answer:"question",article:"article",column:"column",roundtable:"roundtable",favorites:"favorites",live:"live"};
OQ.prototype.nc=function(){this.eD=(0,window.$)('meta[itemprop\x3d"ZReactor"]',this.Th);this.eD.length&&(RQ(this),this.nS())};OQ.prototype.yV=function(){var a=[],b=z.Sr(550,function(){a.length&&(QQ(a),a=[])});return function(c){a.push(c);b()}}();
OQ.prototype.nS=z.Rj(function(){z.G(z.Y,"click_feed_fresh",function(a){QQ({mid:z.um.ga_vars.user_hash,object_type:"btn",object_id:2,object_meta:{load_items:a.data.count},action_type:"click",context:XQ,others:"",time:(0,z.J)()})});z.G(z.Y,"topstory_feed_more",function(){QQ({mid:z.um.ga_vars.user_hash,object_type:"btn",object_id:1,object_meta:{next:(0,window.$)("#js-home-feed-list .feed-item").length+1},action_type:"click",context:XQ,others:"",time:(0,z.J)()})})});z.y(YQ,z.LD);YQ.prototype.yk=function(a){a&&!a.r&&(a=a.msg,a.length?(z.Q(this.Vd,0<a.length),this.offset+=a.length,this.wr(a),z.MD(this,!1),z.OD(this)):this.bl.hide())};var NR={ROUNDTABLE_ADD_RELATED:"roundtable",ARTICLE_VOTE_UP:"post_vote",ARTICLE_CREATE:"post_create",RECOMMENDED:"feed_recommended",QUESTION_FOLLOW:"feed_question_follow",QUESTION_CREATE:"feed_question",ANSWER_VOTE_UP:"feed_answer_vote",ANSWER_CREATE:"feed_answer_answer"};
YQ.prototype.JR=function(a){var b=a.currentTarget.h.getAttribute("data-feedtype"),b=NR[b];"comment"===a.namespace&&b&&a.Gc.fill("category","feed").fill("label",b)};YQ.prototype.gu=function(a){var b=NQ(a);b.Ij();this.L(b);this.o().g(b,"click!",this.JR);b.w(a);new OQ(b);z.In(a,function(){(0,z.Im)(a,{element:"ListItem"})});return b};YQ.prototype.eB=function(a){return{params:a,method:"next"}};z.n(ZQ,z.R);ZQ.prototype.C=function(){z.R.prototype.C.call(this);this.Ga=(0,window.$)(this.m());$Q(this);this.lj=(0,window.$)("#zh-main-feed-fresh-button");this.lj.length&&(this.lj.click(window.$.proxy(this.SV,this)),this.QH?this.o().g(z.Y,"topstory2",this.OI):this.o().g(z.Y,"homefeed",this.OI));bR(this);cR(this)};ZQ.prototype.QU=function(){this.up.th();window.$.get("/node/HomeTopics",function(a){a&&(0,window.$)(a).insertBefore("#zh-home-list-title")})};
ZQ.prototype.OI=function(a){!this.lj.hasClass("disabled")&&(a=(0,window.parseInt)(a.Hf,10))&&(this.xh+=a,this.lj.text((99<this.xh?"99+":this.xh)+" 条新动态").show())};
ZQ.prototype.SV=function(){var a=this;this.lj.text("加载中…").addClass("disabled");var b=this.xh;z.Y.yb({type:"click_feed_fresh",data:{count:b}});window.$.post(this.dP,this.up.eB({action:"live",limit:b,start:this.up.WA(this.up.lb()[0])})).done(function(c){a.lj.removeClass("disabled");a.xh-=b;0>=a.xh&&a.lj.hide();if(c&&c.msg.length){a.Qv||(a.Qv=(0,window.$)('\x3cdiv class\x3d"feed-item-hook feed-divider"\x3e\x3cspan\x3e上次你看到这里\x3c/span\x3e\x3c/div\x3e'));var d=(0,window.$)("."+a.SF,a.Ga).eq(0);d.length&&
3<=b?a.Qv.insertBefore(d):a.Qv.remove();a.up.wr(c.msg,"prepend")}});(0,z.Ni)(this,{action:"LoadNewFeed",element:"Button"})};z.ka(dR);z.y(gR,z.R);gR.prototype.init=function(){z.CG.L(this);this.w(window.document.body)};gR.prototype.C=function(){gR.v.C.call(this);z.Lq(z.q,{cu:!0})();var a=z.L("js-home-feed-list");if(a){var b=new ZQ;this.L(b);b.w(a)}z.L("home-settings-page-wrap")&&(a=z.L("zh-topic-block-editor"))&&(new z.Kt(z.om)).w(a);(new vQ).init();hR();iR();a=dR.aa();eR(a)};z.y(jR,z.R);jR.prototype.init=function(){z.CG.L(this);this.w(window.document.body)};jR.prototype.C=function(){jR.v.C.call(this);var a=(0,window.$)("#zh-following-question-item-list").children(".zh-general-list");if(a.length){var b=new z.Dl;this.L(b);b.use("nodeSource");b.w(a.get(0))}};z.y(kR,z.R);kR.prototype.init=function(){z.CG.L(this);this.w(window.document.body)};kR.prototype.C=function(){kR.v.C.call(this);lR(this);this.tz();nR(this);oR();this.o().g(this,"click!",function(a){"comment"===a.namespace&&a.Gc.fill("category",this.Bh).fill("label",this.PP)})};
kR.prototype.tz=function(){var a=1,b=(0,window.$)("ul.hot-favlists"),c=null;(0,window.$)("#js-hot-fav-switch").click(function(){c&&"pending"===c.state()||(a=5<=a?1:a+1,c=KN(a).done(function(a){b.html(a)}))});b.on("click",".content \x3e a",function(){var a=(0,window.$)(this).closest("li").index()+1;z.yi({category:"collection",action:"visit_collection",label:"explore_sidebar_trending_collections_collection_name",value:a})})};z.y(mR,z.Dl);
mR.prototype.C=function(){mR.v.C.call(this);this.use("childConstructor",{ni:z.xD})};z.n(qR,z.R);qR.prototype.C=function(){this.gr=(0,window.$)(".MyTopicList",this.m());this.pD=(0,window.$)(".MyTopicAdd",this.m());this.dw=(0,window.$)(".js-MyTopicMax-title",this.m());this.qD=(0,window.$)(".js-MyTopicEmpty-title",this.m());var a=new uM({Ef:this.QT.bind(this),Lf:rR(this)});a.w(this.m());this.Ka=a;uR(this);vR(this);this.dispatchEvent(tR)};
qR.prototype.QT=function(){var a=this.Ka.lg().slice(1);if(a&&3<a.length){var b=a[1];this.dw.before('\x3cspan class\x3d"zm-tag-editor-edit-item"\x3e\n      \x3ca class\x3d"nor" href\x3d"/topic/'+b+'"\x3e'+a[0]+'\x3c/a\x3e\n      \x3ca data-url-token\x3d"'+b+'" href\x3d"#" class\x3d"zg-r3px zm-tag-editor-remove-button" name\x3d"remove"\x3e\x3c/a\x3e\n    \x3c/span\x3e');vR(this);sR(this,"add_expert_topic",b)}};var wR=20,tR="topic:change";z.n(xR,z.R);xR.prototype.init=function(){z.CG.L(this);this.w(window.document.body);yR(this);var a=(0,window.$)(".QuestionHotList .zh-general-list");if(a.length){var b=new z.Dl({use:["autoload"]});this.L(b);b.use("nodeSource",{});b.w(a.get(0))}CR(this)};z.x("ZH.entryQuestionFollowersPage",function(){(new qQ).init()});z.x("ZH.entrySQ",function(){(new uP).init()});z.x("ZH.entrySA",function(){(new LP).init()});z.x("ZH.entryL",function(){(new NN).init()});z.x("ZH.entryT",function(){(new nN).init()});z.x("ZH.entrySearch",function(){(new rQ).init()});z.x("ZH.entryPM",function(){(new OM).init()});z.x("ZH.entryPMDetail",function(){(new KM).init()});z.x("ZH.entryTopicFeed",function(){(new cQ).init()});z.x("ZH.entryHome",function(){(new gR).init()});
z.x("ZH.entryQuestionFollowing",function(){(new jR).init()});z.x("ZH.entryExplore",function(){(new kR).init()});z.x("ZH.entryQuestion",function(){(new xR).init()});z.kg("page-main");}).call(this, __z_z__);
//# sourceURL=/static/revved/-/js/closure/page-main.8a3e6cef.js